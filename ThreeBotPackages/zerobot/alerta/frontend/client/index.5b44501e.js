import{S as t,i as e,s as a,a as s,e as l,t as r,m as n,z as c,f as o,g as i,c as h,b as f,d as u,o as d,h as m,j as E,k as p,Q as v,p as $,K as g,v as y,F as T,u as N,w as I,R as D,T as O,E as S,n as b}from"./index.9c196a74.js";import{C as V,g as A,d as L,a as w,S as x,l as _}from"./data.b9deb335.js";const{document:C}=O;function P(t){let e,a;return{c(){e=l("span"),a=r("Delete all alerts?"),this.h()},l(t){e=h(t,"SPAN",{slot:!0});var s=f(e);a=u(s,"Delete all alerts?"),s.forEach(o),this.h()},h(){m(e,"slot","title")},m(t,s){E(t,e,s),p(e,a)},d(t){t&&o(e)}}}function R(t){let e,a;return{c(){e=l("span"),a=r("All alerts stored by alerta will be completely removed, are you\n              sure?"),this.h()},l(t){e=h(t,"SPAN",{slot:!0});var s=f(e);a=u(s,"All alerts stored by alerta will be completely removed, are you\n              sure?"),s.forEach(o),this.h()},h(){m(e,"slot","description")},m(t,s){E(t,e,s),p(e,a)},d(t){t&&o(e)}}}function U(t){let e,a,n,c,d,v;function $(...e){return t[20](t[21],...e)}return{c(){e=s(),a=s(),n=l("button"),c=r("Delete all"),this.h()},l(t){e=i(t),a=i(t),n=h(t,"BUTTON",{type:!0,class:!0,disabled:!0});var s=f(n);c=u(s,"Delete all"),s.forEach(o),this.h()},h(){m(n,"type","button"),m(n,"class","btn btn-primary pointer"),n.disabled=d=!!t[0]&&0==t[0].length},m(t,s){E(t,e,s),E(t,a,s),E(t,n,s),p(n,c),v=g(n,"click",$)},p(e,a){t=e,1&a&&d!==(d=!!t[0]&&0==t[0].length)&&(n.disabled=d)},d(t){t&&o(e),t&&o(a),t&&o(n),v()}}}function j(t){let e,a,s;return{c(){e=l("div"),a=l("h2"),s=r("There is no alerts matching your criteria"),this.h()},l(t){e=h(t,"DIV",{class:!0});var l=f(e);a=h(l,"H2",{});var r=f(a);s=u(r,"There is no alerts matching your criteria"),r.forEach(o),l.forEach(o),this.h()},h(){m(e,"class","mt-5 text-center")},m(t,l){E(t,e,l),p(e,a),p(a,s)},p:b,i:b,o:b,d(t){t&&o(e)}}}function B(t){let e,a,s;return{c(){e=l("div"),a=l("h2"),s=r("All the alerts have been deleted."),this.h()},l(t){e=h(t,"DIV",{class:!0});var l=f(e);a=h(l,"H2",{});var r=f(a);s=u(r,"All the alerts have been deleted."),r.forEach(o),l.forEach(o),this.h()},h(){m(e,"class","mt-5 text-center")},m(t,l){E(t,e,l),p(e,a),p(a,s)},p:b,i:b,o:b,d(t){t&&o(e)}}}function M(t){let e;const a=new x({});return{c(){n(a.$$.fragment)},l(t){d(a.$$.fragment,t)},m(t,s){$(a,t,s),e=!0},p:b,i(t){e||(N(a.$$.fragment,t),e=!0)},o(t){y(a.$$.fragment,t),e=!1},d(t){I(a,t)}}}function H(t){let e,a,s;const r=new _({props:{alerts:t[0]}});return r.$on("delete",t[5]),{c(){e=l("div"),a=l("div"),n(r.$$.fragment),this.h()},l(t){e=h(t,"DIV",{class:!0});var s=f(e);a=h(s,"DIV",{class:!0});var l=f(a);d(r.$$.fragment,l),l.forEach(o),s.forEach(o),this.h()},h(){m(a,"class","col-sm-12"),m(e,"class","row")},m(t,l){E(t,e,l),p(e,a),$(r,a,null),s=!0},p(t,e){const a={};1&e&&(a.alerts=t[0]),r.$set(a)},i(t){s||(N(r.$$.fragment,t),s=!0)},o(t){y(r.$$.fragment,t),s=!1},d(t){t&&o(e),I(r)}}}function Q(t){let e,a,D,O,b,A,L,w,x,_,Q,k,G,W,Y,q,z,F;const K=new V({props:{confirmTitle:"Delete all",cancelTitle:"Cancel",$$slots:{default:[U,({confirm:t})=>({21:t}),({confirm:t})=>t?2097152:0],description:[R,({confirm:t})=>({21:t}),({confirm:t})=>t?2097152:0],title:[P,({confirm:t})=>({21:t}),({confirm:t})=>t?2097152:0]},$$scope:{ctx:t}}}),J=[H,M,B,j],X=[];function Z(t,e){return t[0]&&""!=t[0]&&t[2]&&!t[3]?0:t[2]||t[3]?t[2]&&t[3]?2:3:1}return Y=Z(t),q=X[Y]=J[Y](t),{c(){e=s(),a=l("div"),D=l("div"),O=l("h1"),b=r("Central Alert System"),A=s(),L=l("div"),w=l("div"),x=l("div"),_=l("div"),Q=l("input"),k=s(),G=l("div"),n(K.$$.fragment),W=s(),q.c(),this.h()},l(t){c('[data-svelte="svelte-uhq666"]',C.head).forEach(o),e=i(t),a=h(t,"DIV",{class:!0});var s=f(a);D=h(s,"DIV",{class:!0});var l=f(D);O=h(l,"H1",{});var r=f(O);b=u(r,"Central Alert System"),r.forEach(o),l.forEach(o),A=i(s),L=h(s,"DIV",{class:!0});var n=f(L);w=h(n,"DIV",{class:!0});var m=f(w);x=h(m,"DIV",{class:!0});var E=f(x);_=h(E,"DIV",{class:!0});var p=f(_);Q=h(p,"INPUT",{type:!0,class:!0,id:!0,placeholder:!0}),p.forEach(o),k=i(E),G=h(E,"DIV",{class:!0});var v=f(G);d(K.$$.fragment,v),v.forEach(o),E.forEach(o),m.forEach(o),n.forEach(o),W=i(s),q.l(s),s.forEach(o),this.h()},h(){C.title="Alerta",m(D,"class","m-3 text-center"),m(Q,"type","search"),m(Q,"class","form-control"),m(Q,"id","InputSearch"),m(Q,"placeholder","Search text"),m(_,"class","mx-4 search-width svelte-1a0wwl"),m(G,"class","mx-2"),m(x,"class","d-flex justify-content-start"),m(w,"class","col-sm-12"),m(L,"class","row m-5"),m(a,"class","container-fluid")},m(s,l){E(s,e,l),E(s,a,l),p(a,D),p(D,O),p(O,b),p(a,A),p(a,L),p(L,w),p(w,x),p(x,_),p(_,Q),v(Q,t[1]),p(x,k),p(x,G),$(K,G,null),p(a,W),X[Y].m(a,null),z=!0,F=g(Q,"input",t[19])},p(t,[e]){2&e&&v(Q,t[1]);const s={};4194305&e&&(s.$$scope={dirty:e,ctx:t}),K.$set(s);let l=Y;(Y=Z(t))===l?X[Y].p(t,e):(S(),y(X[l],1,1,()=>{X[l]=null}),T(),(q=X[Y])||(q=X[Y]=J[Y](t)).c(),N(q,1),q.m(a,null))},i(t){z||(N(K.$$.fragment,t),N(q),z=!0)},o(t){y(K.$$.fragment,t),y(q),z=!1},d(t){t&&o(e),t&&o(a),I(K),X[Y].d(),F()}}}function k(t,e,a){let s,l,r="",n="",c=!1,o=!1;const i={BUG:"BUG",QUESTION:"QUESTION",EVENT_SYSTEM:"EVENT (SYSTEM)",EVENT_MONITOR:"EVENT (MONITOR_",EVENT_OPERATOR:"EVENT (OPERATOR)"},h={ALL:"",OPEN:"OPEN",CLOSED:"CLOSED",NEW:"NEW",REOPEN:"REOPEN"};let f={alert_type:i.ALL,status:h.ALL};function u(t){a(2,c=!1),a(3,o=!1),a(0,s=[]),A(t).then(t=>{let e=t.data;a(0,s=e.alerts),m(n=d(e.alerts)),a(2,c=!0)}).catch(t=>{throw t})}function d(t){for(let e=0;e<t.length;e++){let a=t[e];a.status=a.status.toUpperCase(),a.alert_type=i[a.alert_type.toUpperCase()],a.time_first=a.time_first,a.time_last=a.time_last}return t}function m(t){return a(7,l=t),a(0,s=t),m}function E(){const t=r.trim().toLocaleLowerCase();a(0,s=l.filter(e=>{const a=Object.values(e);let s=!1;for(let e of a)s|=(e=String(e).toLocaleLowerCase()).includes(t);return s}))}function p(){L().then(t=>{a(0,s=[]),a(3,o=!0)}).catch(t=>{console.log("error while deleting all alerts",t)})}function v(t){for(let e=0;e<s.length;e++)if(s[e].identifier==t)return e}D(async()=>{u("")});return t.$$.update=(()=>{130&t.$$.dirty&&(r?E():a(0,s=l))}),[s,r,c,o,p,function(t){let e=t.detail.identifier;w(e).then(t=>{let l=v(e);s.splice(l,1),a(0,s=[...s])}).catch(t=>{console.log(t)})},n,l,f,i,h,function(){return!s||0==s.length},u,function(t,e){f={alertType:t,status:e},m(n)},d,m,E,function(){f={alert_type:i.ALL,status:h.ALL},document.getElementById("InputSearch").value="",m(n)},v,function(){r=this.value,a(1,r)},t=>t(p)]}export default class extends t{constructor(t){super(),e(this,t,k,Q,a,{})}}
