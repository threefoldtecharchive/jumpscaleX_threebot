import{S as a,i as t,s as e,e as c,t as l,c as s,a as n,b as r,d as o,f as p,h as i,j as u,y as h,m as g,p as k,G as d,H as m,I as f,J as E,n as b,K as _,L as v,M as T,N as S,O as P}from"./index.4ed08320.js";function y(a,t,e){const c=Object.create(a);return c.pkg=t[e],c}function D(a){let t,e;return{c(){t=c("div"),e=l(a.lastError),this.h()},l(c){t=s(c,"DIV",{class:!0,role:!0});var l=n(t);e=r(l,a.lastError),l.forEach(o),this.h()},h(){p(t,"class","alert alert-danger"),p(t,"role","alert")},m(a,c){i(a,t,c),u(t,e)},p(a,t){a.lastError&&h(e,t.lastError)},d(a){a&&o(t)}}}function C(a){let t,e,h;function g(...t){return a.click_handler_1(a,...t)}return{c(){t=c("button"),e=l("Start"),this.h()},l(a){t=s(a,"BUTTON",{type:!0,class:!0});var c=n(t);e=r(c,"Start"),c.forEach(o),this.h()},h(){p(t,"type","button"),p(t,"class","btn btn-success btn-sm"),h=d(t,"click",g)},m(a,c){i(a,t,c),u(t,e)},p(t,e){a=e},d(a){a&&o(t),h()}}}function O(a){let t,e,h;function g(...t){return a.click_handler_2(a,...t)}return{c(){t=c("button"),e=l("Stop"),this.h()},l(a){t=s(a,"BUTTON",{type:!0,class:!0});var c=n(t);e=r(c,"Stop"),c.forEach(o),this.h()},h(){p(t,"type","button"),p(t,"class","btn btn-danger btn-sm"),h=d(t,"click",g)},m(a,c){i(a,t,c),u(t,e)},p(t,e){a=e},d(a){a&&o(t),h()}}}function I(a){let t,e,h;function g(...t){return a.click_handler_3(a,...t)}return{c(){t=c("button"),e=l("Enable"),this.h()},l(a){t=s(a,"BUTTON",{type:!0,class:!0});var c=n(t);e=r(c,"Enable"),c.forEach(o),this.h()},h(){p(t,"type","button"),p(t,"class","btn btn-primary btn-sm"),h=d(t,"click",g)},m(a,c){i(a,t,c),u(t,e)},p(t,e){a=e},d(a){a&&o(t),h()}}}function N(a){let t,e,h;function g(...t){return a.click_handler_4(a,...t)}return{c(){t=c("button"),e=l("Disable"),this.h()},l(a){t=s(a,"BUTTON",{type:!0,class:!0});var c=n(t);e=r(c,"Disable"),c.forEach(o),this.h()},h(){p(t,"type","button"),p(t,"class","btn btn-light btn-sm"),h=d(t,"click",g)},m(a,c){i(a,t,c),u(t,e)},p(t,e){a=e},d(a){a&&o(t),h()}}}function B(a){let t,e,h;function g(...t){return a.click_handler_5(a,...t)}return{c(){t=c("button"),e=l("Delete"),this.h()},l(a){t=s(a,"BUTTON",{type:!0,class:!0});var c=n(t);e=r(c,"Delete"),c.forEach(o),this.h()},h(){p(t,"type","button"),p(t,"class","btn btn-dark btn-sm"),h=d(t,"click",g)},m(a,c){i(a,t,c),u(t,e)},p(t,e){a=e},d(a){a&&o(t),h()}}}function w(a){let t,e,d,m,f,E,b,_,v,T,S,P,y,D,w,G,H=a.pkg.name+"",A=a.pkgStatus[a.pkg.status].name+"",U=a.pkg.path+"",R=a.pkgStatus[a.pkg.status].actions.includes("start"),V=a.pkgStatus[a.pkg.status].actions.includes("stop"),x=a.pkgStatus[a.pkg.status].actions.includes("enable"),M=a.pkgStatus[a.pkg.status].actions.includes("disable"),j=a.pkgStatus[a.pkg.status].actions.includes("delete"),F=R&&C(a),L=V&&O(a),J=x&&I(a),K=M&&N(a),Y=j&&B(a);return{c(){t=c("tr"),e=c("th"),d=l(H),m=g(),f=c("td"),E=l(A),b=g(),_=c("td"),v=l(U),T=g(),S=c("td"),F&&F.c(),P=g(),L&&L.c(),y=g(),J&&J.c(),D=g(),K&&K.c(),w=g(),Y&&Y.c(),G=g(),this.h()},l(a){t=s(a,"TR",{});var c=n(t);e=s(c,"TH",{scope:!0});var l=n(e);d=r(l,H),l.forEach(o),m=k(c),f=s(c,"TD",{});var p=n(f);E=r(p,A),p.forEach(o),b=k(c),_=s(c,"TD",{});var i=n(_);v=r(i,U),i.forEach(o),T=k(c),S=s(c,"TD",{});var u=n(S);F&&F.l(u),P=k(u),L&&L.l(u),y=k(u),J&&J.l(u),D=k(u),K&&K.l(u),w=k(u),Y&&Y.l(u),u.forEach(o),G=k(c),c.forEach(o),this.h()},h(){p(e,"scope","row")},m(a,c){i(a,t,c),u(t,e),u(e,d),u(t,m),u(t,f),u(f,E),u(t,b),u(t,_),u(_,v),u(t,T),u(t,S),F&&F.m(S,null),u(S,P),L&&L.m(S,null),u(S,y),J&&J.m(S,null),u(S,D),K&&K.m(S,null),u(S,w),Y&&Y.m(S,null),u(t,G)},p(a,t){a.packages&&H!==(H=t.pkg.name+"")&&h(d,H),a.packages&&A!==(A=t.pkgStatus[t.pkg.status].name+"")&&h(E,A),a.packages&&U!==(U=t.pkg.path+"")&&h(v,U),a.packages&&(R=t.pkgStatus[t.pkg.status].actions.includes("start")),R?F?F.p(a,t):((F=C(t)).c(),F.m(S,P)):F&&(F.d(1),F=null),a.packages&&(V=t.pkgStatus[t.pkg.status].actions.includes("stop")),V?L?L.p(a,t):((L=O(t)).c(),L.m(S,y)):L&&(L.d(1),L=null),a.packages&&(x=t.pkgStatus[t.pkg.status].actions.includes("enable")),x?J?J.p(a,t):((J=I(t)).c(),J.m(S,D)):J&&(J.d(1),J=null),a.packages&&(M=t.pkgStatus[t.pkg.status].actions.includes("disable")),M?K?K.p(a,t):((K=N(t)).c(),K.m(S,w)):K&&(K.d(1),K=null),a.packages&&(j=t.pkgStatus[t.pkg.status].actions.includes("delete")),j?Y?Y.p(a,t):((Y=B(t)).c(),Y.m(S,null)):Y&&(Y.d(1),Y=null)},d(a){a&&o(t),F&&F.d(),L&&L.d(),J&&J.d(),K&&K.d(),Y&&Y.d()}}}function G(a){let t,e,h,T,P,C,O,I,N,B,G,H,A,U,R,V,x,M,j,F,L,J,K,Y,q,z,Q,W,X,Z,$,aa,ta,ea,ca,la,sa,na,ra,oa,pa,ia,ua,ha,ga=null!=a.lastError&&D(a),ka=a.packages,da=[];for(let t=0;t<ka.length;t+=1)da[t]=w(y(a,ka,t));return{c(){t=g(),e=c("h2"),h=l("3Bot Package Manager"),T=c("br"),P=c("br"),C=g(),O=c("form"),ga&&ga.c(),I=g(),N=c("div"),B=c("div"),G=c("select"),H=c("option"),A=l("path"),U=c("option"),R=l("giturl"),V=g(),x=c("div"),M=c("div"),j=c("input"),F=g(),L=c("div"),J=c("button"),K=l("Add package"),Y=g(),q=c("table"),z=c("caption"),Q=l("Packages"),W=g(),X=c("thead"),Z=c("tr"),$=c("th"),aa=l("Name"),ta=g(),ea=c("th"),ca=l("Status"),la=g(),sa=c("th"),na=l("Path"),ra=g(),oa=c("th"),pa=l("Actions"),ia=g(),ua=c("tbody");for(let a=0;a<da.length;a+=1)da[a].c();this.h()},l(a){t=k(a),e=s(a,"H2",{});var c=n(e);h=r(c,"3Bot Package Manager"),c.forEach(o),T=s(a,"BR",{}),P=s(a,"BR",{}),C=k(a),O=s(a,"FORM",{});var l=n(O);ga&&ga.l(l),I=k(l),N=s(l,"DIV",{class:!0});var p=n(N);B=s(p,"DIV",{class:!0});var i=n(B);G=s(i,"SELECT",{class:!0,id:!0});var u=n(G);H=s(u,"OPTION",{value:!0,selected:!0});var g=n(H);A=r(g,"path"),g.forEach(o),U=s(u,"OPTION",{value:!0});var d=n(U);R=r(d,"giturl"),d.forEach(o),u.forEach(o),i.forEach(o),V=k(p),x=s(p,"DIV",{class:!0});var m=n(x);M=s(m,"DIV",{class:!0});var f=n(M);j=s(f,"INPUT",{type:!0,class:!0,id:!0}),f.forEach(o),m.forEach(o),F=k(p),L=s(p,"DIV",{class:!0});var E=n(L);J=s(E,"BUTTON",{type:!0,class:!0});var b=n(J);K=r(b,"Add package"),b.forEach(o),E.forEach(o),p.forEach(o),l.forEach(o),Y=k(a),q=s(a,"TABLE",{class:!0,style:!0});var _=n(q);z=s(_,"CAPTION",{});var v=n(z);Q=r(v,"Packages"),v.forEach(o),W=k(_),X=s(_,"THEAD",{});var S=n(X);Z=s(S,"TR",{});var y=n(Z);$=s(y,"TH",{scope:!0});var D=n($);aa=r(D,"Name"),D.forEach(o),ta=k(y),ea=s(y,"TH",{scope:!0});var w=n(ea);ca=r(w,"Status"),w.forEach(o),la=k(y),sa=s(y,"TH",{scope:!0});var ha=n(sa);na=r(ha,"Path"),ha.forEach(o),ra=k(y),oa=s(y,"TH",{scope:!0});var ka=n(oa);pa=r(ka,"Actions"),ka.forEach(o),y.forEach(o),S.forEach(o),ia=k(_),ua=s(_,"TBODY",{});var ma=n(ua);for(let a=0;a<da.length;a+=1)da[a].l(ma);ma.forEach(o),_.forEach(o),this.h()},h(){document.title="3bot Package Manager",H.__value="path",H.value=H.__value,H.selected=!0,U.__value="git_url",U.value=U.__value,p(G,"class","custom-select mr-sm-3"),p(G,"id","inlineFormCustomSelect"),void 0===a.method&&S(()=>a.select_change_handler.call(G)),p(B,"class","col-auto"),p(j,"type","text"),p(j,"class","form-control"),p(j,"id","inlineFormInputGroup"),p(M,"class","input-group mb-2"),p(x,"class","col-6"),p(J,"type","button"),p(J,"class","btn btn-primary mb-2"),p(L,"class","col-auto"),p(N,"class","form-row align-items-center"),p($,"scope","col"),p(ea,"scope","col"),p(sa,"scope","col"),p(oa,"scope","col"),p(q,"class","table"),m(q,"margin-top","20px"),ha=[d(G,"change",a.select_change_handler),d(j,"input",a.input_input_handler),d(J,"click",a.click_handler)]},m(c,l){i(c,t,l),i(c,e,l),u(e,h),i(c,T,l),i(c,P,l),i(c,C,l),i(c,O,l),ga&&ga.m(O,null),u(O,I),u(O,N),u(N,B),u(B,G),u(G,H),u(H,A),u(G,U),u(U,R),f(G,a.method),u(N,V),u(N,x),u(x,M),u(M,j),E(j,a.newPackagePath),u(N,F),u(N,L),u(L,J),u(J,K),i(c,Y,l),i(c,q,l),u(q,z),u(z,Q),u(q,W),u(q,X),u(X,Z),u(Z,$),u($,aa),u(Z,ta),u(Z,ea),u(ea,ca),u(Z,la),u(Z,sa),u(sa,na),u(Z,ra),u(Z,oa),u(oa,pa),u(q,ia),u(q,ua);for(let a=0;a<da.length;a+=1)da[a].m(ua,null)},p(a,t){if(null!=t.lastError?ga?ga.p(a,t):((ga=D(t)).c(),ga.m(O,I)):ga&&(ga.d(1),ga=null),a.method&&f(G,t.method),a.newPackagePath&&j.value!==t.newPackagePath&&E(j,t.newPackagePath),a.pkgStatus||a.packages||a.packageDelete||a.packageDisable||a.packageEnable||a.packageStop||a.packageStart){let e;for(ka=t.packages,e=0;e<ka.length;e+=1){const c=y(t,ka,e);da[e]?da[e].p(a,c):(da[e]=w(c),da[e].c(),da[e].m(ua,null))}for(;e<da.length;e+=1)da[e].d(1);da.length=ka.length}},i:b,o:b,d(a){a&&o(t),a&&o(e),a&&o(T),a&&o(P),a&&o(C),a&&o(O),ga&&ga.d(),a&&o(Y),a&&o(q),_(da,a),v(ha)}}}function H(a,t,e){let c="path",l="",s=null,n=[];function r(){packageGedisClient.threefold.packagemanager.actors.package_manager.packages_list().then(a=>{if(!a.ok){let t=new Error(a);throw e("lastError",s=t),t}a.json().then(a=>{e("packages",n=a.packages),e("lastError",s=null)})})}function o(){let a={};a[c]=l,packageGedisClient.threefold.packagemanager.actors.package_manager.package_add(a).then(a=>{a.ok?(e("lastError",s=null),r()):e("lastError",s="Couldn't add package "+l)})}function p(a){let t={name:a};packageGedisClient.threefold.packagemanager.actors.package_manager.package_enable(t).then(t=>{t.ok?(e("lastError",s=null),r()):e("lastError",s="Couldn't enable package "+a)})}function i(a){let t={name:a};packageGedisClient.threefold.packagemanager.actors.package_manager.spackage_disable(t).then(t=>{t.ok?(e("lastError",s=null),r()):e("lastError",s="Couldn't disable package "+a)})}function u(a){let t={name:a};packageGedisClient.threefold.packagemanager.actors.package_manager.package_stop(t).then(t=>{t.ok?(e("lastError",s=null),r()):e("lastError",s="Couldn't stop package "+a)})}function h(a){let t={name:a};packageGedisClient.threefold.packagemanager.actors.package_manager.package_start(t).then(t=>{t.ok?(e("lastError",s=null),r()):e("lastError",s="Couldn't start package "+a)})}function g(a){let t={name:a};packageGedisClient.threefold.packagemanager.actors.package_manager.package_delete(t).then(t=>{t.ok?(e("lastError",s=null),r()):e("lastError",s="Couldn't delete package "+a)})}T(async()=>{r()});return{method:c,newPackagePath:l,lastError:s,packages:n,pkgStatus:{0:{name:"Init",actions:["delete"]},1:{name:"Installed",actions:["delete","start"]},2:{name:"Running",actions:["delete","stop"]},3:{name:"Halted",actions:["delete","start","disable"]},4:{name:"Disabled",actions:["delete","enable"]},5:{name:"Error",actions:["delete"]}},packageAdd:o,packageEnable:p,packageDisable:i,packageStop:u,packageStart:h,packageDelete:g,select_change_handler:function(){c=P(this),e("method",c)},input_input_handler:function(){l=this.value,e("newPackagePath",l)},click_handler:()=>o(),click_handler_1:({pkg:a})=>h(a.name),click_handler_2:({pkg:a})=>u(a.name),click_handler_3:({pkg:a})=>p(a.name),click_handler_4:({pkg:a})=>i(a.name),click_handler_5:({pkg:a})=>g(a.name)}}export default class extends a{constructor(a){super(),t(this,a,H,G,e,{})}}
