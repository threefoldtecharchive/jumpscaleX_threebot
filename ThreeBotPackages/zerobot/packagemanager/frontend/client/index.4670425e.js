import{S as a,i as t,s as e,e as l,t as c,c as s,a as n,b as r,d as o,f as p,h as i,j as u,y as h,m as g,p as d,G as k,H as m,I as f,J as E,n as b,K as v,L as _,M as T,N as S,O as P}from"./index.4ed08320.js";function y(a,t,e){const l=Object.create(a);return l.pkg=t[e],l}function D(a){let t,e;return{c(){t=l("div"),e=c(a.lastError),this.h()},l(l){t=s(l,"DIV",{class:!0,role:!0});var c=n(t);e=r(c,a.lastError),c.forEach(o),this.h()},h(){p(t,"class","alert alert-danger"),p(t,"role","alert")},m(a,l){i(a,t,l),u(t,e)},p(a,t){a.lastError&&h(e,t.lastError)},d(a){a&&o(t)}}}function C(a){let t,e,h;function g(...t){return a.click_handler_1(a,...t)}return{c(){t=l("button"),e=c("Start"),this.h()},l(a){t=s(a,"BUTTON",{type:!0,class:!0});var l=n(t);e=r(l,"Start"),l.forEach(o),this.h()},h(){p(t,"type","button"),p(t,"class","btn btn-success btn-sm"),h=k(t,"click",g)},m(a,l){i(a,t,l),u(t,e)},p(t,e){a=e},d(a){a&&o(t),h()}}}function O(a){let t,e,h;function g(...t){return a.click_handler_2(a,...t)}return{c(){t=l("button"),e=c("Stop"),this.h()},l(a){t=s(a,"BUTTON",{type:!0,class:!0});var l=n(t);e=r(l,"Stop"),l.forEach(o),this.h()},h(){p(t,"type","button"),p(t,"class","btn btn-danger btn-sm"),h=k(t,"click",g)},m(a,l){i(a,t,l),u(t,e)},p(t,e){a=e},d(a){a&&o(t),h()}}}function I(a){let t,e,h;function g(...t){return a.click_handler_3(a,...t)}return{c(){t=l("button"),e=c("Enable"),this.h()},l(a){t=s(a,"BUTTON",{type:!0,class:!0});var l=n(t);e=r(l,"Enable"),l.forEach(o),this.h()},h(){p(t,"type","button"),p(t,"class","btn btn-primary btn-sm"),h=k(t,"click",g)},m(a,l){i(a,t,l),u(t,e)},p(t,e){a=e},d(a){a&&o(t),h()}}}function N(a){let t,e,h;function g(...t){return a.click_handler_4(a,...t)}return{c(){t=l("button"),e=c("Disable"),this.h()},l(a){t=s(a,"BUTTON",{type:!0,class:!0});var l=n(t);e=r(l,"Disable"),l.forEach(o),this.h()},h(){p(t,"type","button"),p(t,"class","btn btn-light btn-sm"),h=k(t,"click",g)},m(a,l){i(a,t,l),u(t,e)},p(t,e){a=e},d(a){a&&o(t),h()}}}function B(a){let t,e,h;function g(...t){return a.click_handler_5(a,...t)}return{c(){t=l("button"),e=c("Delete"),this.h()},l(a){t=s(a,"BUTTON",{type:!0,class:!0});var l=n(t);e=r(l,"Delete"),l.forEach(o),this.h()},h(){p(t,"type","button"),p(t,"class","btn btn-dark btn-sm"),h=k(t,"click",g)},m(a,l){i(a,t,l),u(t,e)},p(t,e){a=e},d(a){a&&o(t),h()}}}function w(a){let t,e,k,m,f,E,b,v,_,T,S,P,y,D,w,G,H=a.pkg.name+"",A=a.pkgStatus[a.pkg.status].name+"",U=a.pkg.path+"",R=a.pkgStatus[a.pkg.status].actions.includes("start"),V=a.pkgStatus[a.pkg.status].actions.includes("stop"),x=a.pkgStatus[a.pkg.status].actions.includes("enable"),M=a.pkgStatus[a.pkg.status].actions.includes("disable"),j=a.pkgStatus[a.pkg.status].actions.includes("delete"),F=R&&C(a),L=V&&O(a),J=x&&I(a),K=M&&N(a),Y=j&&B(a);return{c(){t=l("tr"),e=l("th"),k=c(H),m=g(),f=l("td"),E=c(A),b=g(),v=l("td"),_=c(U),T=g(),S=l("td"),F&&F.c(),P=g(),L&&L.c(),y=g(),J&&J.c(),D=g(),K&&K.c(),w=g(),Y&&Y.c(),G=g(),this.h()},l(a){t=s(a,"TR",{});var l=n(t);e=s(l,"TH",{scope:!0});var c=n(e);k=r(c,H),c.forEach(o),m=d(l),f=s(l,"TD",{});var p=n(f);E=r(p,A),p.forEach(o),b=d(l),v=s(l,"TD",{});var i=n(v);_=r(i,U),i.forEach(o),T=d(l),S=s(l,"TD",{});var u=n(S);F&&F.l(u),P=d(u),L&&L.l(u),y=d(u),J&&J.l(u),D=d(u),K&&K.l(u),w=d(u),Y&&Y.l(u),u.forEach(o),G=d(l),l.forEach(o),this.h()},h(){p(e,"scope","row")},m(a,l){i(a,t,l),u(t,e),u(e,k),u(t,m),u(t,f),u(f,E),u(t,b),u(t,v),u(v,_),u(t,T),u(t,S),F&&F.m(S,null),u(S,P),L&&L.m(S,null),u(S,y),J&&J.m(S,null),u(S,D),K&&K.m(S,null),u(S,w),Y&&Y.m(S,null),u(t,G)},p(a,t){a.packages&&H!==(H=t.pkg.name+"")&&h(k,H),a.packages&&A!==(A=t.pkgStatus[t.pkg.status].name+"")&&h(E,A),a.packages&&U!==(U=t.pkg.path+"")&&h(_,U),a.packages&&(R=t.pkgStatus[t.pkg.status].actions.includes("start")),R?F?F.p(a,t):((F=C(t)).c(),F.m(S,P)):F&&(F.d(1),F=null),a.packages&&(V=t.pkgStatus[t.pkg.status].actions.includes("stop")),V?L?L.p(a,t):((L=O(t)).c(),L.m(S,y)):L&&(L.d(1),L=null),a.packages&&(x=t.pkgStatus[t.pkg.status].actions.includes("enable")),x?J?J.p(a,t):((J=I(t)).c(),J.m(S,D)):J&&(J.d(1),J=null),a.packages&&(M=t.pkgStatus[t.pkg.status].actions.includes("disable")),M?K?K.p(a,t):((K=N(t)).c(),K.m(S,w)):K&&(K.d(1),K=null),a.packages&&(j=t.pkgStatus[t.pkg.status].actions.includes("delete")),j?Y?Y.p(a,t):((Y=B(t)).c(),Y.m(S,null)):Y&&(Y.d(1),Y=null)},d(a){a&&o(t),F&&F.d(),L&&L.d(),J&&J.d(),K&&K.d(),Y&&Y.d()}}}function G(a){let t,e,h,T,P,C,O,I,N,B,G,H,A,U,R,V,x,M,j,F,L,J,K,Y,q,z,Q,W,X,Z,$,aa,ta,ea,la,ca,sa,na,ra,oa,pa,ia,ua,ha,ga=null!=a.lastError&&D(a),da=a.packages,ka=[];for(let t=0;t<da.length;t+=1)ka[t]=w(y(a,da,t));return{c(){t=g(),e=l("h2"),h=c("3Bot Package Manager"),T=l("br"),P=l("br"),C=g(),O=l("form"),ga&&ga.c(),I=g(),N=l("div"),B=l("div"),G=l("select"),H=l("option"),A=c("path"),U=l("option"),R=c("giturl"),V=g(),x=l("div"),M=l("div"),j=l("input"),F=g(),L=l("div"),J=l("button"),K=c("Add package"),Y=g(),q=l("table"),z=l("caption"),Q=c("Packages"),W=g(),X=l("thead"),Z=l("tr"),$=l("th"),aa=c("Name"),ta=g(),ea=l("th"),la=c("Status"),ca=g(),sa=l("th"),na=c("Path"),ra=g(),oa=l("th"),pa=c("Actions"),ia=g(),ua=l("tbody");for(let a=0;a<ka.length;a+=1)ka[a].c();this.h()},l(a){t=d(a),e=s(a,"H2",{});var l=n(e);h=r(l,"3Bot Package Manager"),l.forEach(o),T=s(a,"BR",{}),P=s(a,"BR",{}),C=d(a),O=s(a,"FORM",{});var c=n(O);ga&&ga.l(c),I=d(c),N=s(c,"DIV",{class:!0});var p=n(N);B=s(p,"DIV",{class:!0});var i=n(B);G=s(i,"SELECT",{class:!0,id:!0});var u=n(G);H=s(u,"OPTION",{value:!0,selected:!0});var g=n(H);A=r(g,"path"),g.forEach(o),U=s(u,"OPTION",{value:!0});var k=n(U);R=r(k,"giturl"),k.forEach(o),u.forEach(o),i.forEach(o),V=d(p),x=s(p,"DIV",{class:!0});var m=n(x);M=s(m,"DIV",{class:!0});var f=n(M);j=s(f,"INPUT",{type:!0,class:!0,id:!0}),f.forEach(o),m.forEach(o),F=d(p),L=s(p,"DIV",{class:!0});var E=n(L);J=s(E,"BUTTON",{type:!0,class:!0});var b=n(J);K=r(b,"Add package"),b.forEach(o),E.forEach(o),p.forEach(o),c.forEach(o),Y=d(a),q=s(a,"TABLE",{class:!0,style:!0});var v=n(q);z=s(v,"CAPTION",{});var _=n(z);Q=r(_,"Packages"),_.forEach(o),W=d(v),X=s(v,"THEAD",{});var S=n(X);Z=s(S,"TR",{});var y=n(Z);$=s(y,"TH",{scope:!0});var D=n($);aa=r(D,"Name"),D.forEach(o),ta=d(y),ea=s(y,"TH",{scope:!0});var w=n(ea);la=r(w,"Status"),w.forEach(o),ca=d(y),sa=s(y,"TH",{scope:!0});var ha=n(sa);na=r(ha,"Path"),ha.forEach(o),ra=d(y),oa=s(y,"TH",{scope:!0});var da=n(oa);pa=r(da,"Actions"),da.forEach(o),y.forEach(o),S.forEach(o),ia=d(v),ua=s(v,"TBODY",{});var ma=n(ua);for(let a=0;a<ka.length;a+=1)ka[a].l(ma);ma.forEach(o),v.forEach(o),this.h()},h(){document.title="3bot Package Manager",H.__value="path",H.value=H.__value,H.selected=!0,U.__value="git_url",U.value=U.__value,p(G,"class","custom-select mr-sm-3"),p(G,"id","inlineFormCustomSelect"),void 0===a.method&&S(()=>a.select_change_handler.call(G)),p(B,"class","col-auto"),p(j,"type","text"),p(j,"class","form-control"),p(j,"id","inlineFormInputGroup"),p(M,"class","input-group mb-2"),p(x,"class","col-6"),p(J,"type","button"),p(J,"class","btn btn-primary mb-2"),p(L,"class","col-auto"),p(N,"class","form-row align-items-center"),p($,"scope","col"),p(ea,"scope","col"),p(sa,"scope","col"),p(oa,"scope","col"),p(q,"class","table"),m(q,"margin-top","20px"),ha=[k(G,"change",a.select_change_handler),k(j,"input",a.input_input_handler),k(J,"click",a.click_handler)]},m(l,c){i(l,t,c),i(l,e,c),u(e,h),i(l,T,c),i(l,P,c),i(l,C,c),i(l,O,c),ga&&ga.m(O,null),u(O,I),u(O,N),u(N,B),u(B,G),u(G,H),u(H,A),u(G,U),u(U,R),f(G,a.method),u(N,V),u(N,x),u(x,M),u(M,j),E(j,a.newPackagePath),u(N,F),u(N,L),u(L,J),u(J,K),i(l,Y,c),i(l,q,c),u(q,z),u(z,Q),u(q,W),u(q,X),u(X,Z),u(Z,$),u($,aa),u(Z,ta),u(Z,ea),u(ea,la),u(Z,ca),u(Z,sa),u(sa,na),u(Z,ra),u(Z,oa),u(oa,pa),u(q,ia),u(q,ua);for(let a=0;a<ka.length;a+=1)ka[a].m(ua,null)},p(a,t){if(null!=t.lastError?ga?ga.p(a,t):((ga=D(t)).c(),ga.m(O,I)):ga&&(ga.d(1),ga=null),a.method&&f(G,t.method),a.newPackagePath&&j.value!==t.newPackagePath&&E(j,t.newPackagePath),a.pkgStatus||a.packages||a.packageDelete||a.packageDisable||a.packageEnable||a.packageStop||a.packageStart){let e;for(da=t.packages,e=0;e<da.length;e+=1){const l=y(t,da,e);ka[e]?ka[e].p(a,l):(ka[e]=w(l),ka[e].c(),ka[e].m(ua,null))}for(;e<ka.length;e+=1)ka[e].d(1);ka.length=da.length}},i:b,o:b,d(a){a&&o(t),a&&o(e),a&&o(T),a&&o(P),a&&o(C),a&&o(O),ga&&ga.d(),a&&o(Y),a&&o(q),v(ka,a),_(ha)}}}function H(a,t,e){let l="path",c="",s=null,n=[];function r(){packageGedisClient.threefold.packagemanager.actors.packages_list().then(a=>{if(!a.ok){let t=new Error(a);throw e("lastError",s=t),t}a.json().then(a=>{e("packages",n=a.packages),e("lastError",s=null)})})}function o(){let a={};a[l]=c,packageGedisClient.threefold.packagemanager.actors.package_add(a).then(a=>{a.ok?(e("lastError",s=null),r()):e("lastError",s="Couldn't add package "+c)})}function p(a){let t={name:a};packageGedisClient.threefold.packagemanager.actors.package_enable(t).then(t=>{t.ok?(e("lastError",s=null),r()):e("lastError",s="Couldn't enable package "+a)})}function i(a){let t={name:a};packageGedisClient.threefold.packagemanager.actors.package_disable(t).then(t=>{t.ok?(e("lastError",s=null),r()):e("lastError",s="Couldn't disable package "+a)})}function u(a){let t={name:a};packageGedisClient.threefold.packagemanager.actors.package_stop(t).then(t=>{t.ok?(e("lastError",s=null),r()):e("lastError",s="Couldn't stop package "+a)})}function h(a){let t={name:a};packageGedisClient.threefold.packagemanager.actors.package_start(t).then(t=>{t.ok?(e("lastError",s=null),r()):e("lastError",s="Couldn't start package "+a)})}function g(a){let t={name:a};packageGedisClient.threefold.packagemanager.actors.package_delete(t).then(t=>{t.ok?(e("lastError",s=null),r()):e("lastError",s="Couldn't delete package "+a)})}T(async()=>{r()});return{method:l,newPackagePath:c,lastError:s,packages:n,pkgStatus:{0:{name:"Init",actions:["delete"]},1:{name:"Installed",actions:["delete","start"]},2:{name:"Running",actions:["delete","stop"]},3:{name:"Halted",actions:["delete","start","disable"]},4:{name:"Disabled",actions:["delete","enable"]},5:{name:"Error",actions:["delete"]}},packageAdd:o,packageEnable:p,packageDisable:i,packageStop:u,packageStart:h,packageDelete:g,select_change_handler:function(){l=P(this),e("method",l)},input_input_handler:function(){c=this.value,e("newPackagePath",c)},click_handler:()=>o(),click_handler_1:({pkg:a})=>h(a.name),click_handler_2:({pkg:a})=>u(a.name),click_handler_3:({pkg:a})=>p(a.name),click_handler_4:({pkg:a})=>i(a.name),click_handler_5:({pkg:a})=>g(a.name)}}export default class extends a{constructor(a){super(),t(this,a,H,G,e,{})}}
