import{_ as a,a as t,b as n,c as e,i as c,d as r,S as o,s,e as l,t as u,f as i,g as p,h as g,j as h,k as f,m as k,o as d,C as m,r as v,v as b,M as E,N as _,O as T,P as y,n as S,Q as P,R as D,T as C,U as w,K as O,V as A}from"./index.3a9aa9d7.js";function I(a,t,n){var e=Object.create(a);return e.pkg=t[n],e}function N(a){var t,n;return{c:function(){t=l("div"),n=u(a.lastError),this.h()},l:function(e){t=i(e,"DIV",{class:!0,role:!0});var c=p(t);n=g(c,a.lastError),c.forEach(h),this.h()},h:function(){f(t,"class","alert alert-danger"),f(t,"role","alert")},m:function(a,e){k(a,t,e),d(t,n)},p:function(a,t){a.lastError&&m(n,t.lastError)},d:function(a){a&&h(t)}}}function B(a){var t,n,e;function c(){for(var t,n=arguments.length,e=new Array(n),c=0;c<n;c++)e[c]=arguments[c];return(t=a).click_handler_1.apply(t,[a].concat(e))}return{c:function(){t=l("button"),n=u("Start"),this.h()},l:function(a){t=i(a,"BUTTON",{type:!0,class:!0});var e=p(t);n=g(e,"Start"),e.forEach(h),this.h()},h:function(){f(t,"type","button"),f(t,"class","btn btn-success btn-sm"),e=E(t,"click",c)},m:function(a,e){k(a,t,e),d(t,n)},p:function(t,n){a=n},d:function(a){a&&h(t),e()}}}function G(a){var t,n,e;function c(){for(var t,n=arguments.length,e=new Array(n),c=0;c<n;c++)e[c]=arguments[c];return(t=a).click_handler_2.apply(t,[a].concat(e))}return{c:function(){t=l("button"),n=u("Stop"),this.h()},l:function(a){t=i(a,"BUTTON",{type:!0,class:!0});var e=p(t);n=g(e,"Stop"),e.forEach(h),this.h()},h:function(){f(t,"type","button"),f(t,"class","btn btn-danger btn-sm"),e=E(t,"click",c)},m:function(a,e){k(a,t,e),d(t,n)},p:function(t,n){a=n},d:function(a){a&&h(t),e()}}}function H(a){var t,n,e;function c(){for(var t,n=arguments.length,e=new Array(n),c=0;c<n;c++)e[c]=arguments[c];return(t=a).click_handler_3.apply(t,[a].concat(e))}return{c:function(){t=l("button"),n=u("Enable"),this.h()},l:function(a){t=i(a,"BUTTON",{type:!0,class:!0});var e=p(t);n=g(e,"Enable"),e.forEach(h),this.h()},h:function(){f(t,"type","button"),f(t,"class","btn btn-primary btn-sm"),e=E(t,"click",c)},m:function(a,e){k(a,t,e),d(t,n)},p:function(t,n){a=n},d:function(a){a&&h(t),e()}}}function U(a){var t,n,e;function c(){for(var t,n=arguments.length,e=new Array(n),c=0;c<n;c++)e[c]=arguments[c];return(t=a).click_handler_4.apply(t,[a].concat(e))}return{c:function(){t=l("button"),n=u("Disable"),this.h()},l:function(a){t=i(a,"BUTTON",{type:!0,class:!0});var e=p(t);n=g(e,"Disable"),e.forEach(h),this.h()},h:function(){f(t,"type","button"),f(t,"class","btn btn-light btn-sm"),e=E(t,"click",c)},m:function(a,e){k(a,t,e),d(t,n)},p:function(t,n){a=n},d:function(a){a&&h(t),e()}}}function z(a){var t,n,e;function c(){for(var t,n=arguments.length,e=new Array(n),c=0;c<n;c++)e[c]=arguments[c];return(t=a).click_handler_5.apply(t,[a].concat(e))}return{c:function(){t=l("button"),n=u("Delete"),this.h()},l:function(a){t=i(a,"BUTTON",{type:!0,class:!0});var e=p(t);n=g(e,"Delete"),e.forEach(h),this.h()},h:function(){f(t,"type","button"),f(t,"class","btn btn-dark btn-sm"),e=E(t,"click",c)},m:function(a,e){k(a,t,e),d(t,n)},p:function(t,n){a=n},d:function(a){a&&h(t),e()}}}function R(a){var t,n,e,c,r,o,s,E,_,T,y,S,P,D,C,w,O=a.pkg.name+"",A=a.pkgStatus[a.pkg.status].name+"",I=a.pkg.path+"",N=a.pkgStatus[a.pkg.status].actions.includes("start"),R=a.pkgStatus[a.pkg.status].actions.includes("stop"),V=a.pkgStatus[a.pkg.status].actions.includes("enable"),x=a.pkgStatus[a.pkg.status].actions.includes("disable"),M=a.pkgStatus[a.pkg.status].actions.includes("delete"),j=N&&B(a),F=R&&G(a),L=V&&H(a),K=x&&U(a),Q=M&&z(a);return{c:function(){t=l("tr"),n=l("th"),e=u(O),c=v(),r=l("td"),o=u(A),s=v(),E=l("td"),_=u(I),T=v(),y=l("td"),j&&j.c(),S=v(),F&&F.c(),P=v(),L&&L.c(),D=v(),K&&K.c(),C=v(),Q&&Q.c(),w=v(),this.h()},l:function(a){t=i(a,"TR",{});var l=p(t);n=i(l,"TH",{scope:!0});var u=p(n);e=g(u,O),u.forEach(h),c=b(l),r=i(l,"TD",{});var f=p(r);o=g(f,A),f.forEach(h),s=b(l),E=i(l,"TD",{});var k=p(E);_=g(k,I),k.forEach(h),T=b(l),y=i(l,"TD",{});var d=p(y);j&&j.l(d),S=b(d),F&&F.l(d),P=b(d),L&&L.l(d),D=b(d),K&&K.l(d),C=b(d),Q&&Q.l(d),d.forEach(h),w=b(l),l.forEach(h),this.h()},h:function(){f(n,"scope","row")},m:function(a,l){k(a,t,l),d(t,n),d(n,e),d(t,c),d(t,r),d(r,o),d(t,s),d(t,E),d(E,_),d(t,T),d(t,y),j&&j.m(y,null),d(y,S),F&&F.m(y,null),d(y,P),L&&L.m(y,null),d(y,D),K&&K.m(y,null),d(y,C),Q&&Q.m(y,null),d(t,w)},p:function(a,t){a.packages&&O!==(O=t.pkg.name+"")&&m(e,O),a.packages&&A!==(A=t.pkgStatus[t.pkg.status].name+"")&&m(o,A),a.packages&&I!==(I=t.pkg.path+"")&&m(_,I),a.packages&&(N=t.pkgStatus[t.pkg.status].actions.includes("start")),N?j?j.p(a,t):((j=B(t)).c(),j.m(y,S)):j&&(j.d(1),j=null),a.packages&&(R=t.pkgStatus[t.pkg.status].actions.includes("stop")),R?F?F.p(a,t):((F=G(t)).c(),F.m(y,P)):F&&(F.d(1),F=null),a.packages&&(V=t.pkgStatus[t.pkg.status].actions.includes("enable")),V?L?L.p(a,t):((L=H(t)).c(),L.m(y,D)):L&&(L.d(1),L=null),a.packages&&(x=t.pkgStatus[t.pkg.status].actions.includes("disable")),x?K?K.p(a,t):((K=U(t)).c(),K.m(y,C)):K&&(K.d(1),K=null),a.packages&&(M=t.pkgStatus[t.pkg.status].actions.includes("delete")),M?Q?Q.p(a,t):((Q=z(t)).c(),Q.m(y,null)):Q&&(Q.d(1),Q=null)},d:function(a){a&&h(t),j&&j.d(),F&&F.d(),L&&L.d(),K&&K.d(),Q&&Q.d()}}}function V(a){for(var t,n,e,c,r,o,s,m,C,O,A,B,G,H,U,z,V,x,M,j,F,L,K,Q,Y,q,J,W,X,Z,$,aa,ta,na,ea,ca,ra,oa,sa,la,ua,ia,pa,ga,ha=null!=a.lastError&&N(a),fa=a.packages,ka=[],da=0;da<fa.length;da+=1)ka[da]=R(I(a,fa,da));return{c:function(){t=v(),n=l("h2"),e=u("3Bot Package Manager"),c=l("br"),r=l("br"),o=v(),s=l("form"),ha&&ha.c(),m=v(),C=l("div"),O=l("div"),A=l("select"),B=l("option"),G=u("path"),H=l("option"),U=u("giturl"),z=v(),V=l("div"),x=l("div"),M=l("input"),j=v(),F=l("div"),L=l("button"),K=u("Add package"),Q=v(),Y=l("table"),q=l("caption"),J=u("Packages"),W=v(),X=l("thead"),Z=l("tr"),$=l("th"),aa=u("Name"),ta=v(),na=l("th"),ea=u("Status"),ca=v(),ra=l("th"),oa=u("Path"),sa=v(),la=l("th"),ua=u("Actions"),ia=v(),pa=l("tbody");for(var a=0;a<ka.length;a+=1)ka[a].c();this.h()},l:function(a){t=b(a),n=i(a,"H2",{});var l=p(n);e=g(l,"3Bot Package Manager"),l.forEach(h),c=i(a,"BR",{}),r=i(a,"BR",{}),o=b(a),s=i(a,"FORM",{});var u=p(s);ha&&ha.l(u),m=b(u),C=i(u,"DIV",{class:!0});var f=p(C);O=i(f,"DIV",{class:!0});var k=p(O);A=i(k,"SELECT",{class:!0,id:!0});var d=p(A);B=i(d,"OPTION",{value:!0,selected:!0});var v=p(B);G=g(v,"path"),v.forEach(h),H=i(d,"OPTION",{value:!0});var E=p(H);U=g(E,"giturl"),E.forEach(h),d.forEach(h),k.forEach(h),z=b(f),V=i(f,"DIV",{class:!0});var _=p(V);x=i(_,"DIV",{class:!0});var T=p(x);M=i(T,"INPUT",{type:!0,class:!0,id:!0}),T.forEach(h),_.forEach(h),j=b(f),F=i(f,"DIV",{class:!0});var y=p(F);L=i(y,"BUTTON",{type:!0,class:!0});var S=p(L);K=g(S,"Add package"),S.forEach(h),y.forEach(h),f.forEach(h),u.forEach(h),Q=b(a),Y=i(a,"TABLE",{class:!0,style:!0});var P=p(Y);q=i(P,"CAPTION",{});var D=p(q);J=g(D,"Packages"),D.forEach(h),W=b(P),X=i(P,"THEAD",{});var w=p(X);Z=i(w,"TR",{});var I=p(Z);$=i(I,"TH",{scope:!0});var N=p($);aa=g(N,"Name"),N.forEach(h),ta=b(I),na=i(I,"TH",{scope:!0});var R=p(na);ea=g(R,"Status"),R.forEach(h),ca=b(I),ra=i(I,"TH",{scope:!0});var ga=p(ra);oa=g(ga,"Path"),ga.forEach(h),sa=b(I),la=i(I,"TH",{scope:!0});var fa=p(la);ua=g(fa,"Actions"),fa.forEach(h),I.forEach(h),w.forEach(h),ia=b(P),pa=i(P,"TBODY",{});for(var da=p(pa),ma=0;ma<ka.length;ma+=1)ka[ma].l(da);da.forEach(h),P.forEach(h),this.h()},h:function(){document.title="3bot Package Manager",B.__value="path",B.value=B.__value,B.selected=!0,H.__value="git_url",H.value=H.__value,f(A,"class","custom-select mr-sm-3"),f(A,"id","inlineFormCustomSelect"),void 0===a.method&&w(function(){return a.select_change_handler.call(A)}),f(O,"class","col-auto"),f(M,"type","text"),f(M,"class","form-control"),f(M,"id","inlineFormInputGroup"),f(x,"class","input-group mb-2"),f(V,"class","col-6"),f(L,"type","button"),f(L,"class","btn btn-primary mb-2"),f(F,"class","col-auto"),f(C,"class","form-row align-items-center"),f($,"scope","col"),f(na,"scope","col"),f(ra,"scope","col"),f(la,"scope","col"),f(Y,"class","table"),_(Y,"margin-top","20px"),ga=[E(A,"change",a.select_change_handler),E(M,"input",a.input_input_handler),E(L,"click",a.click_handler)]},m:function(l,u){k(l,t,u),k(l,n,u),d(n,e),k(l,c,u),k(l,r,u),k(l,o,u),k(l,s,u),ha&&ha.m(s,null),d(s,m),d(s,C),d(C,O),d(O,A),d(A,B),d(B,G),d(A,H),d(H,U),T(A,a.method),d(C,z),d(C,V),d(V,x),d(x,M),y(M,a.newPackagePath),d(C,j),d(C,F),d(F,L),d(L,K),k(l,Q,u),k(l,Y,u),d(Y,q),d(q,J),d(Y,W),d(Y,X),d(X,Z),d(Z,$),d($,aa),d(Z,ta),d(Z,na),d(na,ea),d(Z,ca),d(Z,ra),d(ra,oa),d(Z,sa),d(Z,la),d(la,ua),d(Y,ia),d(Y,pa);for(var i=0;i<ka.length;i+=1)ka[i].m(pa,null)},p:function(a,t){if(null!=t.lastError?ha?ha.p(a,t):((ha=N(t)).c(),ha.m(s,m)):ha&&(ha.d(1),ha=null),a.method&&T(A,t.method),a.newPackagePath&&M.value!==t.newPackagePath&&y(M,t.newPackagePath),a.pkgStatus||a.packages||a.packageDelete||a.packageDisable||a.packageEnable||a.packageStop||a.packageStart){var n;for(fa=t.packages,n=0;n<fa.length;n+=1){var e=I(t,fa,n);ka[n]?ka[n].p(a,e):(ka[n]=R(e),ka[n].c(),ka[n].m(pa,null))}for(;n<ka.length;n+=1)ka[n].d(1);ka.length=fa.length}},i:S,o:S,d:function(a){a&&h(t),a&&h(n),a&&h(c),a&&h(r),a&&h(o),a&&h(s),ha&&ha.d(),a&&h(Q),a&&h(Y),P(ka,a),D(ga)}}}function x(a,t,n){var e="path",c="",r=null,o=[];function s(){packageGedisClient.zerobot.packagemanager.actors.package_manager.packages_list().then(function(a){if(!a.ok){var t=new Error(a);throw n("lastError",r=t),t}a.json().then(function(a){n("packages",o=a.packages),n("lastError",r=null)})})}function l(){var a={};a[e]=c,packageGedisClient.zerobot.packagemanager.actors.package_manager.package_add(a).then(function(a){a.ok?(n("lastError",r=null),s()):n("lastError",r="Couldn't add package "+c)})}function u(a){var t={name:a};packageGedisClient.zerobot.packagemanager.actors.package_manager.package_enable(t).then(function(t){t.ok?(n("lastError",r=null),s()):n("lastError",r="Couldn't enable package "+a)})}function i(a){var t={name:a};packageGedisClient.zerobot.packagemanager.actors.package_manager.spackage_disable(t).then(function(t){t.ok?(n("lastError",r=null),s()):n("lastError",r="Couldn't disable package "+a)})}function p(a){var t={name:a};packageGedisClient.zerobot.packagemanager.actors.package_manager.package_stop(t).then(function(t){t.ok?(n("lastError",r=null),s()):n("lastError",r="Couldn't stop package "+a)})}function g(a){var t={name:a};packageGedisClient.zerobot.packagemanager.actors.package_manager.package_start(t).then(function(t){t.ok?(n("lastError",r=null),s()):n("lastError",r="Couldn't start package "+a)})}function h(a){var t={name:a};packageGedisClient.zerobot.packagemanager.actors.package_manager.package_delete(t).then(function(t){t.ok?(n("lastError",r=null),s()):n("lastError",r="Couldn't delete package "+a)})}C(function(){return O.async(function(a){for(;;)switch(a.prev=a.next){case 0:s();case 1:case"end":return a.stop()}})});return{method:e,newPackagePath:c,lastError:r,packages:o,pkgStatus:{0:{name:"Init",actions:["delete"]},1:{name:"Installed",actions:["delete","start"]},2:{name:"Running",actions:["delete","stop"]},3:{name:"Halted",actions:["delete","start","disable"]},4:{name:"Disabled",actions:["delete","enable"]},5:{name:"Error",actions:["delete"]}},packageAdd:l,packageEnable:u,packageDisable:i,packageStop:p,packageStart:g,packageDelete:h,select_change_handler:function(){e=A(this),n("method",e)},input_input_handler:function(){c=this.value,n("newPackagePath",c)},click_handler:function(){return l()},click_handler_1:function(a){return g(a.pkg.name)},click_handler_2:function(a){return p(a.pkg.name)},click_handler_3:function(a){return u(a.pkg.name)},click_handler_4:function(a){return i(a.pkg.name)},click_handler_5:function(a){return h(a.pkg.name)}}}export default(function(l){function u(a){var o;return t(this,u),o=n(this,e(u).call(this)),c(r(o),a,x,V,s,{}),o}return a(u,o),u}());
