import{_ as a,a as t,b as n,c as e,i as c,d as r,S as l,s as o,e as s,t as u,f as i,g as p,h,j as f,k as g,m as d,o as k,C as m,r as v,v as E,M as b,N as _,O as T,P as y,n as S,Q as C,R as P,T as D,U as w,K as O,V as A}from"./index.3a9aa9d7.js";function I(a,t,n){var e=Object.create(a);return e.pkg=t[n],e}function N(a){var t,n;return{c:function(){t=s("div"),n=u(a.lastError),this.h()},l:function(e){t=i(e,"DIV",{class:!0,role:!0});var c=p(t);n=h(c,a.lastError),c.forEach(f),this.h()},h:function(){g(t,"class","alert alert-danger"),g(t,"role","alert")},m:function(a,e){d(a,t,e),k(t,n)},p:function(a,t){a.lastError&&m(n,t.lastError)},d:function(a){a&&f(t)}}}function x(a){var t,n,e;function c(){for(var t,n=arguments.length,e=new Array(n),c=0;c<n;c++)e[c]=arguments[c];return(t=a).click_handler_1.apply(t,[a].concat(e))}return{c:function(){t=s("button"),n=u("Start"),this.h()},l:function(a){t=i(a,"BUTTON",{type:!0,class:!0});var e=p(t);n=h(e,"Start"),e.forEach(f),this.h()},h:function(){g(t,"type","button"),g(t,"class","btn btn-success btn-sm"),e=b(t,"click",c)},m:function(a,e){d(a,t,e),k(t,n)},p:function(t,n){a=n},d:function(a){a&&f(t),e()}}}function B(a){var t,n,e;function c(){for(var t,n=arguments.length,e=new Array(n),c=0;c<n;c++)e[c]=arguments[c];return(t=a).click_handler_2.apply(t,[a].concat(e))}return{c:function(){t=s("button"),n=u("Stop"),this.h()},l:function(a){t=i(a,"BUTTON",{type:!0,class:!0});var e=p(t);n=h(e,"Stop"),e.forEach(f),this.h()},h:function(){g(t,"type","button"),g(t,"class","btn btn-danger btn-sm"),e=b(t,"click",c)},m:function(a,e){d(a,t,e),k(t,n)},p:function(t,n){a=n},d:function(a){a&&f(t),e()}}}function G(a){var t,n,e;function c(){for(var t,n=arguments.length,e=new Array(n),c=0;c<n;c++)e[c]=arguments[c];return(t=a).click_handler_3.apply(t,[a].concat(e))}return{c:function(){t=s("button"),n=u("Enable"),this.h()},l:function(a){t=i(a,"BUTTON",{type:!0,class:!0});var e=p(t);n=h(e,"Enable"),e.forEach(f),this.h()},h:function(){g(t,"type","button"),g(t,"class","btn btn-primary btn-sm"),e=b(t,"click",c)},m:function(a,e){d(a,t,e),k(t,n)},p:function(t,n){a=n},d:function(a){a&&f(t),e()}}}function H(a){var t,n,e;function c(){for(var t,n=arguments.length,e=new Array(n),c=0;c<n;c++)e[c]=arguments[c];return(t=a).click_handler_4.apply(t,[a].concat(e))}return{c:function(){t=s("button"),n=u("Disable"),this.h()},l:function(a){t=i(a,"BUTTON",{type:!0,class:!0});var e=p(t);n=h(e,"Disable"),e.forEach(f),this.h()},h:function(){g(t,"type","button"),g(t,"class","btn btn-light btn-sm"),e=b(t,"click",c)},m:function(a,e){d(a,t,e),k(t,n)},p:function(t,n){a=n},d:function(a){a&&f(t),e()}}}function U(a){var t,n,e;function c(){for(var t,n=arguments.length,e=new Array(n),c=0;c<n;c++)e[c]=arguments[c];return(t=a).click_handler_5.apply(t,[a].concat(e))}return{c:function(){t=s("button"),n=u("Delete"),this.h()},l:function(a){t=i(a,"BUTTON",{type:!0,class:!0});var e=p(t);n=h(e,"Delete"),e.forEach(f),this.h()},h:function(){g(t,"type","button"),g(t,"class","btn btn-dark btn-sm"),e=b(t,"click",c)},m:function(a,e){d(a,t,e),k(t,n)},p:function(t,n){a=n},d:function(a){a&&f(t),e()}}}function R(a){var t,n,e,c,r,l,o,b,_,T,y,S,C,P,D,w,O=a.pkg.name+"",A=a.pkgStatus[a.pkg.status].name+"",I=a.pkg.path+"",N=a.pkgStatus[a.pkg.status].actions.includes("start"),R=a.pkgStatus[a.pkg.status].actions.includes("stop"),V=a.pkgStatus[a.pkg.status].actions.includes("enable"),M=a.pkgStatus[a.pkg.status].actions.includes("disable"),j=a.pkgStatus[a.pkg.status].actions.includes("delete"),F=N&&x(a),L=R&&B(a),K=V&&G(a),Q=M&&H(a),Y=j&&U(a);return{c:function(){t=s("tr"),n=s("th"),e=u(O),c=v(),r=s("td"),l=u(A),o=v(),b=s("td"),_=u(I),T=v(),y=s("td"),F&&F.c(),S=v(),L&&L.c(),C=v(),K&&K.c(),P=v(),Q&&Q.c(),D=v(),Y&&Y.c(),w=v(),this.h()},l:function(a){t=i(a,"TR",{});var s=p(t);n=i(s,"TH",{scope:!0});var u=p(n);e=h(u,O),u.forEach(f),c=E(s),r=i(s,"TD",{});var g=p(r);l=h(g,A),g.forEach(f),o=E(s),b=i(s,"TD",{});var d=p(b);_=h(d,I),d.forEach(f),T=E(s),y=i(s,"TD",{});var k=p(y);F&&F.l(k),S=E(k),L&&L.l(k),C=E(k),K&&K.l(k),P=E(k),Q&&Q.l(k),D=E(k),Y&&Y.l(k),k.forEach(f),w=E(s),s.forEach(f),this.h()},h:function(){g(n,"scope","row")},m:function(a,s){d(a,t,s),k(t,n),k(n,e),k(t,c),k(t,r),k(r,l),k(t,o),k(t,b),k(b,_),k(t,T),k(t,y),F&&F.m(y,null),k(y,S),L&&L.m(y,null),k(y,C),K&&K.m(y,null),k(y,P),Q&&Q.m(y,null),k(y,D),Y&&Y.m(y,null),k(t,w)},p:function(a,t){a.packages&&O!==(O=t.pkg.name+"")&&m(e,O),a.packages&&A!==(A=t.pkgStatus[t.pkg.status].name+"")&&m(l,A),a.packages&&I!==(I=t.pkg.path+"")&&m(_,I),a.packages&&(N=t.pkgStatus[t.pkg.status].actions.includes("start")),N?F?F.p(a,t):((F=x(t)).c(),F.m(y,S)):F&&(F.d(1),F=null),a.packages&&(R=t.pkgStatus[t.pkg.status].actions.includes("stop")),R?L?L.p(a,t):((L=B(t)).c(),L.m(y,C)):L&&(L.d(1),L=null),a.packages&&(V=t.pkgStatus[t.pkg.status].actions.includes("enable")),V?K?K.p(a,t):((K=G(t)).c(),K.m(y,P)):K&&(K.d(1),K=null),a.packages&&(M=t.pkgStatus[t.pkg.status].actions.includes("disable")),M?Q?Q.p(a,t):((Q=H(t)).c(),Q.m(y,D)):Q&&(Q.d(1),Q=null),a.packages&&(j=t.pkgStatus[t.pkg.status].actions.includes("delete")),j?Y?Y.p(a,t):((Y=U(t)).c(),Y.m(y,null)):Y&&(Y.d(1),Y=null)},d:function(a){a&&f(t),F&&F.d(),L&&L.d(),K&&K.d(),Q&&Q.d(),Y&&Y.d()}}}function V(a){for(var t,n,e,c,r,l,o,m,D,O,A,x,B,G,H,U,V,M,j,F,L,K,Q,Y,q,z,J,W,X,Z,$,aa,ta,na,ea,ca,ra,la,oa,sa,ua,ia,pa,ha,fa=null!=a.lastError&&N(a),ga=a.packages,da=[],ka=0;ka<ga.length;ka+=1)da[ka]=R(I(a,ga,ka));return{c:function(){t=v(),n=s("h2"),e=u("3Bot Package Manager"),c=s("br"),r=s("br"),l=v(),o=s("form"),fa&&fa.c(),m=v(),D=s("div"),O=s("div"),A=s("select"),x=s("option"),B=u("path"),G=s("option"),H=u("giturl"),U=v(),V=s("div"),M=s("div"),j=s("input"),F=v(),L=s("div"),K=s("button"),Q=u("Add package"),Y=v(),q=s("table"),z=s("caption"),J=u("Packages"),W=v(),X=s("thead"),Z=s("tr"),$=s("th"),aa=u("Name"),ta=v(),na=s("th"),ea=u("Status"),ca=v(),ra=s("th"),la=u("Path"),oa=v(),sa=s("th"),ua=u("Actions"),ia=v(),pa=s("tbody");for(var a=0;a<da.length;a+=1)da[a].c();this.h()},l:function(a){t=E(a),n=i(a,"H2",{});var s=p(n);e=h(s,"3Bot Package Manager"),s.forEach(f),c=i(a,"BR",{}),r=i(a,"BR",{}),l=E(a),o=i(a,"FORM",{});var u=p(o);fa&&fa.l(u),m=E(u),D=i(u,"DIV",{class:!0});var g=p(D);O=i(g,"DIV",{class:!0});var d=p(O);A=i(d,"SELECT",{class:!0,id:!0});var k=p(A);x=i(k,"OPTION",{value:!0,selected:!0});var v=p(x);B=h(v,"path"),v.forEach(f),G=i(k,"OPTION",{value:!0});var b=p(G);H=h(b,"giturl"),b.forEach(f),k.forEach(f),d.forEach(f),U=E(g),V=i(g,"DIV",{class:!0});var _=p(V);M=i(_,"DIV",{class:!0});var T=p(M);j=i(T,"INPUT",{type:!0,class:!0,id:!0}),T.forEach(f),_.forEach(f),F=E(g),L=i(g,"DIV",{class:!0});var y=p(L);K=i(y,"BUTTON",{type:!0,class:!0});var S=p(K);Q=h(S,"Add package"),S.forEach(f),y.forEach(f),g.forEach(f),u.forEach(f),Y=E(a),q=i(a,"TABLE",{class:!0,style:!0});var C=p(q);z=i(C,"CAPTION",{});var P=p(z);J=h(P,"Packages"),P.forEach(f),W=E(C),X=i(C,"THEAD",{});var w=p(X);Z=i(w,"TR",{});var I=p(Z);$=i(I,"TH",{scope:!0});var N=p($);aa=h(N,"Name"),N.forEach(f),ta=E(I),na=i(I,"TH",{scope:!0});var R=p(na);ea=h(R,"Status"),R.forEach(f),ca=E(I),ra=i(I,"TH",{scope:!0});var ha=p(ra);la=h(ha,"Path"),ha.forEach(f),oa=E(I),sa=i(I,"TH",{scope:!0});var ga=p(sa);ua=h(ga,"Actions"),ga.forEach(f),I.forEach(f),w.forEach(f),ia=E(C),pa=i(C,"TBODY",{});for(var ka=p(pa),ma=0;ma<da.length;ma+=1)da[ma].l(ka);ka.forEach(f),C.forEach(f),this.h()},h:function(){document.title="3bot Package Manager",x.__value="path",x.value=x.__value,x.selected=!0,G.__value="git_url",G.value=G.__value,g(A,"class","custom-select mr-sm-3"),g(A,"id","inlineFormCustomSelect"),void 0===a.method&&w(function(){return a.select_change_handler.call(A)}),g(O,"class","col-auto"),g(j,"type","text"),g(j,"class","form-control"),g(j,"id","inlineFormInputGroup"),g(M,"class","input-group mb-2"),g(V,"class","col-6"),g(K,"type","button"),g(K,"class","btn btn-primary mb-2"),g(L,"class","col-auto"),g(D,"class","form-row align-items-center"),g($,"scope","col"),g(na,"scope","col"),g(ra,"scope","col"),g(sa,"scope","col"),g(q,"class","table"),_(q,"margin-top","20px"),ha=[b(A,"change",a.select_change_handler),b(j,"input",a.input_input_handler),b(K,"click",a.click_handler)]},m:function(s,u){d(s,t,u),d(s,n,u),k(n,e),d(s,c,u),d(s,r,u),d(s,l,u),d(s,o,u),fa&&fa.m(o,null),k(o,m),k(o,D),k(D,O),k(O,A),k(A,x),k(x,B),k(A,G),k(G,H),T(A,a.method),k(D,U),k(D,V),k(V,M),k(M,j),y(j,a.newPackagePath),k(D,F),k(D,L),k(L,K),k(K,Q),d(s,Y,u),d(s,q,u),k(q,z),k(z,J),k(q,W),k(q,X),k(X,Z),k(Z,$),k($,aa),k(Z,ta),k(Z,na),k(na,ea),k(Z,ca),k(Z,ra),k(ra,la),k(Z,oa),k(Z,sa),k(sa,ua),k(q,ia),k(q,pa);for(var i=0;i<da.length;i+=1)da[i].m(pa,null)},p:function(a,t){if(null!=t.lastError?fa?fa.p(a,t):((fa=N(t)).c(),fa.m(o,m)):fa&&(fa.d(1),fa=null),a.method&&T(A,t.method),a.newPackagePath&&j.value!==t.newPackagePath&&y(j,t.newPackagePath),a.pkgStatus||a.packages||a.packageDelete||a.packageDisable||a.packageEnable||a.packageStop||a.packageStart){var n;for(ga=t.packages,n=0;n<ga.length;n+=1){var e=I(t,ga,n);da[n]?da[n].p(a,e):(da[n]=R(e),da[n].c(),da[n].m(pa,null))}for(;n<da.length;n+=1)da[n].d(1);da.length=ga.length}},i:S,o:S,d:function(a){a&&f(t),a&&f(n),a&&f(c),a&&f(r),a&&f(l),a&&f(o),fa&&fa.d(),a&&f(Y),a&&f(q),C(da,a),P(ha)}}}function M(a,t,n){var e="path",c="",r=null,l=[];function o(){localGedisClient.executeCommand("package_manager","packages_list").then(function(a){if(!a.ok){var t=new Error(a);throw n("lastError",r=t),t}a.json().then(function(a){n("packages",l=a.packages),n("lastError",r=null)})})}function s(){var a={};a[e]=c,localGedisClient.executeCommand("package_manager","package_add",a).then(function(a){a.ok?(n("lastError",r=null),o()):n("lastError",r="Couldn't add package "+c)})}function u(a){var t={name:a};localGedisClient.executeCommand("package_manager","package_enable",t).then(function(t){t.ok?(n("lastError",r=null),o()):n("lastError",r="Couldn't enable package "+a)})}function i(a){var t={name:a};localGedisClient.executeCommand("package_manager","package_disable",t).then(function(t){t.ok?(n("lastError",r=null),o()):n("lastError",r="Couldn't disable package "+a)})}function p(a){var t={name:a};localGedisClient.executeCommand("package_manager","package_stop",t).then(function(t){t.ok?(n("lastError",r=null),o()):n("lastError",r="Couldn't stop package "+a)})}function h(a){var t={name:a};localGedisClient.executeCommand("package_manager","package_start",t).then(function(t){t.ok?(n("lastError",r=null),o()):n("lastError",r="Couldn't start package "+a)})}function f(a){var t={name:a};localGedisClient.executeCommand("package_manager","package_delete",t).then(function(t){t.ok?(n("lastError",r=null),o()):n("lastError",r="Couldn't delete package "+a)})}D(function(){return O.async(function(a){for(;;)switch(a.prev=a.next){case 0:o();case 1:case"end":return a.stop()}})});return{method:e,newPackagePath:c,lastError:r,packages:l,pkgStatus:{0:{name:"Init",actions:["delete"]},1:{name:"Installed",actions:["delete","start"]},2:{name:"Running",actions:["delete","stop"]},3:{name:"Halted",actions:["delete","start","disable"]},4:{name:"Disabled",actions:["delete","enable"]},5:{name:"Error",actions:["delete"]}},packageAdd:s,packageEnable:u,packageDisable:i,packageStop:p,packageStart:h,packageDelete:f,select_change_handler:function(){e=A(this),n("method",e)},input_input_handler:function(){c=this.value,n("newPackagePath",c)},click_handler:function(){return s()},click_handler_1:function(a){return h(a.pkg.name)},click_handler_2:function(a){return p(a.pkg.name)},click_handler_3:function(a){return u(a.pkg.name)},click_handler_4:function(a){return i(a.pkg.name)},click_handler_5:function(a){return f(a.pkg.name)}}}export default(function(s){function u(a){var l;return t(this,u),l=n(this,e(u).call(this)),c(r(l),a,M,V,o,{}),l}return a(u,l),u}());
