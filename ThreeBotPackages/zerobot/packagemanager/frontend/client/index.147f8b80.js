import{S as a,i as t,s as e,e as c,t as s,c as l,a as n,b as r,d as o,f as p,h as i,j as u,y as g,m as h,p as k,G as d,H as m,I as f,J as b,n as E,K as _,L as v,M as T,N as S,O as P}from"./index.4ed08320.js";function y(a,t,e){const c=Object.create(a);return c.pkg=t[e],c}function D(a){let t,e;return{c(){t=c("div"),e=s(a.lastError),this.h()},l(c){t=l(c,"DIV",{class:!0,role:!0});var s=n(t);e=r(s,a.lastError),s.forEach(o),this.h()},h(){p(t,"class","alert alert-danger"),p(t,"role","alert")},m(a,c){i(a,t,c),u(t,e)},p(a,t){a.lastError&&g(e,t.lastError)},d(a){a&&o(t)}}}function C(a){let t,e,g;function h(...t){return a.click_handler_1(a,...t)}return{c(){t=c("button"),e=s("Start"),this.h()},l(a){t=l(a,"BUTTON",{type:!0,class:!0});var c=n(t);e=r(c,"Start"),c.forEach(o),this.h()},h(){p(t,"type","button"),p(t,"class","btn btn-success btn-sm"),g=d(t,"click",h)},m(a,c){i(a,t,c),u(t,e)},p(t,e){a=e},d(a){a&&o(t),g()}}}function O(a){let t,e,g;function h(...t){return a.click_handler_2(a,...t)}return{c(){t=c("button"),e=s("Stop"),this.h()},l(a){t=l(a,"BUTTON",{type:!0,class:!0});var c=n(t);e=r(c,"Stop"),c.forEach(o),this.h()},h(){p(t,"type","button"),p(t,"class","btn btn-danger btn-sm"),g=d(t,"click",h)},m(a,c){i(a,t,c),u(t,e)},p(t,e){a=e},d(a){a&&o(t),g()}}}function I(a){let t,e,g;function h(...t){return a.click_handler_3(a,...t)}return{c(){t=c("button"),e=s("Enable"),this.h()},l(a){t=l(a,"BUTTON",{type:!0,class:!0});var c=n(t);e=r(c,"Enable"),c.forEach(o),this.h()},h(){p(t,"type","button"),p(t,"class","btn btn-primary btn-sm"),g=d(t,"click",h)},m(a,c){i(a,t,c),u(t,e)},p(t,e){a=e},d(a){a&&o(t),g()}}}function N(a){let t,e,g;function h(...t){return a.click_handler_4(a,...t)}return{c(){t=c("button"),e=s("Disable"),this.h()},l(a){t=l(a,"BUTTON",{type:!0,class:!0});var c=n(t);e=r(c,"Disable"),c.forEach(o),this.h()},h(){p(t,"type","button"),p(t,"class","btn btn-light btn-sm"),g=d(t,"click",h)},m(a,c){i(a,t,c),u(t,e)},p(t,e){a=e},d(a){a&&o(t),g()}}}function B(a){let t,e,g;function h(...t){return a.click_handler_5(a,...t)}return{c(){t=c("button"),e=s("Delete"),this.h()},l(a){t=l(a,"BUTTON",{type:!0,class:!0});var c=n(t);e=r(c,"Delete"),c.forEach(o),this.h()},h(){p(t,"type","button"),p(t,"class","btn btn-dark btn-sm"),g=d(t,"click",h)},m(a,c){i(a,t,c),u(t,e)},p(t,e){a=e},d(a){a&&o(t),g()}}}function w(a){let t,e,d,m,f,b,E,_,v,T,S,P,y,D,w,G,H=a.pkg.name+"",A=a.pkgStatus[a.pkg.status].name+"",z=a.pkg.path+"",U=a.pkgStatus[a.pkg.status].actions.includes("start"),R=a.pkgStatus[a.pkg.status].actions.includes("stop"),V=a.pkgStatus[a.pkg.status].actions.includes("enable"),x=a.pkgStatus[a.pkg.status].actions.includes("disable"),M=a.pkgStatus[a.pkg.status].actions.includes("delete"),j=U&&C(a),F=R&&O(a),L=V&&I(a),J=x&&N(a),K=M&&B(a);return{c(){t=c("tr"),e=c("th"),d=s(H),m=h(),f=c("td"),b=s(A),E=h(),_=c("td"),v=s(z),T=h(),S=c("td"),j&&j.c(),P=h(),F&&F.c(),y=h(),L&&L.c(),D=h(),J&&J.c(),w=h(),K&&K.c(),G=h(),this.h()},l(a){t=l(a,"TR",{});var c=n(t);e=l(c,"TH",{scope:!0});var s=n(e);d=r(s,H),s.forEach(o),m=k(c),f=l(c,"TD",{});var p=n(f);b=r(p,A),p.forEach(o),E=k(c),_=l(c,"TD",{});var i=n(_);v=r(i,z),i.forEach(o),T=k(c),S=l(c,"TD",{});var u=n(S);j&&j.l(u),P=k(u),F&&F.l(u),y=k(u),L&&L.l(u),D=k(u),J&&J.l(u),w=k(u),K&&K.l(u),u.forEach(o),G=k(c),c.forEach(o),this.h()},h(){p(e,"scope","row")},m(a,c){i(a,t,c),u(t,e),u(e,d),u(t,m),u(t,f),u(f,b),u(t,E),u(t,_),u(_,v),u(t,T),u(t,S),j&&j.m(S,null),u(S,P),F&&F.m(S,null),u(S,y),L&&L.m(S,null),u(S,D),J&&J.m(S,null),u(S,w),K&&K.m(S,null),u(t,G)},p(a,t){a.packages&&H!==(H=t.pkg.name+"")&&g(d,H),a.packages&&A!==(A=t.pkgStatus[t.pkg.status].name+"")&&g(b,A),a.packages&&z!==(z=t.pkg.path+"")&&g(v,z),a.packages&&(U=t.pkgStatus[t.pkg.status].actions.includes("start")),U?j?j.p(a,t):((j=C(t)).c(),j.m(S,P)):j&&(j.d(1),j=null),a.packages&&(R=t.pkgStatus[t.pkg.status].actions.includes("stop")),R?F?F.p(a,t):((F=O(t)).c(),F.m(S,y)):F&&(F.d(1),F=null),a.packages&&(V=t.pkgStatus[t.pkg.status].actions.includes("enable")),V?L?L.p(a,t):((L=I(t)).c(),L.m(S,D)):L&&(L.d(1),L=null),a.packages&&(x=t.pkgStatus[t.pkg.status].actions.includes("disable")),x?J?J.p(a,t):((J=N(t)).c(),J.m(S,w)):J&&(J.d(1),J=null),a.packages&&(M=t.pkgStatus[t.pkg.status].actions.includes("delete")),M?K?K.p(a,t):((K=B(t)).c(),K.m(S,null)):K&&(K.d(1),K=null)},d(a){a&&o(t),j&&j.d(),F&&F.d(),L&&L.d(),J&&J.d(),K&&K.d()}}}function G(a){let t,e,g,T,P,C,O,I,N,B,G,H,A,z,U,R,V,x,M,j,F,L,J,K,Y,q,Q,W,X,Z,$,aa,ta,ea,ca,sa,la,na,ra,oa,pa,ia,ua,ga,ha=null!=a.lastError&&D(a),ka=a.packages,da=[];for(let t=0;t<ka.length;t+=1)da[t]=w(y(a,ka,t));return{c(){t=h(),e=c("h2"),g=s("3Bot Package Manager"),T=c("br"),P=c("br"),C=h(),O=c("form"),ha&&ha.c(),I=h(),N=c("div"),B=c("div"),G=c("select"),H=c("option"),A=s("path"),z=c("option"),U=s("giturl"),R=h(),V=c("div"),x=c("div"),M=c("input"),j=h(),F=c("div"),L=c("button"),J=s("Add package"),K=h(),Y=c("table"),q=c("caption"),Q=s("Packages"),W=h(),X=c("thead"),Z=c("tr"),$=c("th"),aa=s("Name"),ta=h(),ea=c("th"),ca=s("Status"),sa=h(),la=c("th"),na=s("Path"),ra=h(),oa=c("th"),pa=s("Actions"),ia=h(),ua=c("tbody");for(let a=0;a<da.length;a+=1)da[a].c();this.h()},l(a){t=k(a),e=l(a,"H2",{});var c=n(e);g=r(c,"3Bot Package Manager"),c.forEach(o),T=l(a,"BR",{}),P=l(a,"BR",{}),C=k(a),O=l(a,"FORM",{});var s=n(O);ha&&ha.l(s),I=k(s),N=l(s,"DIV",{class:!0});var p=n(N);B=l(p,"DIV",{class:!0});var i=n(B);G=l(i,"SELECT",{class:!0,id:!0});var u=n(G);H=l(u,"OPTION",{value:!0,selected:!0});var h=n(H);A=r(h,"path"),h.forEach(o),z=l(u,"OPTION",{value:!0});var d=n(z);U=r(d,"giturl"),d.forEach(o),u.forEach(o),i.forEach(o),R=k(p),V=l(p,"DIV",{class:!0});var m=n(V);x=l(m,"DIV",{class:!0});var f=n(x);M=l(f,"INPUT",{type:!0,class:!0,id:!0}),f.forEach(o),m.forEach(o),j=k(p),F=l(p,"DIV",{class:!0});var b=n(F);L=l(b,"BUTTON",{type:!0,class:!0});var E=n(L);J=r(E,"Add package"),E.forEach(o),b.forEach(o),p.forEach(o),s.forEach(o),K=k(a),Y=l(a,"TABLE",{class:!0,style:!0});var _=n(Y);q=l(_,"CAPTION",{});var v=n(q);Q=r(v,"Packages"),v.forEach(o),W=k(_),X=l(_,"THEAD",{});var S=n(X);Z=l(S,"TR",{});var y=n(Z);$=l(y,"TH",{scope:!0});var D=n($);aa=r(D,"Name"),D.forEach(o),ta=k(y),ea=l(y,"TH",{scope:!0});var w=n(ea);ca=r(w,"Status"),w.forEach(o),sa=k(y),la=l(y,"TH",{scope:!0});var ga=n(la);na=r(ga,"Path"),ga.forEach(o),ra=k(y),oa=l(y,"TH",{scope:!0});var ka=n(oa);pa=r(ka,"Actions"),ka.forEach(o),y.forEach(o),S.forEach(o),ia=k(_),ua=l(_,"TBODY",{});var ma=n(ua);for(let a=0;a<da.length;a+=1)da[a].l(ma);ma.forEach(o),_.forEach(o),this.h()},h(){document.title="3bot Package Manager",H.__value="path",H.value=H.__value,H.selected=!0,z.__value="git_url",z.value=z.__value,p(G,"class","custom-select mr-sm-3"),p(G,"id","inlineFormCustomSelect"),void 0===a.method&&S(()=>a.select_change_handler.call(G)),p(B,"class","col-auto"),p(M,"type","text"),p(M,"class","form-control"),p(M,"id","inlineFormInputGroup"),p(x,"class","input-group mb-2"),p(V,"class","col-6"),p(L,"type","button"),p(L,"class","btn btn-primary mb-2"),p(F,"class","col-auto"),p(N,"class","form-row align-items-center"),p($,"scope","col"),p(ea,"scope","col"),p(la,"scope","col"),p(oa,"scope","col"),p(Y,"class","table"),m(Y,"margin-top","20px"),ga=[d(G,"change",a.select_change_handler),d(M,"input",a.input_input_handler),d(L,"click",a.click_handler)]},m(c,s){i(c,t,s),i(c,e,s),u(e,g),i(c,T,s),i(c,P,s),i(c,C,s),i(c,O,s),ha&&ha.m(O,null),u(O,I),u(O,N),u(N,B),u(B,G),u(G,H),u(H,A),u(G,z),u(z,U),f(G,a.method),u(N,R),u(N,V),u(V,x),u(x,M),b(M,a.newPackagePath),u(N,j),u(N,F),u(F,L),u(L,J),i(c,K,s),i(c,Y,s),u(Y,q),u(q,Q),u(Y,W),u(Y,X),u(X,Z),u(Z,$),u($,aa),u(Z,ta),u(Z,ea),u(ea,ca),u(Z,sa),u(Z,la),u(la,na),u(Z,ra),u(Z,oa),u(oa,pa),u(Y,ia),u(Y,ua);for(let a=0;a<da.length;a+=1)da[a].m(ua,null)},p(a,t){if(null!=t.lastError?ha?ha.p(a,t):((ha=D(t)).c(),ha.m(O,I)):ha&&(ha.d(1),ha=null),a.method&&f(G,t.method),a.newPackagePath&&M.value!==t.newPackagePath&&b(M,t.newPackagePath),a.pkgStatus||a.packages||a.packageDelete||a.packageDisable||a.packageEnable||a.packageStop||a.packageStart){let e;for(ka=t.packages,e=0;e<ka.length;e+=1){const c=y(t,ka,e);da[e]?da[e].p(a,c):(da[e]=w(c),da[e].c(),da[e].m(ua,null))}for(;e<da.length;e+=1)da[e].d(1);da.length=ka.length}},i:E,o:E,d(a){a&&o(t),a&&o(e),a&&o(T),a&&o(P),a&&o(C),a&&o(O),ha&&ha.d(),a&&o(K),a&&o(Y),_(da,a),v(ga)}}}function H(a,t,e){let c="path",s="",l=null,n=[];function r(){packageGedisClient.zerobot.packagemanager.actors.package_manager.packages_list().then(a=>{if(!a.ok){let t=new Error(a);throw e("lastError",l=t),t}a.json().then(a=>{e("packages",n=a.packages),e("lastError",l=null)})})}function o(){let a={};a[c]=s,packageGedisClient.zerobot.packagemanager.actors.package_manager.package_add(a).then(a=>{a.ok?(e("lastError",l=null),r()):e("lastError",l="Couldn't add package "+s)})}function p(a){let t={name:a};packageGedisClient.zerobot.packagemanager.actors.package_manager.package_enable(t).then(t=>{t.ok?(e("lastError",l=null),r()):e("lastError",l="Couldn't enable package "+a)})}function i(a){let t={name:a};packageGedisClient.zerobot.packagemanager.actors.package_manager.spackage_disable(t).then(t=>{t.ok?(e("lastError",l=null),r()):e("lastError",l="Couldn't disable package "+a)})}function u(a){let t={name:a};packageGedisClient.zerobot.packagemanager.actors.package_manager.package_stop(t).then(t=>{t.ok?(e("lastError",l=null),r()):e("lastError",l="Couldn't stop package "+a)})}function g(a){let t={name:a};packageGedisClient.zerobot.packagemanager.actors.package_manager.package_start(t).then(t=>{t.ok?(e("lastError",l=null),r()):e("lastError",l="Couldn't start package "+a)})}function h(a){let t={name:a};packageGedisClient.zerobot.packagemanager.actors.package_manager.package_delete(t).then(t=>{t.ok?(e("lastError",l=null),r()):e("lastError",l="Couldn't delete package "+a)})}T(async()=>{r()});return{method:c,newPackagePath:s,lastError:l,packages:n,pkgStatus:{0:{name:"Init",actions:["delete"]},1:{name:"Installed",actions:["delete","start"]},2:{name:"Running",actions:["delete","stop"]},3:{name:"Halted",actions:["delete","start","disable"]},4:{name:"Disabled",actions:["delete","enable"]},5:{name:"Error",actions:["delete"]}},packageAdd:o,packageEnable:p,packageDisable:i,packageStop:u,packageStart:g,packageDelete:h,select_change_handler:function(){c=P(this),e("method",c)},input_input_handler:function(){s=this.value,e("newPackagePath",s)},click_handler:()=>o(),click_handler_1:({pkg:a})=>g(a.name),click_handler_2:({pkg:a})=>u(a.name),click_handler_3:({pkg:a})=>p(a.name),click_handler_4:({pkg:a})=>i(a.name),click_handler_5:({pkg:a})=>h(a.name)}}export default class extends a{constructor(a){super(),t(this,a,H,G,e,{})}}
