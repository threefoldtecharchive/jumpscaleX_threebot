import{_ as a,a as t,b as n,c as e,i as c,d as r,S as o,s,e as l,t as u,f as i,g as p,h,j as f,k as g,m as d,o as k,C as m,r as v,v as E,M as b,N as _,O as T,P as y,n as S,Q as P,R as D,T as w,U as C,K as O,V as A}from"./index.3a9aa9d7.js";function I(a,t,n){var e=Object.create(a);return e.pkg=t[n],e}function N(a){var t,n;return{c:function(){t=l("div"),n=u(a.lastError),this.h()},l:function(e){t=i(e,"DIV",{class:!0,role:!0});var c=p(t);n=h(c,a.lastError),c.forEach(f),this.h()},h:function(){g(t,"class","alert alert-danger"),g(t,"role","alert")},m:function(a,e){d(a,t,e),k(t,n)},p:function(a,t){a.lastError&&m(n,t.lastError)},d:function(a){a&&f(t)}}}function x(a){var t,n,e;function c(){for(var t,n=arguments.length,e=new Array(n),c=0;c<n;c++)e[c]=arguments[c];return(t=a).click_handler_1.apply(t,[a].concat(e))}return{c:function(){t=l("button"),n=u("Start"),this.h()},l:function(a){t=i(a,"BUTTON",{type:!0,class:!0});var e=p(t);n=h(e,"Start"),e.forEach(f),this.h()},h:function(){g(t,"type","button"),g(t,"class","btn btn-success btn-sm"),e=b(t,"click",c)},m:function(a,e){d(a,t,e),k(t,n)},p:function(t,n){a=n},d:function(a){a&&f(t),e()}}}function B(a){var t,n,e;function c(){for(var t,n=arguments.length,e=new Array(n),c=0;c<n;c++)e[c]=arguments[c];return(t=a).click_handler_2.apply(t,[a].concat(e))}return{c:function(){t=l("button"),n=u("Stop"),this.h()},l:function(a){t=i(a,"BUTTON",{type:!0,class:!0});var e=p(t);n=h(e,"Stop"),e.forEach(f),this.h()},h:function(){g(t,"type","button"),g(t,"class","btn btn-danger btn-sm"),e=b(t,"click",c)},m:function(a,e){d(a,t,e),k(t,n)},p:function(t,n){a=n},d:function(a){a&&f(t),e()}}}function H(a){var t,n,e;function c(){for(var t,n=arguments.length,e=new Array(n),c=0;c<n;c++)e[c]=arguments[c];return(t=a).click_handler_3.apply(t,[a].concat(e))}return{c:function(){t=l("button"),n=u("Enable"),this.h()},l:function(a){t=i(a,"BUTTON",{type:!0,class:!0});var e=p(t);n=h(e,"Enable"),e.forEach(f),this.h()},h:function(){g(t,"type","button"),g(t,"class","btn btn-primary btn-sm"),e=b(t,"click",c)},m:function(a,e){d(a,t,e),k(t,n)},p:function(t,n){a=n},d:function(a){a&&f(t),e()}}}function U(a){var t,n,e;function c(){for(var t,n=arguments.length,e=new Array(n),c=0;c<n;c++)e[c]=arguments[c];return(t=a).click_handler_4.apply(t,[a].concat(e))}return{c:function(){t=l("button"),n=u("Disable"),this.h()},l:function(a){t=i(a,"BUTTON",{type:!0,class:!0});var e=p(t);n=h(e,"Disable"),e.forEach(f),this.h()},h:function(){g(t,"type","button"),g(t,"class","btn btn-light btn-sm"),e=b(t,"click",c)},m:function(a,e){d(a,t,e),k(t,n)},p:function(t,n){a=n},d:function(a){a&&f(t),e()}}}function R(a){var t,n,e;function c(){for(var t,n=arguments.length,e=new Array(n),c=0;c<n;c++)e[c]=arguments[c];return(t=a).click_handler_5.apply(t,[a].concat(e))}return{c:function(){t=l("button"),n=u("Delete"),this.h()},l:function(a){t=i(a,"BUTTON",{type:!0,class:!0});var e=p(t);n=h(e,"Delete"),e.forEach(f),this.h()},h:function(){g(t,"type","button"),g(t,"class","btn btn-dark btn-sm"),e=b(t,"click",c)},m:function(a,e){d(a,t,e),k(t,n)},p:function(t,n){a=n},d:function(a){a&&f(t),e()}}}function V(a){var t,n,e,c,r,o,s,b,_,T,y,S,P,D,w,C,O=a.pkg.name+"",A=a.pkgStatus[a.pkg.status].name+"",I=a.pkg.path+"",N=a.pkgStatus[a.pkg.status].actions.includes("start"),V=a.pkgStatus[a.pkg.status].actions.includes("stop"),j=a.pkgStatus[a.pkg.status].actions.includes("enable"),M=a.pkgStatus[a.pkg.status].actions.includes("disable"),F=a.pkgStatus[a.pkg.status].actions.includes("delete"),G=N&&x(a),L=V&&B(a),K=j&&H(a),Q=M&&U(a),Y=F&&R(a);return{c:function(){t=l("tr"),n=l("th"),e=u(O),c=v(),r=l("td"),o=u(A),s=v(),b=l("td"),_=u(I),T=v(),y=l("td"),G&&G.c(),S=v(),L&&L.c(),P=v(),K&&K.c(),D=v(),Q&&Q.c(),w=v(),Y&&Y.c(),C=v(),this.h()},l:function(a){t=i(a,"TR",{});var l=p(t);n=i(l,"TH",{scope:!0});var u=p(n);e=h(u,O),u.forEach(f),c=E(l),r=i(l,"TD",{});var g=p(r);o=h(g,A),g.forEach(f),s=E(l),b=i(l,"TD",{});var d=p(b);_=h(d,I),d.forEach(f),T=E(l),y=i(l,"TD",{});var k=p(y);G&&G.l(k),S=E(k),L&&L.l(k),P=E(k),K&&K.l(k),D=E(k),Q&&Q.l(k),w=E(k),Y&&Y.l(k),k.forEach(f),C=E(l),l.forEach(f),this.h()},h:function(){g(n,"scope","row")},m:function(a,l){d(a,t,l),k(t,n),k(n,e),k(t,c),k(t,r),k(r,o),k(t,s),k(t,b),k(b,_),k(t,T),k(t,y),G&&G.m(y,null),k(y,S),L&&L.m(y,null),k(y,P),K&&K.m(y,null),k(y,D),Q&&Q.m(y,null),k(y,w),Y&&Y.m(y,null),k(t,C)},p:function(a,t){a.packages&&O!==(O=t.pkg.name+"")&&m(e,O),a.packages&&A!==(A=t.pkgStatus[t.pkg.status].name+"")&&m(o,A),a.packages&&I!==(I=t.pkg.path+"")&&m(_,I),a.packages&&(N=t.pkgStatus[t.pkg.status].actions.includes("start")),N?G?G.p(a,t):((G=x(t)).c(),G.m(y,S)):G&&(G.d(1),G=null),a.packages&&(V=t.pkgStatus[t.pkg.status].actions.includes("stop")),V?L?L.p(a,t):((L=B(t)).c(),L.m(y,P)):L&&(L.d(1),L=null),a.packages&&(j=t.pkgStatus[t.pkg.status].actions.includes("enable")),j?K?K.p(a,t):((K=H(t)).c(),K.m(y,D)):K&&(K.d(1),K=null),a.packages&&(M=t.pkgStatus[t.pkg.status].actions.includes("disable")),M?Q?Q.p(a,t):((Q=U(t)).c(),Q.m(y,w)):Q&&(Q.d(1),Q=null),a.packages&&(F=t.pkgStatus[t.pkg.status].actions.includes("delete")),F?Y?Y.p(a,t):((Y=R(t)).c(),Y.m(y,null)):Y&&(Y.d(1),Y=null)},d:function(a){a&&f(t),G&&G.d(),L&&L.d(),K&&K.d(),Q&&Q.d(),Y&&Y.d()}}}function j(a){for(var t,n,e,c,r,o,s,m,w,O,A,x,B,H,U,R,j,M,F,G,L,K,Q,Y,q,z,J,W,X,Z,$,aa,ta,na,ea,ca,ra,oa,sa,la,ua,ia,pa,ha,fa=null!=a.lastError&&N(a),ga=a.packages,da=[],ka=0;ka<ga.length;ka+=1)da[ka]=V(I(a,ga,ka));return{c:function(){t=v(),n=l("h2"),e=u("3Bot Package Manager"),c=l("br"),r=l("br"),o=v(),s=l("form"),fa&&fa.c(),m=v(),w=l("div"),O=l("div"),A=l("select"),x=l("option"),B=u("path"),H=l("option"),U=u("giturl"),R=v(),j=l("div"),M=l("div"),F=l("input"),G=v(),L=l("div"),K=l("button"),Q=u("Add package"),Y=v(),q=l("table"),z=l("caption"),J=u("Packages"),W=v(),X=l("thead"),Z=l("tr"),$=l("th"),aa=u("Name"),ta=v(),na=l("th"),ea=u("Status"),ca=v(),ra=l("th"),oa=u("Path"),sa=v(),la=l("th"),ua=u("Actions"),ia=v(),pa=l("tbody");for(var a=0;a<da.length;a+=1)da[a].c();this.h()},l:function(a){t=E(a),n=i(a,"H2",{});var l=p(n);e=h(l,"3Bot Package Manager"),l.forEach(f),c=i(a,"BR",{}),r=i(a,"BR",{}),o=E(a),s=i(a,"FORM",{});var u=p(s);fa&&fa.l(u),m=E(u),w=i(u,"DIV",{class:!0});var g=p(w);O=i(g,"DIV",{class:!0});var d=p(O);A=i(d,"SELECT",{class:!0,id:!0});var k=p(A);x=i(k,"OPTION",{value:!0,selected:!0});var v=p(x);B=h(v,"path"),v.forEach(f),H=i(k,"OPTION",{value:!0});var b=p(H);U=h(b,"giturl"),b.forEach(f),k.forEach(f),d.forEach(f),R=E(g),j=i(g,"DIV",{class:!0});var _=p(j);M=i(_,"DIV",{class:!0});var T=p(M);F=i(T,"INPUT",{type:!0,class:!0,id:!0}),T.forEach(f),_.forEach(f),G=E(g),L=i(g,"DIV",{class:!0});var y=p(L);K=i(y,"BUTTON",{type:!0,class:!0});var S=p(K);Q=h(S,"Add package"),S.forEach(f),y.forEach(f),g.forEach(f),u.forEach(f),Y=E(a),q=i(a,"TABLE",{class:!0,style:!0});var P=p(q);z=i(P,"CAPTION",{});var D=p(z);J=h(D,"Packages"),D.forEach(f),W=E(P),X=i(P,"THEAD",{});var C=p(X);Z=i(C,"TR",{});var I=p(Z);$=i(I,"TH",{scope:!0});var N=p($);aa=h(N,"Name"),N.forEach(f),ta=E(I),na=i(I,"TH",{scope:!0});var V=p(na);ea=h(V,"Status"),V.forEach(f),ca=E(I),ra=i(I,"TH",{scope:!0});var ha=p(ra);oa=h(ha,"Path"),ha.forEach(f),sa=E(I),la=i(I,"TH",{scope:!0});var ga=p(la);ua=h(ga,"Actions"),ga.forEach(f),I.forEach(f),C.forEach(f),ia=E(P),pa=i(P,"TBODY",{});for(var ka=p(pa),ma=0;ma<da.length;ma+=1)da[ma].l(ka);ka.forEach(f),P.forEach(f),this.h()},h:function(){document.title="3bot Package Manager",x.__value="path",x.value=x.__value,x.selected=!0,H.__value="git_url",H.value=H.__value,g(A,"class","custom-select mr-sm-3"),g(A,"id","inlineFormCustomSelect"),void 0===a.method&&C(function(){return a.select_change_handler.call(A)}),g(O,"class","col-auto"),g(F,"type","text"),g(F,"class","form-control"),g(F,"id","inlineFormInputGroup"),g(M,"class","input-group mb-2"),g(j,"class","col-6"),g(K,"type","button"),g(K,"class","btn btn-prweblibs/gedis/gedis_http.jsimary mb-2"),g(L,"class","col-auto"),g(w,"class","form-row align-items-center"),g($,"scope","col"),g(na,"scope","col"),g(ra,"scope","col"),g(la,"scope","col"),g(q,"class","table"),_(q,"margin-top","20px"),ha=[b(A,"change",a.select_change_handler),b(F,"input",a.input_input_handler),b(K,"click",a.click_handler)]},m:function(l,u){d(l,t,u),d(l,n,u),k(n,e),d(l,c,u),d(l,r,u),d(l,o,u),d(l,s,u),fa&&fa.m(s,null),k(s,m),k(s,w),k(w,O),k(O,A),k(A,x),k(x,B),k(A,H),k(H,U),T(A,a.method),k(w,R),k(w,j),k(j,M),k(M,F),y(F,a.newPackagePath),k(w,G),k(w,L),k(L,K),k(K,Q),d(l,Y,u),d(l,q,u),k(q,z),k(z,J),k(q,W),k(q,X),k(X,Z),k(Z,$),k($,aa),k(Z,ta),k(Z,na),k(na,ea),k(Z,ca),k(Z,ra),k(ra,oa),k(Z,sa),k(Z,la),k(la,ua),k(q,ia),k(q,pa);for(var i=0;i<da.length;i+=1)da[i].m(pa,null)},p:function(a,t){if(null!=t.lastError?fa?fa.p(a,t):((fa=N(t)).c(),fa.m(s,m)):fa&&(fa.d(1),fa=null),a.method&&T(A,t.method),a.newPackagePath&&F.value!==t.newPackagePath&&y(F,t.newPackagePath),a.pkgStatus||a.packages||a.packageDelete||a.packageDisable||a.packageEnable||a.packageStop||a.packageStart){var n;for(ga=t.packages,n=0;n<ga.length;n+=1){var e=I(t,ga,n);da[n]?da[n].p(a,e):(da[n]=V(e),da[n].c(),da[n].m(pa,null))}for(;n<da.length;n+=1)da[n].d(1);da.length=ga.length}},i:S,o:S,d:function(a){a&&f(t),a&&f(n),a&&f(c),a&&f(r),a&&f(o),a&&f(s),fa&&fa.d(),a&&f(Y),a&&f(q),P(da,a),D(ha)}}}function M(a,t,n){var e=new GedisHTTPClient("".concat(location.protocol,"//").concat(location.hostname,"/web/gedis/http")),c="path",r="",o=null,s=[];function l(){e.executeCommand("package_manager","packages_list").then(function(a){if(!a.ok){var t=new Error(a);throw n("lastError",o=t),t}a.json().then(function(a){n("packages",s=a.packages),n("lastError",o=null)})})}function u(){var a={};a[c]=r,e.executeCommand("package_manager","package_add",a).then(function(a){a.ok?(n("lastError",o=null),l()):n("lastError",o="Couldn't add package "+r)})}function i(a){var t={name:a};e.executeCommand("package_manager","package_enable",t).then(function(t){t.ok?(n("lastError",o=null),l()):n("lastError",o="Couldn't enable package "+a)})}function p(a){var t={name:a};e.executeCommand("package_manager","package_disable",t).then(function(t){t.ok?(n("lastError",o=null),l()):n("lastError",o="Couldn't disable package "+a)})}function h(a){var t={name:a};e.executeCommand("package_manager","package_stop",t).then(function(t){t.ok?(n("lastError",o=null),l()):n("lastError",o="Couldn't stop package "+a)})}function f(a){var t={name:a};e.executeCommand("package_manager","package_start",t).then(function(t){t.ok?(n("lastError",o=null),l()):n("lastError",o="Couldn't start package "+a)})}function g(a){var t={name:a};e.executeCommand("package_manager","package_delete",t).then(function(t){t.ok?(n("lastError",o=null),l()):n("lastError",o="Couldn't delete package "+a)})}w(function(){return O.async(function(a){for(;;)switch(a.prev=a.next){case 0:l();case 1:case"end":return a.stop()}})});return{method:c,newPackagePath:r,lastError:o,packages:s,pkgStatus:{0:{name:"Init",actions:["delete"]},1:{name:"Installed",actions:["delete","start"]},2:{name:"Running",actions:["delete","stop"]},3:{name:"Halted",actions:["delete","start","disable"]},4:{name:"Disabled",actions:["delete","enable"]},5:{name:"Error",actions:["delete"]}},packageAdd:u,packageEnable:i,packageDisable:p,packageStop:h,packageStart:f,packageDelete:g,select_change_handler:function(){c=A(this),n("method",c)},input_input_handler:function(){r=this.value,n("newPackagePath",r)},click_handler:function(){return u()},click_handler_1:function(a){return f(a.pkg.name)},click_handler_2:function(a){return h(a.pkg.name)},click_handler_3:function(a){return i(a.pkg.name)},click_handler_4:function(a){return p(a.pkg.name)},click_handler_5:function(a){return g(a.pkg.name)}}}export default(function(l){function u(a){var o;return t(this,u),o=n(this,e(u).call(this)),c(r(o),a,M,j,s,{}),o}return a(u,o),u}());
