import{S as a,i as t,s as e,e as c,t as l,c as n,a as s,b as r,d as o,f as p,h as u,j as i,y as h,m as g,p as d,G as k,H as m,I as f,J as E,n as b,K as _,L as v,M as T,N as S,O as P}from"./index.4ed08320.js";function y(a,t,e){const c=Object.create(a);return c.pkg=t[e],c}function D(a){let t,e;return{c(){t=c("div"),e=l(a.lastError),this.h()},l(c){t=n(c,"DIV",{class:!0,role:!0});var l=s(t);e=r(l,a.lastError),l.forEach(o),this.h()},h(){p(t,"class","alert alert-danger"),p(t,"role","alert")},m(a,c){u(a,t,c),i(t,e)},p(a,t){a.lastError&&h(e,t.lastError)},d(a){a&&o(t)}}}function C(a){let t,e,h;function g(...t){return a.click_handler_1(a,...t)}return{c(){t=c("button"),e=l("Start"),this.h()},l(a){t=n(a,"BUTTON",{type:!0,class:!0});var c=s(t);e=r(c,"Start"),c.forEach(o),this.h()},h(){p(t,"type","button"),p(t,"class","btn btn-success btn-sm"),h=k(t,"click",g)},m(a,c){u(a,t,c),i(t,e)},p(t,e){a=e},d(a){a&&o(t),h()}}}function O(a){let t,e,h;function g(...t){return a.click_handler_2(a,...t)}return{c(){t=c("button"),e=l("Stop"),this.h()},l(a){t=n(a,"BUTTON",{type:!0,class:!0});var c=s(t);e=r(c,"Stop"),c.forEach(o),this.h()},h(){p(t,"type","button"),p(t,"class","btn btn-danger btn-sm"),h=k(t,"click",g)},m(a,c){u(a,t,c),i(t,e)},p(t,e){a=e},d(a){a&&o(t),h()}}}function I(a){let t,e,h;function g(...t){return a.click_handler_3(a,...t)}return{c(){t=c("button"),e=l("Enable"),this.h()},l(a){t=n(a,"BUTTON",{type:!0,class:!0});var c=s(t);e=r(c,"Enable"),c.forEach(o),this.h()},h(){p(t,"type","button"),p(t,"class","btn btn-primary btn-sm"),h=k(t,"click",g)},m(a,c){u(a,t,c),i(t,e)},p(t,e){a=e},d(a){a&&o(t),h()}}}function w(a){let t,e,h;function g(...t){return a.click_handler_4(a,...t)}return{c(){t=c("button"),e=l("Disable"),this.h()},l(a){t=n(a,"BUTTON",{type:!0,class:!0});var c=s(t);e=r(c,"Disable"),c.forEach(o),this.h()},h(){p(t,"type","button"),p(t,"class","btn btn-light btn-sm"),h=k(t,"click",g)},m(a,c){u(a,t,c),i(t,e)},p(t,e){a=e},d(a){a&&o(t),h()}}}function N(a){let t,e,h;function g(...t){return a.click_handler_5(a,...t)}return{c(){t=c("button"),e=l("Delete"),this.h()},l(a){t=n(a,"BUTTON",{type:!0,class:!0});var c=s(t);e=r(c,"Delete"),c.forEach(o),this.h()},h(){p(t,"type","button"),p(t,"class","btn btn-dark btn-sm"),h=k(t,"click",g)},m(a,c){u(a,t,c),i(t,e)},p(t,e){a=e},d(a){a&&o(t),h()}}}function x(a){let t,e,k,m,f,E,b,_,v,T,S,P,y,D,x,B,H=a.pkg.name+"",A=a.pkgStatus[a.pkg.status].name+"",U=a.pkg.path+"",R=a.pkgStatus[a.pkg.status].actions.includes("start"),V=a.pkgStatus[a.pkg.status].actions.includes("stop"),j=a.pkgStatus[a.pkg.status].actions.includes("enable"),M=a.pkgStatus[a.pkg.status].actions.includes("disable"),F=a.pkgStatus[a.pkg.status].actions.includes("delete"),G=R&&C(a),L=V&&O(a),$=j&&I(a),J=M&&w(a),K=F&&N(a);return{c(){t=c("tr"),e=c("th"),k=l(H),m=g(),f=c("td"),E=l(A),b=g(),_=c("td"),v=l(U),T=g(),S=c("td"),G&&G.c(),P=g(),L&&L.c(),y=g(),$&&$.c(),D=g(),J&&J.c(),x=g(),K&&K.c(),B=g(),this.h()},l(a){t=n(a,"TR",{});var c=s(t);e=n(c,"TH",{scope:!0});var l=s(e);k=r(l,H),l.forEach(o),m=d(c),f=n(c,"TD",{});var p=s(f);E=r(p,A),p.forEach(o),b=d(c),_=n(c,"TD",{});var u=s(_);v=r(u,U),u.forEach(o),T=d(c),S=n(c,"TD",{});var i=s(S);G&&G.l(i),P=d(i),L&&L.l(i),y=d(i),$&&$.l(i),D=d(i),J&&J.l(i),x=d(i),K&&K.l(i),i.forEach(o),B=d(c),c.forEach(o),this.h()},h(){p(e,"scope","row")},m(a,c){u(a,t,c),i(t,e),i(e,k),i(t,m),i(t,f),i(f,E),i(t,b),i(t,_),i(_,v),i(t,T),i(t,S),G&&G.m(S,null),i(S,P),L&&L.m(S,null),i(S,y),$&&$.m(S,null),i(S,D),J&&J.m(S,null),i(S,x),K&&K.m(S,null),i(t,B)},p(a,t){a.packages&&H!==(H=t.pkg.name+"")&&h(k,H),a.packages&&A!==(A=t.pkgStatus[t.pkg.status].name+"")&&h(E,A),a.packages&&U!==(U=t.pkg.path+"")&&h(v,U),a.packages&&(R=t.pkgStatus[t.pkg.status].actions.includes("start")),R?G?G.p(a,t):((G=C(t)).c(),G.m(S,P)):G&&(G.d(1),G=null),a.packages&&(V=t.pkgStatus[t.pkg.status].actions.includes("stop")),V?L?L.p(a,t):((L=O(t)).c(),L.m(S,y)):L&&(L.d(1),L=null),a.packages&&(j=t.pkgStatus[t.pkg.status].actions.includes("enable")),j?$?$.p(a,t):(($=I(t)).c(),$.m(S,D)):$&&($.d(1),$=null),a.packages&&(M=t.pkgStatus[t.pkg.status].actions.includes("disable")),M?J?J.p(a,t):((J=w(t)).c(),J.m(S,x)):J&&(J.d(1),J=null),a.packages&&(F=t.pkgStatus[t.pkg.status].actions.includes("delete")),F?K?K.p(a,t):((K=N(t)).c(),K.m(S,null)):K&&(K.d(1),K=null)},d(a){a&&o(t),G&&G.d(),L&&L.d(),$&&$.d(),J&&J.d(),K&&K.d()}}}function B(a){let t,e,h,T,P,C,O,I,w,N,B,H,A,U,R,V,j,M,F,G,L,$,J,K,Y,q,z,Q,W,X,Z,aa,ta,ea,ca,la,na,sa,ra,oa,pa,ua,ia,ha,ga=null!=a.lastError&&D(a),da=a.packages,ka=[];for(let t=0;t<da.length;t+=1)ka[t]=x(y(a,da,t));return{c(){t=g(),e=c("h2"),h=l("3Bot Package Manager"),T=c("br"),P=c("br"),C=g(),O=c("form"),ga&&ga.c(),I=g(),w=c("div"),N=c("div"),B=c("select"),H=c("option"),A=l("path"),U=c("option"),R=l("giturl"),V=g(),j=c("div"),M=c("div"),F=c("input"),G=g(),L=c("div"),$=c("button"),J=l("Add package"),K=g(),Y=c("table"),q=c("caption"),z=l("Packages"),Q=g(),W=c("thead"),X=c("tr"),Z=c("th"),aa=l("Name"),ta=g(),ea=c("th"),ca=l("Status"),la=g(),na=c("th"),sa=l("Path"),ra=g(),oa=c("th"),pa=l("Actions"),ua=g(),ia=c("tbody");for(let a=0;a<ka.length;a+=1)ka[a].c();this.h()},l(a){t=d(a),e=n(a,"H2",{});var c=s(e);h=r(c,"3Bot Package Manager"),c.forEach(o),T=n(a,"BR",{}),P=n(a,"BR",{}),C=d(a),O=n(a,"FORM",{});var l=s(O);ga&&ga.l(l),I=d(l),w=n(l,"DIV",{class:!0});var p=s(w);N=n(p,"DIV",{class:!0});var u=s(N);B=n(u,"SELECT",{class:!0,id:!0});var i=s(B);H=n(i,"OPTION",{value:!0,selected:!0});var g=s(H);A=r(g,"path"),g.forEach(o),U=n(i,"OPTION",{value:!0});var k=s(U);R=r(k,"giturl"),k.forEach(o),i.forEach(o),u.forEach(o),V=d(p),j=n(p,"DIV",{class:!0});var m=s(j);M=n(m,"DIV",{class:!0});var f=s(M);F=n(f,"INPUT",{type:!0,class:!0,id:!0}),f.forEach(o),m.forEach(o),G=d(p),L=n(p,"DIV",{class:!0});var E=s(L);$=n(E,"BUTTON",{type:!0,class:!0});var b=s($);J=r(b,"Add package"),b.forEach(o),E.forEach(o),p.forEach(o),l.forEach(o),K=d(a),Y=n(a,"TABLE",{class:!0,style:!0});var _=s(Y);q=n(_,"CAPTION",{});var v=s(q);z=r(v,"Packages"),v.forEach(o),Q=d(_),W=n(_,"THEAD",{});var S=s(W);X=n(S,"TR",{});var y=s(X);Z=n(y,"TH",{scope:!0});var D=s(Z);aa=r(D,"Name"),D.forEach(o),ta=d(y),ea=n(y,"TH",{scope:!0});var x=s(ea);ca=r(x,"Status"),x.forEach(o),la=d(y),na=n(y,"TH",{scope:!0});var ha=s(na);sa=r(ha,"Path"),ha.forEach(o),ra=d(y),oa=n(y,"TH",{scope:!0});var da=s(oa);pa=r(da,"Actions"),da.forEach(o),y.forEach(o),S.forEach(o),ua=d(_),ia=n(_,"TBODY",{});var ma=s(ia);for(let a=0;a<ka.length;a+=1)ka[a].l(ma);ma.forEach(o),_.forEach(o),this.h()},h(){document.title="3bot Package Manager",H.__value="path",H.value=H.__value,H.selected=!0,U.__value="git_url",U.value=U.__value,p(B,"class","custom-select mr-sm-3"),p(B,"id","inlineFormCustomSelect"),void 0===a.method&&S(()=>a.select_change_handler.call(B)),p(N,"class","col-auto"),p(F,"type","text"),p(F,"class","form-control"),p(F,"id","inlineFormInputGroup"),p(M,"class","input-group mb-2"),p(j,"class","col-6"),p($,"type","button"),p($,"class","btn btn-prweblibs/gedis/gedis_http.jsimary mb-2"),p(L,"class","col-auto"),p(w,"class","form-row align-items-center"),p(Z,"scope","col"),p(ea,"scope","col"),p(na,"scope","col"),p(oa,"scope","col"),p(Y,"class","table"),m(Y,"margin-top","20px"),ha=[k(B,"change",a.select_change_handler),k(F,"input",a.input_input_handler),k($,"click",a.click_handler)]},m(c,l){u(c,t,l),u(c,e,l),i(e,h),u(c,T,l),u(c,P,l),u(c,C,l),u(c,O,l),ga&&ga.m(O,null),i(O,I),i(O,w),i(w,N),i(N,B),i(B,H),i(H,A),i(B,U),i(U,R),f(B,a.method),i(w,V),i(w,j),i(j,M),i(M,F),E(F,a.newPackagePath),i(w,G),i(w,L),i(L,$),i($,J),u(c,K,l),u(c,Y,l),i(Y,q),i(q,z),i(Y,Q),i(Y,W),i(W,X),i(X,Z),i(Z,aa),i(X,ta),i(X,ea),i(ea,ca),i(X,la),i(X,na),i(na,sa),i(X,ra),i(X,oa),i(oa,pa),i(Y,ua),i(Y,ia);for(let a=0;a<ka.length;a+=1)ka[a].m(ia,null)},p(a,t){if(null!=t.lastError?ga?ga.p(a,t):((ga=D(t)).c(),ga.m(O,I)):ga&&(ga.d(1),ga=null),a.method&&f(B,t.method),a.newPackagePath&&F.value!==t.newPackagePath&&E(F,t.newPackagePath),a.pkgStatus||a.packages||a.packageDelete||a.packageDisable||a.packageEnable||a.packageStop||a.packageStart){let e;for(da=t.packages,e=0;e<da.length;e+=1){const c=y(t,da,e);ka[e]?ka[e].p(a,c):(ka[e]=x(c),ka[e].c(),ka[e].m(ia,null))}for(;e<ka.length;e+=1)ka[e].d(1);ka.length=da.length}},i:b,o:b,d(a){a&&o(t),a&&o(e),a&&o(T),a&&o(P),a&&o(C),a&&o(O),ga&&ga.d(),a&&o(K),a&&o(Y),_(ka,a),v(ha)}}}function H(a,t,e){const c=new GedisHTTPClient(`${location.protocol}//${location.hostname}/web/gedis/http`);let l="path",n="",s=null,r=[];function o(){c.executeCommand("package_manager","packages_list").then(a=>{if(!a.ok){let t=new Error(a);throw e("lastError",s=t),t}a.json().then(a=>{e("packages",r=a.packages),e("lastError",s=null)})})}function p(){let a={};a[l]=n,c.executeCommand("package_manager","package_add",a).then(a=>{a.ok?(e("lastError",s=null),o()):e("lastError",s="Couldn't add package "+n)})}function u(a){let t={name:a};c.executeCommand("package_manager","package_enable",t).then(t=>{t.ok?(e("lastError",s=null),o()):e("lastError",s="Couldn't enable package "+a)})}function i(a){let t={name:a};c.executeCommand("package_manager","package_disable",t).then(t=>{t.ok?(e("lastError",s=null),o()):e("lastError",s="Couldn't disable package "+a)})}function h(a){let t={name:a};c.executeCommand("package_manager","package_stop",t).then(t=>{t.ok?(e("lastError",s=null),o()):e("lastError",s="Couldn't stop package "+a)})}function g(a){let t={name:a};c.executeCommand("package_manager","package_start",t).then(t=>{t.ok?(e("lastError",s=null),o()):e("lastError",s="Couldn't start package "+a)})}function d(a){let t={name:a};c.executeCommand("package_manager","package_delete",t).then(t=>{t.ok?(e("lastError",s=null),o()):e("lastError",s="Couldn't delete package "+a)})}T(async()=>{o()});return{method:l,newPackagePath:n,lastError:s,packages:r,pkgStatus:{0:{name:"Init",actions:["delete"]},1:{name:"Installed",actions:["delete","start"]},2:{name:"Running",actions:["delete","stop"]},3:{name:"Halted",actions:["delete","start","disable"]},4:{name:"Disabled",actions:["delete","enable"]},5:{name:"Error",actions:["delete"]}},packageAdd:p,packageEnable:u,packageDisable:i,packageStop:h,packageStart:g,packageDelete:d,select_change_handler:function(){l=P(this),e("method",l)},input_input_handler:function(){n=this.value,e("newPackagePath",n)},click_handler:()=>p(),click_handler_1:({pkg:a})=>g(a.name),click_handler_2:({pkg:a})=>h(a.name),click_handler_3:({pkg:a})=>u(a.name),click_handler_4:({pkg:a})=>i(a.name),click_handler_5:({pkg:a})=>d(a.name)}}export default class extends a{constructor(a){super(),t(this,a,H,B,e,{})}}
