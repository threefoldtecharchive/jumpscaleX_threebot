import{S as a,i as t,s as e,e as c,t as n,c as s,a as l,b as r,d as o,f as u,h as i,j as p,w as h,l as d,m as g,E as k,F as m,G as f,H as E,n as b,I as v,J as _,K as T,L as S,M as P}from"./index.83f08e89.js";function y(a,t,e){const c=Object.create(a);return c.pkg=t[e],c}function D(a){var t,e;return{c(){t=c("div"),e=n(a.lastError),this.h()},l(c){t=s(c,"DIV",{class:!0,role:!0},!1);var n=l(t);e=r(n,a.lastError),n.forEach(o),this.h()},h(){u(t,"class","alert alert-danger"),u(t,"role","alert")},m(a,c){i(a,t,c),p(t,e)},p(a,t){a.lastError&&h(e,t.lastError)},d(a){a&&o(t)}}}function C(a){var t,e,h;function d(){return a.click_handler_1(a)}return{c(){t=c("button"),e=n("Start"),this.h()},l(a){t=s(a,"BUTTON",{type:!0,class:!0},!1);var c=l(t);e=r(c,"Start"),c.forEach(o),this.h()},h(){u(t,"type","button"),u(t,"class","btn btn-success btn-sm"),h=k(t,"click",d)},m(a,c){i(a,t,c),p(t,e)},p(t,e){a=e},d(a){a&&o(t),h()}}}function w(a){var t,e,h;function d(){return a.click_handler_2(a)}return{c(){t=c("button"),e=n("Stop"),this.h()},l(a){t=s(a,"BUTTON",{type:!0,class:!0},!1);var c=l(t);e=r(c,"Stop"),c.forEach(o),this.h()},h(){u(t,"type","button"),u(t,"class","btn btn-danger btn-sm"),h=k(t,"click",d)},m(a,c){i(a,t,c),p(t,e)},p(t,e){a=e},d(a){a&&o(t),h()}}}function I(a){var t,e,h;function d(){return a.click_handler_3(a)}return{c(){t=c("button"),e=n("Enable"),this.h()},l(a){t=s(a,"BUTTON",{type:!0,class:!0},!1);var c=l(t);e=r(c,"Enable"),c.forEach(o),this.h()},h(){u(t,"type","button"),u(t,"class","btn btn-primary btn-sm"),h=k(t,"click",d)},m(a,c){i(a,t,c),p(t,e)},p(t,e){a=e},d(a){a&&o(t),h()}}}function O(a){var t,e,h;function d(){return a.click_handler_4(a)}return{c(){t=c("button"),e=n("Disable"),this.h()},l(a){t=s(a,"BUTTON",{type:!0,class:!0},!1);var c=l(t);e=r(c,"Disable"),c.forEach(o),this.h()},h(){u(t,"type","button"),u(t,"class","btn btn-light btn-sm"),h=k(t,"click",d)},m(a,c){i(a,t,c),p(t,e)},p(t,e){a=e},d(a){a&&o(t),h()}}}function x(a){var t,e,h;function d(){return a.click_handler_5(a)}return{c(){t=c("button"),e=n("Delete"),this.h()},l(a){t=s(a,"BUTTON",{type:!0,class:!0},!1);var c=l(t);e=r(c,"Delete"),c.forEach(o),this.h()},h(){u(t,"type","button"),u(t,"class","btn btn-dark btn-sm"),h=k(t,"click",d)},m(a,c){i(a,t,c),p(t,e)},p(t,e){a=e},d(a){a&&o(t),h()}}}function B(a){var t,e,k,m,f,E,b,v,_,T,S,P,y,D,B,N,H=a.pkg.name+"",A=a.pkgStatus[a.pkg.status].name+"",U=a.pkg.path+"",R=a.pkgStatus[a.pkg.status].actions.includes("start"),V=a.pkgStatus[a.pkg.status].actions.includes("stop"),j=a.pkgStatus[a.pkg.status].actions.includes("enable"),M=a.pkgStatus[a.pkg.status].actions.includes("disable"),F=a.pkgStatus[a.pkg.status].actions.includes("delete"),G=R&&C(a),L=V&&w(a),$=j&&I(a),J=M&&O(a),K=F&&x(a);return{c(){t=c("tr"),e=c("th"),k=n(H),m=d(),f=c("td"),E=n(A),b=d(),v=c("td"),_=n(U),T=d(),S=c("td"),G&&G.c(),P=d(),L&&L.c(),y=d(),$&&$.c(),D=d(),J&&J.c(),B=d(),K&&K.c(),N=d(),this.h()},l(a){t=s(a,"TR",{},!1);var c=l(t);e=s(c,"TH",{scope:!0},!1);var n=l(e);k=r(n,H),n.forEach(o),m=g(c),f=s(c,"TD",{},!1);var u=l(f);E=r(u,A),u.forEach(o),b=g(c),v=s(c,"TD",{},!1);var i=l(v);_=r(i,U),i.forEach(o),T=g(c),S=s(c,"TD",{},!1);var p=l(S);G&&G.l(p),P=g(p),L&&L.l(p),y=g(p),$&&$.l(p),D=g(p),J&&J.l(p),B=g(p),K&&K.l(p),p.forEach(o),N=g(c),c.forEach(o),this.h()},h(){u(e,"scope","row")},m(a,c){i(a,t,c),p(t,e),p(e,k),p(t,m),p(t,f),p(f,E),p(t,b),p(t,v),p(v,_),p(t,T),p(t,S),G&&G.m(S,null),p(S,P),L&&L.m(S,null),p(S,y),$&&$.m(S,null),p(S,D),J&&J.m(S,null),p(S,B),K&&K.m(S,null),p(t,N)},p(a,t){a.packages&&H!==(H=t.pkg.name+"")&&h(k,H),a.packages&&A!==(A=t.pkgStatus[t.pkg.status].name+"")&&h(E,A),a.packages&&U!==(U=t.pkg.path+"")&&h(_,U),a.packages&&(R=t.pkgStatus[t.pkg.status].actions.includes("start")),R?G||((G=C(t)).c(),G.m(S,P)):G&&(G.d(1),G=null),a.packages&&(V=t.pkgStatus[t.pkg.status].actions.includes("stop")),V?L||((L=w(t)).c(),L.m(S,y)):L&&(L.d(1),L=null),a.packages&&(j=t.pkgStatus[t.pkg.status].actions.includes("enable")),j?$||(($=I(t)).c(),$.m(S,D)):$&&($.d(1),$=null),a.packages&&(M=t.pkgStatus[t.pkg.status].actions.includes("disable")),M?J||((J=O(t)).c(),J.m(S,B)):J&&(J.d(1),J=null),a.packages&&(F=t.pkgStatus[t.pkg.status].actions.includes("delete")),F?K||((K=x(t)).c(),K.m(S,null)):K&&(K.d(1),K=null)},d(a){a&&o(t),G&&G.d(),L&&L.d(),$&&$.d(),J&&J.d(),K&&K.d()}}}function N(a){var t,e,h,T,P,C,w,I,O,x,N,H,A,U,R,V,j,M,F,G,L,$,J,K,Y,q,z,Q,W,X,Z,aa,ta,ea,ca,na,sa,la,ra,oa,ua,ia,pa,ha,da=null!=a.lastError&&D(a);let ga=a.packages,ka=[];for(let t=0;t<ga.length;t+=1)ka[t]=B(y(a,ga,t));return{c(){t=d(),e=c("h2"),h=n("3Bot Package Manager"),T=c("br"),P=c("br"),C=d(),w=c("form"),da&&da.c(),I=d(),O=c("div"),x=c("div"),N=c("select"),H=c("option"),A=n("path"),U=c("option"),R=n("giturl"),V=d(),j=c("div"),M=c("div"),F=c("input"),G=d(),L=c("div"),$=c("button"),J=n("Add package"),K=d(),Y=c("table"),q=c("caption"),z=n("Packages"),Q=d(),W=c("thead"),X=c("tr"),Z=c("th"),aa=n("Name"),ta=d(),ea=c("th"),ca=n("Status"),na=d(),sa=c("th"),la=n("Path"),ra=d(),oa=c("th"),ua=n("Actions"),ia=d(),pa=c("tbody");for(let a=0;a<ka.length;a+=1)ka[a].c();this.h()},l(a){t=g(a),e=s(a,"H2",{},!1);var c=l(e);h=r(c,"3Bot Package Manager"),c.forEach(o),T=s(a,"BR",{},!1),l(T).forEach(o),P=s(a,"BR",{},!1),l(P).forEach(o),C=g(a),w=s(a,"FORM",{},!1);var n=l(w);da&&da.l(n),I=g(n),O=s(n,"DIV",{class:!0},!1);var u=l(O);x=s(u,"DIV",{class:!0},!1);var i=l(x);N=s(i,"SELECT",{class:!0,id:!0},!1);var p=l(N);H=s(p,"OPTION",{value:!0,selected:!0},!1);var d=l(H);A=r(d,"path"),d.forEach(o),U=s(p,"OPTION",{value:!0},!1);var k=l(U);R=r(k,"giturl"),k.forEach(o),p.forEach(o),i.forEach(o),V=g(u),j=s(u,"DIV",{class:!0},!1);var m=l(j);M=s(m,"DIV",{class:!0},!1);var f=l(M);F=s(f,"INPUT",{type:!0,class:!0,id:!0},!1),l(F).forEach(o),f.forEach(o),m.forEach(o),G=g(u),L=s(u,"DIV",{class:!0},!1);var E=l(L);$=s(E,"BUTTON",{type:!0,class:!0},!1);var b=l($);J=r(b,"Add package"),b.forEach(o),E.forEach(o),u.forEach(o),n.forEach(o),K=g(a),Y=s(a,"TABLE",{class:!0,style:!0},!1);var v=l(Y);q=s(v,"CAPTION",{},!1);var _=l(q);z=r(_,"Packages"),_.forEach(o),Q=g(v),W=s(v,"THEAD",{},!1);var S=l(W);X=s(S,"TR",{},!1);var y=l(X);Z=s(y,"TH",{scope:!0},!1);var D=l(Z);aa=r(D,"Name"),D.forEach(o),ta=g(y),ea=s(y,"TH",{scope:!0},!1);var B=l(ea);ca=r(B,"Status"),B.forEach(o),na=g(y),sa=s(y,"TH",{scope:!0},!1);var ha=l(sa);la=r(ha,"Path"),ha.forEach(o),ra=g(y),oa=s(y,"TH",{scope:!0},!1);var ga=l(oa);ua=r(ga,"Actions"),ga.forEach(o),y.forEach(o),S.forEach(o),ia=g(v),pa=s(v,"TBODY",{},!1);var ma=l(pa);for(let a=0;a<ka.length;a+=1)ka[a].l(ma);ma.forEach(o),v.forEach(o),this.h()},h(){document.title="3bot Package Manager",H.__value="path",H.value=H.__value,H.selected=!0,U.__value="git_url",U.value=U.__value,void 0===a.method&&S(()=>a.select_change_handler.call(N)),u(N,"class","custom-select mr-sm-3"),u(N,"id","inlineFormCustomSelect"),u(x,"class","col-auto"),u(F,"type","text"),u(F,"class","form-control"),u(F,"id","inlineFormInputGroup"),u(M,"class","input-group mb-2"),u(j,"class","col-6"),u($,"type","button"),u($,"class","btn btn-prweblibs/gedis/gedis_http.jsimary mb-2"),u(L,"class","col-auto"),u(O,"class","form-row align-items-center"),u(Z,"scope","col"),u(ea,"scope","col"),u(sa,"scope","col"),u(oa,"scope","col"),u(Y,"class","table"),m(Y,"margin-top","20px"),ha=[k(N,"change",a.select_change_handler),k(F,"input",a.input_input_handler),k($,"click",a.click_handler)]},m(c,n){i(c,t,n),i(c,e,n),p(e,h),i(c,T,n),i(c,P,n),i(c,C,n),i(c,w,n),da&&da.m(w,null),p(w,I),p(w,O),p(O,x),p(x,N),p(N,H),p(H,A),p(N,U),p(U,R),f(N,a.method),p(O,V),p(O,j),p(j,M),p(M,F),E(F,a.newPackagePath),p(O,G),p(O,L),p(L,$),p($,J),i(c,K,n),i(c,Y,n),p(Y,q),p(q,z),p(Y,Q),p(Y,W),p(W,X),p(X,Z),p(Z,aa),p(X,ta),p(X,ea),p(ea,ca),p(X,na),p(X,sa),p(sa,la),p(X,ra),p(X,oa),p(oa,ua),p(Y,ia),p(Y,pa);for(let a=0;a<ka.length;a+=1)ka[a].m(pa,null)},p(a,t){if(null!=t.lastError?da?da.p(a,t):((da=D(t)).c(),da.m(w,I)):da&&(da.d(1),da=null),a.method&&f(N,t.method),a.newPackagePath&&F.value!==t.newPackagePath&&E(F,t.newPackagePath),a.pkgStatus||a.packages){let e;for(ga=t.packages,e=0;e<ga.length;e+=1){const c=y(t,ga,e);ka[e]?ka[e].p(a,c):(ka[e]=B(c),ka[e].c(),ka[e].m(pa,null))}for(;e<ka.length;e+=1)ka[e].d(1);ka.length=ga.length}},i:b,o:b,d(a){a&&(o(t),o(e),o(T),o(P),o(C),o(w)),da&&da.d(),a&&(o(K),o(Y)),v(ka,a),_(ha)}}}function H(a,t,e){const c=new GedisHTTPClient(`${location.protocol}//${location.hostname}/web/gedis/http`);let n="path",s="",l=null,r=[];function o(){c.executeCommand("package_manager","packages_list").then(a=>{if(!a.ok){let t=new Error(a);throw e("lastError",l=t),t}a.json().then(a=>{e("packages",r=a.packages),e("lastError",l=null)})})}function u(){let a={};a[n]=s,c.executeCommand("package_manager","package_add",a).then(a=>{a.ok?(e("lastError",l=null),o()):e("lastError",l="Couldn't add package "+s)})}function i(a){let t={name:a};c.executeCommand("package_manager","package_enable",t).then(t=>{t.ok?(e("lastError",l=null),o()):e("lastError",l="Couldn't enable package "+a)})}function p(a){let t={name:a};c.executeCommand("package_manager","package_disable",t).then(t=>{t.ok?(e("lastError",l=null),o()):e("lastError",l="Couldn't disable package "+a)})}function h(a){let t={name:a};c.executeCommand("package_manager","package_stop",t).then(t=>{t.ok?(e("lastError",l=null),o()):e("lastError",l="Couldn't stop package "+a)})}function d(a){let t={name:a};c.executeCommand("package_manager","package_start",t).then(t=>{t.ok?(e("lastError",l=null),o()):e("lastError",l="Couldn't start package "+a)})}function g(a){let t={name:a};c.executeCommand("package_manager","package_delete",t).then(t=>{t.ok?(e("lastError",l=null),o()):e("lastError",l="Couldn't delete package "+a)})}T(async()=>{o()});return{method:n,newPackagePath:s,lastError:l,packages:r,pkgStatus:{0:{name:"Init",actions:["delete"]},1:{name:"Installed",actions:["delete","start"]},2:{name:"Running",actions:["delete","stop"]},3:{name:"Halted",actions:["delete","start","disable"]},4:{name:"Disabled",actions:["delete","enable"]},5:{name:"Error",actions:["delete"]}},packageAdd:u,packageEnable:i,packageDisable:p,packageStop:h,packageStart:d,packageDelete:g,select_change_handler:function(){n=P(this),e("method",n)},input_input_handler:function(){s=this.value,e("newPackagePath",s)},click_handler:()=>u(),click_handler_1:({pkg:a})=>d(a.name),click_handler_2:({pkg:a})=>h(a.name),click_handler_3:({pkg:a})=>i(a.name),click_handler_4:({pkg:a})=>p(a.name),click_handler_5:({pkg:a})=>g(a.name)}}export default class extends a{constructor(a){super(),t(this,a,H,N,e,[])}}
