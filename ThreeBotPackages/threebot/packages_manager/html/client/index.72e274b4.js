import{S as a,i as e,s as t,e as s,t as r,c,a as o,b as l,d as n,f as h,h as i,j as p,w as d,l as g,m as u,E as f,F as m,G as v,H as E,n as k,I as _,J as P,K as T,L as b,M as w}from"./index.92d55523.js";function I(a,e,t){const s=Object.create(a);return s.pkg=e[t],s}function D(a){var e,t;return{c(){e=s("div"),t=r(a.lastError),this.h()},l(s){e=c(s,"DIV",{class:!0,role:!0},!1);var r=o(e);t=l(r,a.lastError),r.forEach(n),this.h()},h(){h(e,"class","alert alert-danger"),h(e,"role","alert")},m(a,s){i(a,e,s),p(e,t)},p(a,e){a.lastError&&d(t,e.lastError)},d(a){a&&n(e)}}}function y(a){var e,t,f,m,v,E,k,_,P,T,b,w,I,D=a.pkg.name+"",y=a.pkgStatus[a.pkg.status].name+"",H=a.pkg.path+"";return{c(){e=s("tr"),t=s("th"),f=r(D),m=g(),v=s("td"),E=r(y),k=g(),_=s("td"),P=r(H),T=g(),b=s("td"),w=r("aaaa"),I=g(),this.h()},l(a){e=c(a,"TR",{},!1);var s=o(e);t=c(s,"TH",{scope:!0},!1);var r=o(t);f=l(r,D),r.forEach(n),m=u(s),v=c(s,"TD",{},!1);var h=o(v);E=l(h,y),h.forEach(n),k=u(s),_=c(s,"TD",{},!1);var i=o(_);P=l(i,H),i.forEach(n),T=u(s),b=c(s,"TD",{},!1);var p=o(b);w=l(p,"aaaa"),p.forEach(n),I=u(s),s.forEach(n),this.h()},h(){h(t,"scope","row")},m(a,s){i(a,e,s),p(e,t),p(t,f),p(e,m),p(e,v),p(v,E),p(e,k),p(e,_),p(_,P),p(e,T),p(e,b),p(b,w),p(e,I)},p(a,e){a.packages&&D!==(D=e.pkg.name+"")&&d(f,D),a.packages&&y!==(y=e.pkgStatus[e.pkg.status].name+"")&&d(E,y),a.packages&&H!==(H=e.pkg.path+"")&&d(P,H)},d(a){a&&n(e)}}}function H(a){var e,t,d,T,w,H,O,S,A,x,B,N,C,R,V,j,M,F,G,L,U,$,J,K,Y,q,z,Q,W,X,Z,aa,ea,ta,sa,ra,ca,oa,la,na,ha,ia,pa,da,ga=null!=a.lastError&&D(a);let ua=a.packages,fa=[];for(let e=0;e<ua.length;e+=1)fa[e]=y(I(a,ua,e));return{c(){e=g(),t=s("h2"),d=r("3Bot Package Manager"),T=s("br"),w=s("br"),H=g(),O=s("form"),ga&&ga.c(),S=g(),A=s("div"),x=s("div"),B=s("select"),N=s("option"),C=r("path"),R=s("option"),V=r("giturl"),j=g(),M=s("div"),F=s("div"),G=s("input"),L=g(),U=s("div"),$=s("button"),J=r("Add package"),K=g(),Y=s("table"),q=s("caption"),z=r("Packages"),Q=g(),W=s("thead"),X=s("tr"),Z=s("th"),aa=r("Name"),ea=g(),ta=s("th"),sa=r("Status"),ra=g(),ca=s("th"),oa=r("Path"),la=g(),na=s("th"),ha=r("Actions"),ia=g(),pa=s("tbody");for(let a=0;a<fa.length;a+=1)fa[a].c();this.h()},l(a){e=u(a),t=c(a,"H2",{},!1);var s=o(t);d=l(s,"3Bot Package Manager"),s.forEach(n),T=c(a,"BR",{},!1),o(T).forEach(n),w=c(a,"BR",{},!1),o(w).forEach(n),H=u(a),O=c(a,"FORM",{},!1);var r=o(O);ga&&ga.l(r),S=u(r),A=c(r,"DIV",{class:!0},!1);var h=o(A);x=c(h,"DIV",{class:!0},!1);var i=o(x);B=c(i,"SELECT",{class:!0,id:!0},!1);var p=o(B);N=c(p,"OPTION",{value:!0,selected:!0},!1);var g=o(N);C=l(g,"path"),g.forEach(n),R=c(p,"OPTION",{value:!0},!1);var f=o(R);V=l(f,"giturl"),f.forEach(n),p.forEach(n),i.forEach(n),j=u(h),M=c(h,"DIV",{class:!0},!1);var m=o(M);F=c(m,"DIV",{class:!0},!1);var v=o(F);G=c(v,"INPUT",{type:!0,class:!0,id:!0},!1),o(G).forEach(n),v.forEach(n),m.forEach(n),L=u(h),U=c(h,"DIV",{class:!0},!1);var E=o(U);$=c(E,"BUTTON",{type:!0,class:!0},!1);var k=o($);J=l(k,"Add package"),k.forEach(n),E.forEach(n),h.forEach(n),r.forEach(n),K=u(a),Y=c(a,"TABLE",{class:!0,style:!0},!1);var _=o(Y);q=c(_,"CAPTION",{},!1);var P=o(q);z=l(P,"Packages"),P.forEach(n),Q=u(_),W=c(_,"THEAD",{},!1);var b=o(W);X=c(b,"TR",{},!1);var I=o(X);Z=c(I,"TH",{scope:!0},!1);var D=o(Z);aa=l(D,"Name"),D.forEach(n),ea=u(I),ta=c(I,"TH",{scope:!0},!1);var y=o(ta);sa=l(y,"Status"),y.forEach(n),ra=u(I),ca=c(I,"TH",{scope:!0},!1);var da=o(ca);oa=l(da,"Path"),da.forEach(n),la=u(I),na=c(I,"TH",{scope:!0},!1);var ua=o(na);ha=l(ua,"Actions"),ua.forEach(n),I.forEach(n),b.forEach(n),ia=u(_),pa=c(_,"TBODY",{},!1);var ma=o(pa);for(let a=0;a<fa.length;a+=1)fa[a].l(ma);ma.forEach(n),_.forEach(n),this.h()},h(){document.title="3bot Package Manager",N.__value="path",N.value=N.__value,N.selected=!0,R.__value="git_url",R.value=R.__value,void 0===a.method&&b(()=>a.select_change_handler.call(B)),h(B,"class","custom-select mr-sm-3"),h(B,"id","inlineFormCustomSelect"),h(x,"class","col-auto"),h(G,"type","text"),h(G,"class","form-control"),h(G,"id","inlineFormInputGroup"),h(F,"class","input-group mb-2"),h(M,"class","col-6"),h($,"type","button"),h($,"class","btn btn-prweblibs/gedis/gedis_http.jsimary mb-2"),h(U,"class","col-auto"),h(A,"class","form-row align-items-center"),h(Z,"scope","col"),h(ta,"scope","col"),h(ca,"scope","col"),h(na,"scope","col"),h(Y,"class","table"),f(Y,"margin-top","20px"),da=[m(B,"change",a.select_change_handler),m(G,"input",a.input_input_handler),m($,"click",a.click_handler)]},m(s,r){i(s,e,r),i(s,t,r),p(t,d),i(s,T,r),i(s,w,r),i(s,H,r),i(s,O,r),ga&&ga.m(O,null),p(O,S),p(O,A),p(A,x),p(x,B),p(B,N),p(N,C),p(B,R),p(R,V),v(B,a.method),p(A,j),p(A,M),p(M,F),p(F,G),E(G,a.newPackagePath),p(A,L),p(A,U),p(U,$),p($,J),i(s,K,r),i(s,Y,r),p(Y,q),p(q,z),p(Y,Q),p(Y,W),p(W,X),p(X,Z),p(Z,aa),p(X,ea),p(X,ta),p(ta,sa),p(X,ra),p(X,ca),p(ca,oa),p(X,la),p(X,na),p(na,ha),p(Y,ia),p(Y,pa);for(let a=0;a<fa.length;a+=1)fa[a].m(pa,null)},p(a,e){if(null!=e.lastError?ga?ga.p(a,e):((ga=D(e)).c(),ga.m(O,S)):ga&&(ga.d(1),ga=null),a.method&&v(B,e.method),a.newPackagePath&&G.value!==e.newPackagePath&&E(G,e.newPackagePath),a.packages||a.pkgStatus){let t;for(ua=e.packages,t=0;t<ua.length;t+=1){const s=I(e,ua,t);fa[t]?fa[t].p(a,s):(fa[t]=y(s),fa[t].c(),fa[t].m(pa,null))}for(;t<fa.length;t+=1)fa[t].d(1);fa.length=ua.length}},i:k,o:k,d(a){a&&(n(e),n(t),n(T),n(w),n(H),n(O)),ga&&ga.d(),a&&(n(K),n(Y)),_(fa,a),P(da)}}}function O(a,e,t){const s=new GedisHTTPClient(`${location.protocol}//${location.hostname}/web/gedis/http`);let r="path",c="",o=null,l=[];function n(){s.executeCommand("package_manager","packages_list").then(a=>{if(!a.ok){let e=new Error(a);throw t("lastError",o=e),e}a.json().then(a=>{t("packages",l=a.packages),t("lastError",o=null)})})}function h(){let a={};a[r]=c,s.executeCommand("package_manager","package_add",a).then(a=>{a.ok&&(n(),t("lastError",o=null))}).then(function(a){"error"===a.type&&console.log(a.type,a.message)})}T(async()=>{n()});return{method:r,newPackagePath:c,lastError:o,packages:l,pkgStatus:{0:{name:"Init",actions:["delete"]},1:{name:"Installed",actions:["delete","start"]},2:{name:"Running",actions:["delete","stop"]},3:{name:"Halted",actions:["delete","start","disable"]},4:{name:"Disabled",actions:["delete","enable"]},5:{name:"Error",actions:["delete"]}},packageAdd:h,select_change_handler:function(){r=w(this),t("method",r)},input_input_handler:function(){c=this.value,t("newPackagePath",c)},click_handler:()=>h()}}export default class extends a{constructor(a){super(),e(this,a,O,H,t,[])}}
