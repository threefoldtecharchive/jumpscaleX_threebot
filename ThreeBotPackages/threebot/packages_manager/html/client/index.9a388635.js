import{S as a,i as e,s,e as t,t as r,c,a as l,b as o,d as n,f as h,h as i,j as u,w as d,l as p,m as g,E as v,F as f,G as m,n as E,H as k,I as _,J as P,K as w}from"./index.5f98fd0e.js";function b(a){var e,s;return{c(){e=t("div"),s=r(a.lastError),this.h()},l(t){e=c(t,"DIV",{class:!0,role:!0},!1);var r=l(e);s=o(r,a.lastError),r.forEach(n),this.h()},h(){h(e,"class","alert alert-danger"),h(e,"role","alert")},m(a,t){i(a,e,t),u(e,s)},p(a,e){a.lastError&&d(s,e.lastError)},d(a){a&&n(e)}}}function I(a){var e,s,d,_,w,I,T,y,O,D,V,B,N,x,F,M,S,j,C,G,H,R,$,A,J=null!=a.lastError&&b(a);return{c(){e=p(),s=t("h2"),d=r("3Bot Package Manager"),_=t("br"),w=t("br"),I=p(),T=t("form"),J&&J.c(),y=p(),O=t("div"),D=t("div"),V=t("select"),B=t("option"),N=r("path"),x=t("option"),F=r("giturl"),M=p(),S=t("div"),j=t("div"),C=t("input"),G=p(),H=t("div"),R=t("button"),$=r("Add package"),this.h()},l(a){e=g(a),s=c(a,"H2",{},!1);var t=l(s);d=o(t,"3Bot Package Manager"),t.forEach(n),_=c(a,"BR",{},!1),l(_).forEach(n),w=c(a,"BR",{},!1),l(w).forEach(n),I=g(a),T=c(a,"FORM",{},!1);var r=l(T);J&&J.l(r),y=g(r),O=c(r,"DIV",{class:!0},!1);var h=l(O);D=c(h,"DIV",{class:!0},!1);var i=l(D);V=c(i,"SELECT",{class:!0,id:!0},!1);var u=l(V);B=c(u,"OPTION",{value:!0,selected:!0},!1);var p=l(B);N=o(p,"path"),p.forEach(n),x=c(u,"OPTION",{value:!0},!1);var v=l(x);F=o(v,"giturl"),v.forEach(n),u.forEach(n),i.forEach(n),M=g(h),S=c(h,"DIV",{class:!0},!1);var f=l(S);j=c(f,"DIV",{class:!0},!1);var m=l(j);C=c(m,"INPUT",{type:!0,class:!0,id:!0},!1),l(C).forEach(n),m.forEach(n),f.forEach(n),G=g(h),H=c(h,"DIV",{class:!0},!1);var E=l(H);R=c(E,"BUTTON",{type:!0,class:!0},!1);var k=l(R);$=o(k,"Add package"),k.forEach(n),E.forEach(n),h.forEach(n),r.forEach(n),this.h()},h(){document.title="3bot Package Manager",B.__value="path",B.value=B.__value,B.selected=!0,x.__value="git_url",x.value=x.__value,void 0===a.method&&P(()=>a.select_change_handler.call(V)),h(V,"class","custom-select mr-sm-3"),h(V,"id","inlineFormCustomSelect"),h(D,"class","col-auto"),h(C,"type","text"),h(C,"class","form-control"),h(C,"id","inlineFormInputGroup"),h(j,"class","input-group mb-2"),h(S,"class","col-6"),h(R,"type","button"),h(R,"class","btn btn-primary mb-2"),h(H,"class","col-auto"),h(O,"class","form-row align-items-center"),A=[v(V,"change",a.select_change_handler),v(C,"input",a.input_input_handler)]},m(t,r){i(t,e,r),i(t,s,r),u(s,d),i(t,_,r),i(t,w,r),i(t,I,r),i(t,T,r),J&&J.m(T,null),u(T,y),u(T,O),u(O,D),u(D,V),u(V,B),u(B,N),u(V,x),u(x,F),f(V,a.method),u(O,M),u(O,S),u(S,j),u(j,C),m(C,a.newPackagePath),u(O,G),u(O,H),u(H,R),u(R,$)},p(a,e){null!=e.lastError?J?J.p(a,e):((J=b(e)).c(),J.m(T,y)):J&&(J.d(1),J=null),a.method&&f(V,e.method),a.newPackagePath&&C.value!==e.newPackagePath&&m(C,e.newPackagePath)},i:E,o:E,d(a){a&&(n(e),n(s),n(_),n(w),n(I),n(T)),J&&J.d(),k(A)}}}function T(a,e,s){const t=new GedisHTTPClient(`${location.protocol}//${location.hostname}/web/gedis/http`);let r="path",c="",l=null,{packages:o=[]}=e;return _(async()=>{t.actors.package_manager.packages_list().then(a=>{if(!a.ok)throw new Error(res);s("packages",o=a.json()),console.log("aaaaaaa",JSON.stringify(a))}).catch(a=>{throw s("lastError",l=a),a})}),a.$set=(a=>{"packages"in a&&s("packages",o=a.packages)}),{method:r,newPackagePath:c,lastError:l,packages:o,select_change_handler:function(){r=w(this),s("method",r)},input_input_handler:function(){c=this.value,s("newPackagePath",c)}}}export default class extends a{constructor(a){super(),e(this,a,T,I,s,["packages"])}}
