import{S as a,i as t,s as e,e as s,t as r,c,a as o,b as l,d as n,f as h,h as i,j as p,w as u,l as g,m as d,E as f,F as m,G as v,H as E,n as k,I as P,J as T,K as _,L as b,M as I}from"./index.92d55523.js";function w(a,t,e){const s=Object.create(a);return s.pkg=t[e],s}function D(a){var t,e;return{c(){t=s("div"),e=r(a.lastError),this.h()},l(s){t=c(s,"DIV",{class:!0,role:!0},!1);var r=o(t);e=l(r,a.lastError),r.forEach(n),this.h()},h(){h(t,"class","alert alert-danger"),h(t,"role","alert")},m(a,s){i(a,t,s),p(t,e)},p(a,t){a.lastError&&u(e,t.lastError)},d(a){a&&n(t)}}}function H(a){var t,e,f,m,v,E,k,P,T,_,b,I,w,D=a.pkg.name+"",H=a.pkgStatus[a.pkg.status].name+"",O=a.pkg.path+"";return{c(){t=s("tr"),e=s("th"),f=r(D),m=g(),v=s("td"),E=r(H),k=g(),P=s("td"),T=r(O),_=g(),b=s("td"),I=r("aaaa"),w=g(),this.h()},l(a){t=c(a,"TR",{},!1);var s=o(t);e=c(s,"TH",{scope:!0},!1);var r=o(e);f=l(r,D),r.forEach(n),m=d(s),v=c(s,"TD",{},!1);var h=o(v);E=l(h,H),h.forEach(n),k=d(s),P=c(s,"TD",{},!1);var i=o(P);T=l(i,O),i.forEach(n),_=d(s),b=c(s,"TD",{},!1);var p=o(b);I=l(p,"aaaa"),p.forEach(n),w=d(s),s.forEach(n),this.h()},h(){h(e,"scope","row")},m(a,s){i(a,t,s),p(t,e),p(e,f),p(t,m),p(t,v),p(v,E),p(t,k),p(t,P),p(P,T),p(t,_),p(t,b),p(b,I),p(t,w)},p(a,t){a.packages&&D!==(D=t.pkg.name+"")&&u(f,D),a.packages&&H!==(H=t.pkgStatus[t.pkg.status].name+"")&&u(E,H),a.packages&&O!==(O=t.pkg.path+"")&&u(T,O)},d(a){a&&n(t)}}}function O(a){var t,e,u,_,I,O,S,y,A,B,N,x,R,V,C,M,j,F,G,L,U,$,J,K,Y,q,z,Q,W,X,Z,aa,ta,ea,sa,ra,ca,oa,la,na,ha,ia,pa,ua,ga=null!=a.lastError&&D(a);let da=a.packages,fa=[];for(let t=0;t<da.length;t+=1)fa[t]=H(w(a,da,t));return{c(){t=g(),e=s("h2"),u=r("3Bot Package Manager"),_=s("br"),I=s("br"),O=g(),S=s("form"),ga&&ga.c(),y=g(),A=s("div"),B=s("div"),N=s("select"),x=s("option"),R=r("path"),V=s("option"),C=r("giturl"),M=g(),j=s("div"),F=s("div"),G=s("input"),L=g(),U=s("div"),$=s("button"),J=r("Add package"),K=g(),Y=s("table"),q=s("caption"),z=r("Packages"),Q=g(),W=s("thead"),X=s("tr"),Z=s("th"),aa=r("Name"),ta=g(),ea=s("th"),sa=r("Status"),ra=g(),ca=s("th"),oa=r("Path"),la=g(),na=s("th"),ha=r("Actions"),ia=g(),pa=s("tbody");for(let a=0;a<fa.length;a+=1)fa[a].c();this.h()},l(a){t=d(a),e=c(a,"H2",{},!1);var s=o(e);u=l(s,"3Bot Package Manager"),s.forEach(n),_=c(a,"BR",{},!1),o(_).forEach(n),I=c(a,"BR",{},!1),o(I).forEach(n),O=d(a),S=c(a,"FORM",{},!1);var r=o(S);ga&&ga.l(r),y=d(r),A=c(r,"DIV",{class:!0},!1);var h=o(A);B=c(h,"DIV",{class:!0},!1);var i=o(B);N=c(i,"SELECT",{class:!0,id:!0},!1);var p=o(N);x=c(p,"OPTION",{value:!0,selected:!0},!1);var g=o(x);R=l(g,"path"),g.forEach(n),V=c(p,"OPTION",{value:!0},!1);var f=o(V);C=l(f,"giturl"),f.forEach(n),p.forEach(n),i.forEach(n),M=d(h),j=c(h,"DIV",{class:!0},!1);var m=o(j);F=c(m,"DIV",{class:!0},!1);var v=o(F);G=c(v,"INPUT",{type:!0,class:!0,id:!0},!1),o(G).forEach(n),v.forEach(n),m.forEach(n),L=d(h),U=c(h,"DIV",{class:!0},!1);var E=o(U);$=c(E,"BUTTON",{type:!0,class:!0},!1);var k=o($);J=l(k,"Add package"),k.forEach(n),E.forEach(n),h.forEach(n),r.forEach(n),K=d(a),Y=c(a,"TABLE",{class:!0,style:!0},!1);var P=o(Y);q=c(P,"CAPTION",{},!1);var T=o(q);z=l(T,"Packages"),T.forEach(n),Q=d(P),W=c(P,"THEAD",{},!1);var b=o(W);X=c(b,"TR",{},!1);var w=o(X);Z=c(w,"TH",{scope:!0},!1);var D=o(Z);aa=l(D,"Name"),D.forEach(n),ta=d(w),ea=c(w,"TH",{scope:!0},!1);var H=o(ea);sa=l(H,"Status"),H.forEach(n),ra=d(w),ca=c(w,"TH",{scope:!0},!1);var ua=o(ca);oa=l(ua,"Path"),ua.forEach(n),la=d(w),na=c(w,"TH",{scope:!0},!1);var da=o(na);ha=l(da,"Actions"),da.forEach(n),w.forEach(n),b.forEach(n),ia=d(P),pa=c(P,"TBODY",{},!1);var ma=o(pa);for(let a=0;a<fa.length;a+=1)fa[a].l(ma);ma.forEach(n),P.forEach(n),this.h()},h(){document.title="3bot Package Manager",x.__value="path",x.value=x.__value,x.selected=!0,V.__value="git_url",V.value=V.__value,void 0===a.method&&b(()=>a.select_change_handler.call(N)),h(N,"class","custom-select mr-sm-3"),h(N,"id","inlineFormCustomSelect"),h(B,"class","col-auto"),h(G,"type","text"),h(G,"class","form-control"),h(G,"id","inlineFormInputGroup"),h(F,"class","input-group mb-2"),h(j,"class","col-6"),h($,"type","button"),h($,"class","btn btn-primary mb-2"),h(U,"class","col-auto"),h(A,"class","form-row align-items-center"),h(Z,"scope","col"),h(ea,"scope","col"),h(ca,"scope","col"),h(na,"scope","col"),h(Y,"class","table"),f(Y,"margin-top","20px"),ua=[m(N,"change",a.select_change_handler),m(G,"input",a.input_input_handler)]},m(s,r){i(s,t,r),i(s,e,r),p(e,u),i(s,_,r),i(s,I,r),i(s,O,r),i(s,S,r),ga&&ga.m(S,null),p(S,y),p(S,A),p(A,B),p(B,N),p(N,x),p(x,R),p(N,V),p(V,C),v(N,a.method),p(A,M),p(A,j),p(j,F),p(F,G),E(G,a.newPackagePath),p(A,L),p(A,U),p(U,$),p($,J),i(s,K,r),i(s,Y,r),p(Y,q),p(q,z),p(Y,Q),p(Y,W),p(W,X),p(X,Z),p(Z,aa),p(X,ta),p(X,ea),p(ea,sa),p(X,ra),p(X,ca),p(ca,oa),p(X,la),p(X,na),p(na,ha),p(Y,ia),p(Y,pa);for(let a=0;a<fa.length;a+=1)fa[a].m(pa,null)},p(a,t){if(null!=t.lastError?ga?ga.p(a,t):((ga=D(t)).c(),ga.m(S,y)):ga&&(ga.d(1),ga=null),a.method&&v(N,t.method),a.newPackagePath&&G.value!==t.newPackagePath&&E(G,t.newPackagePath),a.packages||a.pkgStatus){let e;for(da=t.packages,e=0;e<da.length;e+=1){const s=w(t,da,e);fa[e]?fa[e].p(a,s):(fa[e]=H(s),fa[e].c(),fa[e].m(pa,null))}for(;e<fa.length;e+=1)fa[e].d(1);fa.length=da.length}},i:k,o:k,d(a){a&&(n(t),n(e),n(_),n(I),n(O),n(S)),ga&&ga.d(),a&&(n(K),n(Y)),P(fa,a),T(ua)}}}function S(a,t,e){const s=new GedisHTTPClient(`${location.protocol}//${location.hostname}/web/gedis/http`);let r="path",c="",o=null,l=[];return _(async()=>{s.executeCommand("package_manager","packages_list").then(a=>{if(!a.ok){let t=new Error(a);throw e("lastError",o=t),t}a.json().then(a=>{e("packages",l=a.packages),e("lastError",o=null)})})}),{method:r,newPackagePath:c,lastError:o,packages:l,pkgStatus:{0:{name:"Init",actions:["delete"]},1:{name:"Installed",actions:["delete","start"]},2:{name:"Running",actions:["delete","stop"]},3:{name:"Halted",actions:["delete","start","disable"]},4:{name:"Disabled",actions:["delete","enable"]},5:{name:"Error",actions:["delete"]}},select_change_handler:function(){r=I(this),e("method",r)},input_input_handler:function(){c=this.value,e("newPackagePath",c)}}}export default class extends a{constructor(a){super(),t(this,a,S,O,e,[])}}
