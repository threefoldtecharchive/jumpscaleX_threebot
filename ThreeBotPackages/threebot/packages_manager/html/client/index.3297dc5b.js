import{S as a,i as e,s as t,e as r,t as s,c,a as o,b as l,d as n,f as h,h as i,j as p,w as d,l as g,m as u,E as f,F as m,G as v,H as E,n as k,I as _,J as P,K as T,L as b,M as w}from"./index.92d55523.js";function I(a,e,t){const r=Object.create(a);return r.pkg=e[t],r}function D(a){var e,t;return{c(){e=r("div"),t=s(a.lastError),this.h()},l(r){e=c(r,"DIV",{class:!0,role:!0},!1);var s=o(e);t=l(s,a.lastError),s.forEach(n),this.h()},h(){h(e,"class","alert alert-danger"),h(e,"role","alert")},m(a,r){i(a,e,r),p(e,t)},p(a,e){a.lastError&&d(t,e.lastError)},d(a){a&&n(e)}}}function H(a){var e,t,f,m,v,E,k,_,P,T,b,w,I,D=a.pkg.name+"",H=a.pkgStatus[a.pkg.status].name+"",O=a.pkg.path+"";return{c(){e=r("tr"),t=r("th"),f=s(D),m=g(),v=r("td"),E=s(H),k=g(),_=r("td"),P=s(O),T=g(),b=r("td"),w=s("aaaa"),I=g(),this.h()},l(a){e=c(a,"TR",{},!1);var r=o(e);t=c(r,"TH",{scope:!0},!1);var s=o(t);f=l(s,D),s.forEach(n),m=u(r),v=c(r,"TD",{},!1);var h=o(v);E=l(h,H),h.forEach(n),k=u(r),_=c(r,"TD",{},!1);var i=o(_);P=l(i,O),i.forEach(n),T=u(r),b=c(r,"TD",{},!1);var p=o(b);w=l(p,"aaaa"),p.forEach(n),I=u(r),r.forEach(n),this.h()},h(){h(t,"scope","row")},m(a,r){i(a,e,r),p(e,t),p(t,f),p(e,m),p(e,v),p(v,E),p(e,k),p(e,_),p(_,P),p(e,T),p(e,b),p(b,w),p(e,I)},p(a,e){a.packages&&D!==(D=e.pkg.name+"")&&d(f,D),a.packages&&H!==(H=e.pkgStatus[e.pkg.status].name+"")&&d(E,H),a.packages&&O!==(O=e.pkg.path+"")&&d(P,O)},d(a){a&&n(e)}}}function O(a){var e,t,d,T,w,O,S,y,A,x,B,N,C,R,V,j,M,F,G,L,U,$,J,K,Y,q,z,Q,W,X,Z,aa,ea,ta,ra,sa,ca,oa,la,na,ha,ia,pa,da,ga=null!=a.lastError&&D(a);let ua=a.packages,fa=[];for(let e=0;e<ua.length;e+=1)fa[e]=H(I(a,ua,e));return{c(){e=g(),t=r("h2"),d=s("3Bot Package Manager"),T=r("br"),w=r("br"),O=g(),S=r("form"),ga&&ga.c(),y=g(),A=r("div"),x=r("div"),B=r("select"),N=r("option"),C=s("path"),R=r("option"),V=s("giturl"),j=g(),M=r("div"),F=r("div"),G=r("input"),L=g(),U=r("div"),$=r("button"),J=s("Add package"),K=g(),Y=r("table"),q=r("caption"),z=s("Packages"),Q=g(),W=r("thead"),X=r("tr"),Z=r("th"),aa=s("Name"),ea=g(),ta=r("th"),ra=s("Status"),sa=g(),ca=r("th"),oa=s("Path"),la=g(),na=r("th"),ha=s("Actions"),ia=g(),pa=r("tbody");for(let a=0;a<fa.length;a+=1)fa[a].c();this.h()},l(a){e=u(a),t=c(a,"H2",{},!1);var r=o(t);d=l(r,"3Bot Package Manager"),r.forEach(n),T=c(a,"BR",{},!1),o(T).forEach(n),w=c(a,"BR",{},!1),o(w).forEach(n),O=u(a),S=c(a,"FORM",{},!1);var s=o(S);ga&&ga.l(s),y=u(s),A=c(s,"DIV",{class:!0},!1);var h=o(A);x=c(h,"DIV",{class:!0},!1);var i=o(x);B=c(i,"SELECT",{class:!0,id:!0},!1);var p=o(B);N=c(p,"OPTION",{value:!0,selected:!0},!1);var g=o(N);C=l(g,"path"),g.forEach(n),R=c(p,"OPTION",{value:!0},!1);var f=o(R);V=l(f,"giturl"),f.forEach(n),p.forEach(n),i.forEach(n),j=u(h),M=c(h,"DIV",{class:!0},!1);var m=o(M);F=c(m,"DIV",{class:!0},!1);var v=o(F);G=c(v,"INPUT",{type:!0,class:!0,id:!0},!1),o(G).forEach(n),v.forEach(n),m.forEach(n),L=u(h),U=c(h,"DIV",{class:!0},!1);var E=o(U);$=c(E,"BUTTON",{type:!0,class:!0},!1);var k=o($);J=l(k,"Add package"),k.forEach(n),E.forEach(n),h.forEach(n),s.forEach(n),K=u(a),Y=c(a,"TABLE",{class:!0,style:!0},!1);var _=o(Y);q=c(_,"CAPTION",{},!1);var P=o(q);z=l(P,"Packages"),P.forEach(n),Q=u(_),W=c(_,"THEAD",{},!1);var b=o(W);X=c(b,"TR",{},!1);var I=o(X);Z=c(I,"TH",{scope:!0},!1);var D=o(Z);aa=l(D,"Name"),D.forEach(n),ea=u(I),ta=c(I,"TH",{scope:!0},!1);var H=o(ta);ra=l(H,"Status"),H.forEach(n),sa=u(I),ca=c(I,"TH",{scope:!0},!1);var da=o(ca);oa=l(da,"Path"),da.forEach(n),la=u(I),na=c(I,"TH",{scope:!0},!1);var ua=o(na);ha=l(ua,"Actions"),ua.forEach(n),I.forEach(n),b.forEach(n),ia=u(_),pa=c(_,"TBODY",{},!1);var ma=o(pa);for(let a=0;a<fa.length;a+=1)fa[a].l(ma);ma.forEach(n),_.forEach(n),this.h()},h(){document.title="3bot Package Manager",N.__value="path",N.value=N.__value,N.selected=!0,R.__value="git_url",R.value=R.__value,void 0===a.method&&b(()=>a.select_change_handler.call(B)),h(B,"class","custom-select mr-sm-3"),h(B,"id","inlineFormCustomSelect"),h(x,"class","col-auto"),h(G,"type","text"),h(G,"class","form-control"),h(G,"id","inlineFormInputGroup"),h(F,"class","input-group mb-2"),h(M,"class","col-6"),h($,"type","button"),h($,"class","btn btn-prweblibs/gedis/gedis_http.jsimary mb-2"),h(U,"class","col-auto"),h(A,"class","form-row align-items-center"),h(Z,"scope","col"),h(ta,"scope","col"),h(ca,"scope","col"),h(na,"scope","col"),h(Y,"class","table"),f(Y,"margin-top","20px"),da=[m(B,"change",a.select_change_handler),m(G,"input",a.input_input_handler),m($,"click",a.click_handler)]},m(r,s){i(r,e,s),i(r,t,s),p(t,d),i(r,T,s),i(r,w,s),i(r,O,s),i(r,S,s),ga&&ga.m(S,null),p(S,y),p(S,A),p(A,x),p(x,B),p(B,N),p(N,C),p(B,R),p(R,V),v(B,a.method),p(A,j),p(A,M),p(M,F),p(F,G),E(G,a.newPackagePath),p(A,L),p(A,U),p(U,$),p($,J),i(r,K,s),i(r,Y,s),p(Y,q),p(q,z),p(Y,Q),p(Y,W),p(W,X),p(X,Z),p(Z,aa),p(X,ea),p(X,ta),p(ta,ra),p(X,sa),p(X,ca),p(ca,oa),p(X,la),p(X,na),p(na,ha),p(Y,ia),p(Y,pa);for(let a=0;a<fa.length;a+=1)fa[a].m(pa,null)},p(a,e){if(null!=e.lastError?ga?ga.p(a,e):((ga=D(e)).c(),ga.m(S,y)):ga&&(ga.d(1),ga=null),a.method&&v(B,e.method),a.newPackagePath&&G.value!==e.newPackagePath&&E(G,e.newPackagePath),a.packages||a.pkgStatus){let t;for(ua=e.packages,t=0;t<ua.length;t+=1){const r=I(e,ua,t);fa[t]?fa[t].p(a,r):(fa[t]=H(r),fa[t].c(),fa[t].m(pa,null))}for(;t<fa.length;t+=1)fa[t].d(1);fa.length=ua.length}},i:k,o:k,d(a){a&&(n(e),n(t),n(T),n(w),n(O),n(S)),ga&&ga.d(),a&&(n(K),n(Y)),_(fa,a),P(da)}}}function S(a,e,t){const r=new GedisHTTPClient(`${location.protocol}//${location.hostname}/web/gedis/http`);let s="path",c="",o=null,l=[];function n(){r.executeCommand("package_manager","packages_list").then(a=>{if(!a.ok){let e=new Error(a);throw t("lastError",o=e),e}a.json().then(a=>{t("packages",l=a.packages),t("lastError",o=null)})})}function h(){let a={};a[s]=c,r.executeCommand("package_manager","package_add",a).then(a=>{a.ok?(t("lastError",o=null),n()):a.error().then(a=>{console.log("error",a)})})}T(async()=>{n()});return{method:s,newPackagePath:c,lastError:o,packages:l,pkgStatus:{0:{name:"Init",actions:["delete"]},1:{name:"Installed",actions:["delete","start"]},2:{name:"Running",actions:["delete","stop"]},3:{name:"Halted",actions:["delete","start","disable"]},4:{name:"Disabled",actions:["delete","enable"]},5:{name:"Error",actions:["delete"]}},packageAdd:h,select_change_handler:function(){s=w(this),t("method",s)},input_input_handler:function(){c=this.value,t("newPackagePath",c)},click_handler:()=>h()}}export default class extends a{constructor(a){super(),e(this,a,S,O,t,[])}}
