import{S as a,i as t,s as e,e as r,t as s,c,a as o,b as l,d as n,f as h,h as i,j as p,w as d,l as g,m as u,E as f,F as m,G as E,H as v,n as k,I as _,J as P,K as T,L as b,M as w}from"./index.92d55523.js";function I(a,t,e){const r=Object.create(a);return r.pkg=t[e],r}function D(a){var t,e;return{c(){t=r("div"),e=s(a.lastError),this.h()},l(r){t=c(r,"DIV",{class:!0,role:!0},!1);var s=o(t);e=l(s,a.lastError),s.forEach(n),this.h()},h(){h(t,"class","alert alert-danger"),h(t,"role","alert")},m(a,r){i(a,t,r),p(t,e)},p(a,t){a.lastError&&d(e,t.lastError)},d(a){a&&n(t)}}}function H(a){var t,e,f,m,E,v,k,_,P,T,b,w,I,D=a.pkg.name+"",H=a.pkgStatus[a.pkg.status].name+"",O=a.pkg.path+"";return{c(){t=r("tr"),e=r("th"),f=s(D),m=g(),E=r("td"),v=s(H),k=g(),_=r("td"),P=s(O),T=g(),b=r("td"),w=s("aaaa"),I=g(),this.h()},l(a){t=c(a,"TR",{},!1);var r=o(t);e=c(r,"TH",{scope:!0},!1);var s=o(e);f=l(s,D),s.forEach(n),m=u(r),E=c(r,"TD",{},!1);var h=o(E);v=l(h,H),h.forEach(n),k=u(r),_=c(r,"TD",{},!1);var i=o(_);P=l(i,O),i.forEach(n),T=u(r),b=c(r,"TD",{},!1);var p=o(b);w=l(p,"aaaa"),p.forEach(n),I=u(r),r.forEach(n),this.h()},h(){h(e,"scope","row")},m(a,r){i(a,t,r),p(t,e),p(e,f),p(t,m),p(t,E),p(E,v),p(t,k),p(t,_),p(_,P),p(t,T),p(t,b),p(b,w),p(t,I)},p(a,t){a.packages&&D!==(D=t.pkg.name+"")&&d(f,D),a.packages&&H!==(H=t.pkgStatus[t.pkg.status].name+"")&&d(v,H),a.packages&&O!==(O=t.pkg.path+"")&&d(P,O)},d(a){a&&n(t)}}}function O(a){var t,e,d,T,w,O,S,x,y,A,B,N,C,R,V,j,M,F,G,L,U,$,J,K,Y,q,z,Q,W,X,Z,aa,ta,ea,ra,sa,ca,oa,la,na,ha,ia,pa,da,ga=null!=a.lastError&&D(a);let ua=a.packages,fa=[];for(let t=0;t<ua.length;t+=1)fa[t]=H(I(a,ua,t));return{c(){t=g(),e=r("h2"),d=s("3Bot Package Manager"),T=r("br"),w=r("br"),O=g(),S=r("form"),ga&&ga.c(),x=g(),y=r("div"),A=r("div"),B=r("select"),N=r("option"),C=s("path"),R=r("option"),V=s("giturl"),j=g(),M=r("div"),F=r("div"),G=r("input"),L=g(),U=r("div"),$=r("button"),J=s("Add package"),K=g(),Y=r("table"),q=r("caption"),z=s("Packages"),Q=g(),W=r("thead"),X=r("tr"),Z=r("th"),aa=s("Name"),ta=g(),ea=r("th"),ra=s("Status"),sa=g(),ca=r("th"),oa=s("Path"),la=g(),na=r("th"),ha=s("Actions"),ia=g(),pa=r("tbody");for(let a=0;a<fa.length;a+=1)fa[a].c();this.h()},l(a){t=u(a),e=c(a,"H2",{},!1);var r=o(e);d=l(r,"3Bot Package Manager"),r.forEach(n),T=c(a,"BR",{},!1),o(T).forEach(n),w=c(a,"BR",{},!1),o(w).forEach(n),O=u(a),S=c(a,"FORM",{},!1);var s=o(S);ga&&ga.l(s),x=u(s),y=c(s,"DIV",{class:!0},!1);var h=o(y);A=c(h,"DIV",{class:!0},!1);var i=o(A);B=c(i,"SELECT",{class:!0,id:!0},!1);var p=o(B);N=c(p,"OPTION",{value:!0,selected:!0},!1);var g=o(N);C=l(g,"path"),g.forEach(n),R=c(p,"OPTION",{value:!0},!1);var f=o(R);V=l(f,"giturl"),f.forEach(n),p.forEach(n),i.forEach(n),j=u(h),M=c(h,"DIV",{class:!0},!1);var m=o(M);F=c(m,"DIV",{class:!0},!1);var E=o(F);G=c(E,"INPUT",{type:!0,class:!0,id:!0},!1),o(G).forEach(n),E.forEach(n),m.forEach(n),L=u(h),U=c(h,"DIV",{class:!0},!1);var v=o(U);$=c(v,"BUTTON",{type:!0,class:!0},!1);var k=o($);J=l(k,"Add package"),k.forEach(n),v.forEach(n),h.forEach(n),s.forEach(n),K=u(a),Y=c(a,"TABLE",{class:!0,style:!0},!1);var _=o(Y);q=c(_,"CAPTION",{},!1);var P=o(q);z=l(P,"Packages"),P.forEach(n),Q=u(_),W=c(_,"THEAD",{},!1);var b=o(W);X=c(b,"TR",{},!1);var I=o(X);Z=c(I,"TH",{scope:!0},!1);var D=o(Z);aa=l(D,"Name"),D.forEach(n),ta=u(I),ea=c(I,"TH",{scope:!0},!1);var H=o(ea);ra=l(H,"Status"),H.forEach(n),sa=u(I),ca=c(I,"TH",{scope:!0},!1);var da=o(ca);oa=l(da,"Path"),da.forEach(n),la=u(I),na=c(I,"TH",{scope:!0},!1);var ua=o(na);ha=l(ua,"Actions"),ua.forEach(n),I.forEach(n),b.forEach(n),ia=u(_),pa=c(_,"TBODY",{},!1);var ma=o(pa);for(let a=0;a<fa.length;a+=1)fa[a].l(ma);ma.forEach(n),_.forEach(n),this.h()},h(){document.title="3bot Package Manager",N.__value="path",N.value=N.__value,N.selected=!0,R.__value="git_url",R.value=R.__value,void 0===a.method&&b(()=>a.select_change_handler.call(B)),h(B,"class","custom-select mr-sm-3"),h(B,"id","inlineFormCustomSelect"),h(A,"class","col-auto"),h(G,"type","text"),h(G,"class","form-control"),h(G,"id","inlineFormInputGroup"),h(F,"class","input-group mb-2"),h(M,"class","col-6"),h($,"type","button"),h($,"class","btn btn-prweblibs/gedis/gedis_http.jsimary mb-2"),h(U,"class","col-auto"),h(y,"class","form-row align-items-center"),h(Z,"scope","col"),h(ea,"scope","col"),h(ca,"scope","col"),h(na,"scope","col"),h(Y,"class","table"),f(Y,"margin-top","20px"),da=[m(B,"change",a.select_change_handler),m(G,"input",a.input_input_handler),m($,"click",a.click_handler)]},m(r,s){i(r,t,s),i(r,e,s),p(e,d),i(r,T,s),i(r,w,s),i(r,O,s),i(r,S,s),ga&&ga.m(S,null),p(S,x),p(S,y),p(y,A),p(A,B),p(B,N),p(N,C),p(B,R),p(R,V),E(B,a.method),p(y,j),p(y,M),p(M,F),p(F,G),v(G,a.newPackagePath),p(y,L),p(y,U),p(U,$),p($,J),i(r,K,s),i(r,Y,s),p(Y,q),p(q,z),p(Y,Q),p(Y,W),p(W,X),p(X,Z),p(Z,aa),p(X,ta),p(X,ea),p(ea,ra),p(X,sa),p(X,ca),p(ca,oa),p(X,la),p(X,na),p(na,ha),p(Y,ia),p(Y,pa);for(let a=0;a<fa.length;a+=1)fa[a].m(pa,null)},p(a,t){if(null!=t.lastError?ga?ga.p(a,t):((ga=D(t)).c(),ga.m(S,x)):ga&&(ga.d(1),ga=null),a.method&&E(B,t.method),a.newPackagePath&&G.value!==t.newPackagePath&&v(G,t.newPackagePath),a.packages||a.pkgStatus){let e;for(ua=t.packages,e=0;e<ua.length;e+=1){const r=I(t,ua,e);fa[e]?fa[e].p(a,r):(fa[e]=H(r),fa[e].c(),fa[e].m(pa,null))}for(;e<fa.length;e+=1)fa[e].d(1);fa.length=ua.length}},i:k,o:k,d(a){a&&(n(t),n(e),n(T),n(w),n(O),n(S)),ga&&ga.d(),a&&(n(K),n(Y)),_(fa,a),P(da)}}}function S(a,t,e){const r=new GedisHTTPClient(`${location.protocol}//${location.hostname}/web/gedis/http`);let s="path",c="",o=null,l=[];function n(){r.executeCommand("package_manager","packages_list").then(a=>{if(!a.ok){let t=new Error(a);throw e("lastError",o=t),t}a.json().then(a=>{e("packages",l=a.packages),e("lastError",o=null)})})}function h(){let a={};a[s]=c,r.executeCommand("package_manager","package_add",a).then(a=>{res.ok?(e("lastError",o=null),n()):res.text().then(a=>{throw new Error(a)})}).catch(a=>{console.log("caught it!",a)})}T(async()=>{n()});return{method:s,newPackagePath:c,lastError:o,packages:l,pkgStatus:{0:{name:"Init",actions:["delete"]},1:{name:"Installed",actions:["delete","start"]},2:{name:"Running",actions:["delete","stop"]},3:{name:"Halted",actions:["delete","start","disable"]},4:{name:"Disabled",actions:["delete","enable"]},5:{name:"Error",actions:["delete"]}},packageAdd:h,select_change_handler:function(){s=w(this),e("method",s)},input_input_handler:function(){c=this.value,e("newPackagePath",c)},click_handler:()=>h()}}export default class extends a{constructor(a){super(),t(this,a,S,O,e,[])}}
