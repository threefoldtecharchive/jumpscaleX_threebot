var app=function(){"use strict";function t(){}function e(t){return t()}function r(){return Object.create(null)}function n(t){t.forEach(e)}function s(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function o(t,e){t.appendChild(e)}function c(t,e,r){t.insertBefore(e,r||null)}function l(t){t.parentNode.removeChild(t)}function i(t,e){for(let r=0;r<t.length;r+=1)t[r]&&t[r].d(e)}function u(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function f(){return d(" ")}function h(){return d("")}function p(t,e,r,n){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r,n)}function k(t,e,r){null==r?t.removeAttribute(e):t.setAttribute(e,r)}function m(t,e){e=""+e,t.data!==e&&(t.data=e)}function g(t,e,r){t.classList[r?"add":"remove"](e)}let w;function v(t){w=t}function b(t){(function(){if(!w)throw new Error("Function called outside component initialization");return w})().$$.on_mount.push(t)}const T=[],$=[],E=[],R=[],_=Promise.resolve();let y=!1;function N(t){E.push(t)}function x(){const t=new Set;do{for(;T.length;){const t=T.shift();v(t),L(t.$$)}for(;$.length;)$.pop()();for(let e=0;e<E.length;e+=1){const r=E[e];t.has(r)||(r(),t.add(r))}E.length=0}while(T.length);for(;R.length;)R.pop()();y=!1}function L(t){t.fragment&&(t.update(t.dirty),n(t.before_update),t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_update.forEach(N))}const A=new Set;let O;function F(t,e){t&&t.i&&(A.delete(t),t.i(e))}function S(t,e,r,n){if(t&&t.o){if(A.has(t))return;A.add(t),O.c.push(()=>{A.delete(t),n&&(r&&t.d(1),n())}),t.o(e)}}function U(t,r,a){const{fragment:o,on_mount:c,on_destroy:l,after_update:i}=t.$$;o.m(r,a),N(()=>{const r=c.map(e).filter(s);l?l.push(...r):n(r),t.$$.on_mount=[]}),i.forEach(N)}function C(t,e){t.$$.fragment&&(n(t.$$.on_destroy),t.$$.fragment.d(e),t.$$.on_destroy=t.$$.fragment=null,t.$$.ctx={})}function H(t,e){t.$$.dirty||(T.push(t),y||(y=!0,_.then(x)),t.$$.dirty=r()),t.$$.dirty[e]=!0}function I(e,s,a,o,c,l){const i=w;v(e);const u=s.props||{},d=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:c,bound:r(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(i?i.$$.context:[]),callbacks:r(),dirty:null};let f=!1;var h;d.ctx=a?a(e,u,(t,r)=>{d.ctx&&c(d.ctx[t],d.ctx[t]=r)&&(d.bound[t]&&d.bound[t](r),f&&H(e,t))}):u,d.update(),f=!0,n(d.before_update),d.fragment=o(d.ctx),s.target&&(s.hydrate?d.fragment.l((h=s.target,Array.from(h.childNodes))):d.fragment.c(),s.intro&&F(e.$$.fragment),U(e,s.target,s.anchor),x()),v(i)}class D{$destroy(){C(this,1),this.$destroy=t}$on(t,e){const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(e),()=>{const t=r.indexOf(e);-1!==t&&r.splice(t,1)}}$set(){}}const W=[];function j(t,e){return{subscribe:G(t,e).subscribe}}function G(e,r=t){let n;const s=[];function o(t){if(a(e,t)&&(e=t,n)){const t=!W.length;for(let t=0;t<s.length;t+=1){const r=s[t];r[1](),W.push(r,e)}if(t){for(let t=0;t<W.length;t+=2)W[t][0](W[t+1]);W.length=0}}}return{set:o,update:function(t){o(t(e))},subscribe:function(a,c=t){const l=[a,c];return s.push(l),1===s.length&&(n=r(o)||t),a(e),()=>{const t=s.indexOf(l);-1!==t&&s.splice(t,1),0===s.length&&(n(),n=null)}}}}function M(e,r,a){const o=!Array.isArray(e),c=o?[e]:e,l=r.length<2;return j(a,e=>{let a=!1;const i=[];let u=0,d=t;const f=()=>{if(u)return;d();const n=r(o?i[0]:i,e);l?e(n):d=s(n)?n:t},h=c.map((t,e)=>t.subscribe(t=>{i[e]=t,u&=~(1<<e),a&&f()},()=>{u|=1<<e}));return a=!0,f(),function(){n(h),d()}})}function P(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var r,n,s,a,o=[],c="",l=t.split("/");for(l[0]||l.shift();s=l.shift();)"*"===(r=s[0])?(o.push("wild"),c+="/(.*)"):":"===r?(n=s.indexOf("?",1),a=s.indexOf(".",1),o.push(s.substring(1,~n?n:~a?a:s.length)),c+=~n&&!~a?"(?:/([^/]+?))?":"/([^/]+?)",~a&&(c+=(~n?"?":"")+"\\"+s.substring(a))):c+="/"+s;return{keys:o,pattern:new RegExp("^"+c+(e?"(?=$|/)":"/?$"),"i")}}function q(t){var e,r,s=t.component;function a(t){return{props:{params:t.componentParams}}}if(s)var o=new s(a(t));return{c(){o&&o.$$.fragment.c(),e=h()},m(t,n){o&&U(o,t,n),c(t,e,n),r=!0},p(t,r){var c={};if(t.componentParams&&(c.params=r.componentParams),s!==(s=r.component)){if(o){O={r:0,c:[],p:O};const t=o;S(t.$$.fragment,1,0,()=>{C(t,1)}),O.r||n(O.c),O=O.p}s?((o=new s(a(r))).$$.fragment.c(),F(o.$$.fragment,1),U(o,e.parentNode,e)):o=null}else s&&o.$set(c)},i(t){r||(o&&F(o.$$.fragment,t),r=!0)},o(t){o&&S(o.$$.fragment,t),r=!1},d(t){t&&l(e),o&&C(o,t)}}}function J(){const t=window.location.href.indexOf("#/");let e=t>-1?window.location.href.substr(t+1):"/";const r=e.indexOf("?");let n="";return r>-1&&(n=e.substr(r+1),e=e.substr(0,r)),{location:e,querystring:n}}const z=j(J(),function(t){const e=()=>{t(J())};return window.addEventListener("hashchange",e,!1),function(){window.removeEventListener("hashchange",e,!1)}});M(z,t=>t.location),M(z,t=>t.querystring);function K(t){if(!t||!t.tagName||"a"!=t.tagName.toLowerCase())throw Error('Action "link" can only be used with <a> tags');const e=t.getAttribute("href");if(!e||e.length<1||"/"!=e.charAt(0))throw Error('Invalid value for "href" attribute');t.addEventListener("click",t=>{let e;t.preventDefault();let r=t.target;for(;null===(e=r.getAttribute("href"));)if(null===(r=r.parentElement))throw Error("Could not find corresponding href value");return function(t){if(!t||t.length<1||"/"!=t.charAt(0))throw Error("Invalid parameter location");setTimeout(()=>{window.location.hash="#"+t},0)}(e),!1})}function B(t,e,r){let n;!function(t,e,r){t.$$.on_destroy.push(function(t,e){const r=t.subscribe(e);return r.unsubscribe?()=>r.unsubscribe():r}(e,r))}(t,z,t=>{r("$loc",n=t)});let{routes:s={}}=e;class a{constructor(t,e){if(!t||"string"==typeof t&&(t.length<1||"/"!=t.charAt(0)&&"*"!=t.charAt(0))||"object"==typeof t&&!(t instanceof RegExp))throw Error('Invalid value for "path" argument');const{pattern:r,keys:n}=P(t);this.path=t,this.component=e,this._pattern=r,this._keys=n}match(t){const e=this._pattern.exec(t);if(null===e)return null;if(!1===this._keys)return e;const r={};let n=0;for(;n<this._keys.length;)r[this._keys[n]]=e[++n]||null;return r}}const o=s instanceof Map?s:Object.entries(s),c=[];for(const[t,e]of o)c.push(new a(t,e));let l=null,i={};return t.$set=(t=>{"routes"in t&&r("routes",s=t.routes)}),t.$$.update=((t={component:1,$loc:1})=>{if(t.component||t.$loc){r("component",l=null);let t=0;for(;!l&&t<c.length;){const e=c[t].match(n.location);e&&(r("component",l=c[t].component),r("componentParams",i=e)),t++}}}),{routes:s,component:l,componentParams:i}}class Q extends D{constructor(t){super(),I(this,t,B,q,a,["routes"])}}function V(t,e,r){const n=Object.create(t);return n.worker=e[r],n.i=r,n}function X(e){var r;return{c(){(r=u("div")).innerHTML='<img src="/img/loader.gif" class="img-fluid" alt="Responsive image">',k(r,"class","text-center")},m(t,e){c(t,r,e)},p:t,d(t){t&&l(r)}}}function Y(t){for(var e,r,n,s,a,d,h,p=t.workers,m=[],g=0;g<p.length;g+=1)m[g]=nt(V(t,p,g));return{c(){e=u("div"),r=u("div"),n=u("div"),s=u("table"),(a=u("thead")).innerHTML='<tr><th scope="col">#</th> <th scope="col">State</th> <th scope="col">Halt</th> <th scope="col">Pid</th> <th scope="col">Current Job</th> <th scope="col">Last Update</th> <th scope="col">Time Start</th> <th scope="col">Timeout</th> <th scope="col">Type</th> <th scope="col">Error</th></tr>',d=f(),h=u("tbody");for(var t=0;t<m.length;t+=1)m[t].c();k(s,"class","table table-striped"),k(n,"class","col-xs-12"),k(r,"class","row")},m(t,l){c(t,e,l),o(e,r),o(r,n),o(n,s),o(s,a),o(s,d),o(s,h);for(var i=0;i<m.length;i+=1)m[i].m(h,null)},p(t,e){if(t.workers||t.state){p=e.workers;for(var r=0;r<p.length;r+=1){const n=V(e,p,r);m[r]?m[r].p(t,n):(m[r]=nt(n),m[r].c(),m[r].m(h,null))}for(;r<m.length;r+=1)m[r].d(1);m.length=p.length}},d(t){t&&l(e),i(m,t)}}}function Z(t){var e,r,n,s=t.worker.state+"";return{c(){e=u("td"),r=u("span"),n=d(s),k(r,"class","label label-pill label-warning")},m(t,s){c(t,e,s),o(e,r),o(r,n)},p(t,e){t.workers&&s!==(s=e.worker.state+"")&&m(n,s)},d(t){t&&l(e)}}}function tt(t){var e,r,n,s=t.worker.state+"";return{c(){e=u("td"),r=u("span"),n=d(s),k(r,"class","label label-pill label-primary")},m(t,s){c(t,e,s),o(e,r),o(r,n)},p(t,e){t.workers&&s!==(s=e.worker.state+"")&&m(n,s)},d(t){t&&l(e)}}}function et(t){var e,r,n,s=t.worker.state+"";return{c(){e=u("td"),r=u("span"),n=d(s),k(r,"class","label label-pill label-danger")},m(t,s){c(t,e,s),o(e,r),o(r,n)},p(t,e){t.workers&&s!==(s=e.worker.state+"")&&m(n,s)},d(t){t&&l(e)}}}function rt(t){var e,r,n,s=t.worker.state+"";return{c(){e=u("td"),r=u("span"),n=d(s),k(r,"class","label label-pill label-success")},m(t,s){c(t,e,s),o(e,r),o(r,n)},p(t,e){t.workers&&s!==(s=e.worker.state+"")&&m(n,s)},d(t){t&&l(e)}}}function nt(t){var e,r,n,s,a,i,h,p,k,g,w,v,b,T,$,E,R,_,y,N,x,L,A,O,F,S,U,C,H,I=t.worker.id+"",D=t.worker.halt+"",W=t.worker.pid+"",j=t.worker.current_job+"",G=t.worker.last_update+"",M=t.worker.time_start+"",P=t.worker.timeout+"",q=t.worker.type+"",J=t.worker.error+"";function z(t){return t.worker.state==t.state.RESULT?rt:t.worker.state==t.state.ERROR?et:t.worker.state==t.state.NEW?tt:Z}var K=z(t),B=K(t);return{c(){e=u("tr"),r=u("td"),n=d(I),s=f(),B.c(),a=f(),i=u("td"),h=d(D),p=f(),k=u("td"),g=d(W),w=f(),v=u("td"),b=d(j),T=f(),$=u("td"),E=d(G),R=f(),_=u("td"),y=d(M),N=f(),x=u("td"),L=d(P),A=f(),O=u("td"),F=d(q),S=f(),U=u("td"),C=d(J),H=f()},m(t,l){c(t,e,l),o(e,r),o(r,n),o(e,s),B.m(e,null),o(e,a),o(e,i),o(i,h),o(e,p),o(e,k),o(k,g),o(e,w),o(e,v),o(v,b),o(e,T),o(e,$),o($,E),o(e,R),o(e,_),o(_,y),o(e,N),o(e,x),o(x,L),o(e,A),o(e,O),o(O,F),o(e,S),o(e,U),o(U,C),o(e,H)},p(t,r){t.workers&&I!==(I=r.worker.id+"")&&m(n,I),K===(K=z(r))&&B?B.p(t,r):(B.d(1),(B=K(r))&&(B.c(),B.m(e,a))),t.workers&&D!==(D=r.worker.halt+"")&&m(h,D),t.workers&&W!==(W=r.worker.pid+"")&&m(g,W),t.workers&&j!==(j=r.worker.current_job+"")&&m(b,j),t.workers&&G!==(G=r.worker.last_update+"")&&m(E,G),t.workers&&M!==(M=r.worker.time_start+"")&&m(y,M),t.workers&&P!==(P=r.worker.timeout+"")&&m(L,P),t.workers&&q!==(q=r.worker.type+"")&&m(F,q),t.workers&&J!==(J=r.worker.error+"")&&m(C,J)},d(t){t&&l(e),B.d()}}}function st(e){var r,n,s,a,i,p,k=e.workers.length+"";function g(t){return t.workers&&t.workers.length>0?Y:X}var w=g(e),v=w(e);return{c(){r=u("h1"),n=d("Workers ("),s=d(k),a=d(")"),i=f(),v.c(),p=h()},m(t,e){c(t,r,e),o(r,n),o(r,s),o(r,a),c(t,i,e),v.m(t,e),c(t,p,e)},p(t,e){t.workers&&k!==(k=e.workers.length+"")&&m(s,k),w===(w=g(e))&&v?v.p(t,e):(v.d(1),(v=w(e))&&(v.c(),v.m(p.parentNode,p)))},i:t,o:t,d(t){t&&(l(r),l(i)),v.d(t),t&&l(p)}}}function at(t,e,r){const n={RESULT:"OK",ERROR:"ERROR",NEW:"NEW",HALTED:"HALTED"};let s=[];return b(async()=>{GEDIS_CLIENT.execute(info={namespace:"default",actor:"myjobs",command:"list_workers"}).then(function(t){t&&(console.log(`DATA : ${t}`),r("workers",s=JSON.parse(t).workers),s.forEach(t=>{t.state=t.state.toUpperCase()}),s.forEach(t=>{t.state==n.RESULT||t.state==n.ERROR||(t.state,n.NEW)}))})}),{state:n,workers:s}}class ot extends D{constructor(t){super(),I(this,t,at,st,a,[])}}function ct(t,e,r){const n=Object.create(t);return n.task=e[r],n.i=r,n}function lt(t){var e,r,n,s,a,i,h,p,g,w,v,b,T,$,E,R,_,y,N,x,L,A,O,F=t.allTasks.length+"",S=t.counters.success+"",U=t.counters.error+"",C=t.counters.new+"",H=t.counters.running+"",I=t.counters.halted+"";return{c(){e=u("div"),r=u("div"),n=u("table"),(s=u("thead")).innerHTML='<tr><th class="text-center" scope="col">Total Tasks</th> <th class="text-center" scope="col">Success Tasks</th> <th class="text-center" scope="col">Failure Tasks</th> <th class="text-center" scope="col">New Tasks</th> <th class="text-center" scope="col">Running Tasks</th> <th class="text-center" scope="col">Halted Tasks</th></tr>',a=f(),i=u("tbody"),h=u("td"),p=d(F),g=f(),w=u("td"),v=d(S),b=f(),T=u("td"),$=d(U),E=f(),R=u("td"),_=d(C),y=f(),N=u("td"),x=d(H),L=f(),A=u("td"),O=d(I),k(i,"class","text-center"),k(n,"class","table table-striped"),k(r,"class","col-xs-12"),k(e,"class","row mt-3 svelte-j0whez")},m(t,l){c(t,e,l),o(e,r),o(r,n),o(n,s),o(n,a),o(n,i),o(i,h),o(h,p),o(i,g),o(i,w),o(w,v),o(i,b),o(i,T),o(T,$),o(i,E),o(i,R),o(R,_),o(i,y),o(i,N),o(N,x),o(i,L),o(i,A),o(A,O)},p(t,e){t.allTasks&&F!==(F=e.allTasks.length+"")&&m(p,F),t.counters&&S!==(S=e.counters.success+"")&&m(v,S),t.counters&&U!==(U=e.counters.error+"")&&m($,U),t.counters&&C!==(C=e.counters.new+"")&&m(_,C),t.counters&&H!==(H=e.counters.running+"")&&m(x,H),t.counters&&I!==(I=e.counters.halted+"")&&m(O,I)},d(t){t&&l(e)}}}function it(e){var r;return{c(){(r=u("div")).innerHTML='<img src="/img/loader.gif" class="img-fluid" alt="Responsive image">',k(r,"class","text-center")},m(t,e){c(t,r,e)},p:t,d(t){t&&l(r)}}}function ut(t){var e,r,n;function s(t){return 1!=t.isError?ft:dt}var a=s(t),i=a(t);return{c(){e=u("div"),r=u("div"),n=u("div"),i.c(),k(n,"class","col-xs-12"),k(r,"class","row")},m(t,s){c(t,e,s),o(e,r),o(r,n),i.m(n,null)},p(t,e){a===(a=s(e))&&i?i.p(t,e):(i.d(1),(i=a(e))&&(i.c(),i.m(n,null)))},d(t){t&&l(e),i.d()}}}function dt(e){var r;return{c(){(r=u("h3")).textContent="There is no worker with this ID"},m(t,e){c(t,r,e)},p:t,d(t){t&&l(r)}}}function ft(t){for(var e,r,n,s,a=t.filteredTasks(),d=[],h=0;h<a.length;h+=1)d[h]=wt(ct(t,a,h));return{c(){e=u("table"),(r=u("thead")).innerHTML='<tr><th scope="col">#</th> <th scope="col">Id</th> <th scope="col">Time Start</th> <th scope="col">Time Stop</th> <th scope="col">State</th> <th scope="col">Timeout</th> <th scope="col">Action</th> <th scope="col">args</th> <th scope="col">kwargs</th> <th scope="col">Result</th> <th scope="col">Error</th></tr>',n=f(),s=u("tbody");for(var t=0;t<d.length;t+=1)d[t].c();k(e,"class","table table-striped")},m(t,a){c(t,e,a),o(e,r),o(e,n),o(e,s);for(var l=0;l<d.length;l+=1)d[l].m(s,null)},p(t,e){if(t.filteredTasks||t.state){a=e.filteredTasks();for(var r=0;r<a.length;r+=1){const n=ct(e,a,r);d[r]?d[r].p(t,n):(d[r]=wt(n),d[r].c(),d[r].m(s,null))}for(;r<d.length;r+=1)d[r].d(1);d.length=a.length}},d(t){t&&l(e),i(d,t)}}}function ht(t){var e,r,n,s=t.task.state+"";return{c(){e=u("td"),r=u("span"),n=d(s),k(r,"class","label label-pill label-info")},m(t,s){c(t,e,s),o(e,r),o(r,n)},p(t,e){t.filteredTasks&&s!==(s=e.task.state+"")&&m(n,s)},d(t){t&&l(e)}}}function pt(t){var e,r,n,s=t.task.state+"";return{c(){e=u("td"),r=u("span"),n=d(s),k(r,"class","label label-pill label-warning")},m(t,s){c(t,e,s),o(e,r),o(r,n)},p(t,e){t.filteredTasks&&s!==(s=e.task.state+"")&&m(n,s)},d(t){t&&l(e)}}}function kt(t){var e,r,n,s=t.task.state+"";return{c(){e=u("td"),r=u("span"),n=d(s),k(r,"class","label label-pill label-primary")},m(t,s){c(t,e,s),o(e,r),o(r,n)},p(t,e){t.filteredTasks&&s!==(s=e.task.state+"")&&m(n,s)},d(t){t&&l(e)}}}function mt(t){var e,r,n,s=t.task.state+"";return{c(){e=u("td"),r=u("span"),n=d(s),k(r,"class","label label-pill label-danger")},m(t,s){c(t,e,s),o(e,r),o(r,n)},p(t,e){t.filteredTasks&&s!==(s=e.task.state+"")&&m(n,s)},d(t){t&&l(e)}}}function gt(t){var e,r,n,s=t.task.state+"";return{c(){e=u("td"),r=u("span"),n=d(s),k(r,"class","label label-pill label-success")},m(t,s){c(t,e,s),o(e,r),o(r,n)},p(t,e){t.filteredTasks&&s!==(s=e.task.state+"")&&m(n,s)},d(t){t&&l(e)}}}function wt(t){var e,r,n,s,a,i,h,p,g,w,v,b,T,$,E,R,_,y,N,x,L,A,O,F,S,U,C,H,I,D,W,j,G=t.i+1+"",M=t.task.id+"",P=t.task.time_start+"",q=t.task.time_stop+"",J=t.task.timeout+"",z=t.task.action_id+"",K=t.task.args+"",B=t.task.kwargs+"",Q=t.task.result+"",V=t.task.error+"";function X(t){return t.task.state==t.state.RESULT?gt:t.task.state==t.state.ERROR?mt:t.task.state==t.state.NEW?kt:t.task.state==t.state.RUNNING?pt:t.task.state==t.state.HALTED?ht:void 0}var Y=X(t),Z=Y&&Y(t);return{c(){e=u("tr"),r=u("th"),n=d(G),s=f(),a=u("td"),i=d(M),h=f(),p=u("td"),g=d(P),w=f(),v=u("td"),b=d(q),T=f(),Z&&Z.c(),$=f(),E=u("td"),R=d(J),_=f(),y=u("td"),N=d(z),x=f(),L=u("td"),A=d(K),O=f(),F=u("td"),S=d(B),U=f(),C=u("td"),H=d(Q),I=f(),D=u("td"),W=d(V),j=f(),k(r,"scope","row")},m(t,l){c(t,e,l),o(e,r),o(r,n),o(e,s),o(e,a),o(a,i),o(e,h),o(e,p),o(p,g),o(e,w),o(e,v),o(v,b),o(e,T),Z&&Z.m(e,null),o(e,$),o(e,E),o(E,R),o(e,_),o(e,y),o(y,N),o(e,x),o(e,L),o(L,A),o(e,O),o(e,F),o(F,S),o(e,U),o(e,C),o(C,H),o(e,I),o(e,D),o(D,W),o(e,j)},p(t,r){t.filteredTasks&&M!==(M=r.task.id+"")&&m(i,M),t.filteredTasks&&P!==(P=r.task.time_start+"")&&m(g,P),t.filteredTasks&&q!==(q=r.task.time_stop+"")&&m(b,q),Y===(Y=X(r))&&Z?Z.p(t,r):(Z&&Z.d(1),(Z=Y&&Y(r))&&(Z.c(),Z.m(e,$))),t.filteredTasks&&J!==(J=r.task.timeout+"")&&m(R,J),t.filteredTasks&&z!==(z=r.task.action_id+"")&&m(N,z),t.filteredTasks&&K!==(K=r.task.args+"")&&m(A,K),t.filteredTasks&&B!==(B=r.task.kwargs+"")&&m(S,B),t.filteredTasks&&Q!==(Q=r.task.result+"")&&m(H,Q),t.filteredTasks&&V!==(V=r.task.error+"")&&m(W,V)},d(t){t&&l(e),Z&&Z.d()}}}function vt(e){var r,s,a,i,d,k,m,w,v,b,T,$,E,R,_,y,N=1!=e.isError&&lt(e);function x(t){return t.filteredTasks()&&t.filteredTasks().length>0?ut:it}var L=x(e),A=L(e);return{c(){r=u("div"),(s=u("button")).textContent="All",a=f(),(i=u("button")).textContent="Succes",d=f(),(k=u("button")).textContent="Failure",m=f(),(w=u("button")).textContent="New",v=f(),(b=u("button")).textContent="Running",T=f(),($=u("button")).textContent="Halted",E=f(),N&&N.c(),R=f(),A.c(),_=h(),g(s,"active",e.currentFilter===e.state.ALL),g(i,"active",e.currentFilter===e.state.RESULT),g(k,"active",e.currentFilter===e.state.ERROR),g(w,"active",e.currentFilter===e.state.NEW),g(b,"active",e.currentFilter===e.state.RUNNING),g($,"active",e.currentFilter===e.state.HALTED),y=[p(s,"click",e.click_handler),p(i,"click",e.click_handler_1),p(k,"click",e.click_handler_2),p(w,"click",e.click_handler_3),p(b,"click",e.click_handler_4),p($,"click",e.click_handler_5)]},m(t,e){c(t,r,e),o(r,s),o(r,a),o(r,i),o(r,d),o(r,k),o(r,m),o(r,w),o(r,v),o(r,b),o(r,T),o(r,$),c(t,E,e),N&&N.m(t,e),c(t,R,e),A.m(t,e),c(t,_,e)},p(t,e){(t.currentFilter||t.state)&&(g(s,"active",e.currentFilter===e.state.ALL),g(i,"active",e.currentFilter===e.state.RESULT),g(k,"active",e.currentFilter===e.state.ERROR),g(w,"active",e.currentFilter===e.state.NEW),g(b,"active",e.currentFilter===e.state.RUNNING),g($,"active",e.currentFilter===e.state.HALTED)),1!=e.isError?N?N.p(t,e):((N=lt(e)).c(),N.m(R.parentNode,R)):N&&(N.d(1),N=null),L===(L=x(e))&&A?A.p(t,e):(A.d(1),(A=L(e))&&(A.c(),A.m(_.parentNode,_)))},i:t,o:t,d(t){t&&(l(r),l(E)),N&&N.d(t),t&&l(R),A.d(t),t&&l(_),n(y)}}}function bt(t,e,r){let{allTasks:n=[],isError:s=!1}=e;const a={RESULT:"OK",ERROR:"ERROR",NEW:"NEW",RUNNING:"RUNNING",HALTED:"HALTED",ALL:"all"};let o,c={success:0,error:0,new:0,running:0,halted:0},l=a.ALL;function i(t){let e=[];return n.forEach(r=>{r.state==t&&e.push(r)}),e}function u(t){r("currentFilter",l=t)}return t.$set=(t=>{"allTasks"in t&&r("allTasks",n=t.allTasks),"isError"in t&&r("isError",s=t.isError)}),t.$$.update=((t={currentFilter:1,allTasks:1})=>{(t.currentFilter||t.allTasks)&&r("filteredTasks",o=(()=>(r("counters",c={success:0,error:0,new:0,running:0,halted:0}),n.forEach(t=>{console.log(`task.state: ${t.state}`),t.state===a.RESULT?(c.success++,r("counters",c),r("currentFilter",l),r("allTasks",n)):t.state===a.ERROR?(c.error++,r("counters",c),r("currentFilter",l),r("allTasks",n)):t.state===a.NEW?(c.new++,r("counters",c),r("currentFilter",l),r("allTasks",n)):t.state===a.RUNNING?(c.running++,r("counters",c),r("currentFilter",l),r("allTasks",n)):t.state===a.HALTED?(c.halted++,r("counters",c),r("currentFilter",l),r("allTasks",n)):console.log(`task.state: ${t.state}`)}),l==a.ALL?n:l==a.RESULT?i(a.RESULT):l==a.ERROR?i(a.ERROR):l==a.NEW?i(a.NEW):l==a.RUNNING?i(a.RUNNING):l==a.HALTED?i(a.HALTED):void 0)))}),{allTasks:n,isError:s,state:a,counters:c,currentFilter:l,updateFilter:u,filteredTasks:o,click_handler:function(){return u(a.ALL)},click_handler_1:function(){return u(a.RESULT)},click_handler_2:function(){return u(a.ERROR)},click_handler_3:function(){return u(a.NEW)},click_handler_4:function(){return u(a.RUNNING)},click_handler_5:function(){return u(a.HALTED)}}}class Tt extends D{constructor(t){super(),I(this,t,bt,vt,a,["allTasks","isError"])}}function $t(t){var e,r,n,s=new Tt({props:{allTasks:t.allTasks}});return{c(){(e=u("h1")).textContent="Tasks",r=f(),s.$$.fragment.c()},m(t,a){c(t,e,a),c(t,r,a),U(s,t,a),n=!0},p(t,e){var r={};t.allTasks&&(r.allTasks=e.allTasks),s.$set(r)},i(t){n||(F(s.$$.fragment,t),n=!0)},o(t){S(s.$$.fragment,t),n=!1},d(t){t&&(l(e),l(r)),C(s,t)}}}function Et(t,e,r){let n=[];return n.forEach(t=>{t.state=t.state.toUpperCase()}),b(async()=>{GEDIS_CLIENT.execute(info={namespace:"default",actor:"myjobs",command:"list_jobs"}).then(function(t){console.log(`DATA : ${t}`),t&&(r("allTasks",n=JSON.parse(t).jobs),n.forEach(t=>{t.state=t.state.toUpperCase()}))})}),{allTasks:n}}function Rt(e){return{c:t,m:t,p:t,i:t,o:t,d:t}}let _t,yt,Nt=[];function xt(t){t.node.classList.remove(t.className),t.pattern.test(_t)&&t.node.classList.add(t.className)}function Lt(e){var r,n,s,a,i,d,h,p,m,g,w,v,b,T;return{c(){r=u("div"),n=u("nav"),s=u("div"),(a=u("div")).innerHTML='<span class="navbar-brand" href="#">Jobs visualization</span>',i=f(),d=u("ul"),h=u("li"),(p=u("a")).textContent="Workers",g=f(),w=u("li"),(v=u("a")).textContent="Tasks",k(a,"class","navbar-header"),k(p,"href","/workers"),k(v,"href","/tasks"),k(d,"class","nav navbar-nav"),k(s,"class","container-fluid"),k(n,"class","navbar navbar-inverse test")},m(t,e){c(t,r,e),o(r,n),o(n,s),o(s,a),o(s,i),o(s,d),o(d,h),o(h,p),m=K.call(null,p)||{},o(d,g),o(d,w),o(w,v),b=K.call(null,v)||{},T=function(t,e,r){if(!e&&t.hasAttribute("href")&&(e=t.getAttribute("href"))&&e.length>1&&"#"==e.charAt(0)&&(e=e.substring(1)),r||(r="active"),!e||e.length<1||"/"!=e.charAt(0)&&"*"!=e.charAt(0))throw Error('Invalid value for "path" argument');const{pattern:n}=P(e),s={node:t,className:r,pattern:n};return Nt.push(s),xt(s),{destroy(){Nt=Nt.splice(Nt.indexOf(s),1)}}}.call(null,v,"/tasks/*","my-active")||{}},p:t,i:t,o:t,d(t){t&&l(r),m&&"function"==typeof m.destroy&&m.destroy(),b&&"function"==typeof b.destroy&&b.destroy(),T&&"function"==typeof T.destroy&&T.destroy()}}}z.subscribe(t=>{_t=t.location+(t.querystring?"?"+t.querystring:""),Nt.map(xt)});class At extends D{constructor(t){super(),I(this,t,null,Lt,a,[])}}function Ot(e){var r,n,s;return{c(){(r=u("h2")).textContent="Not Found",n=f(),(s=u("h3")).textContent="Oops, this route doesn't exist!"},m(t,e){c(t,r,e),c(t,n,e),c(t,s,e)},p:t,i:t,o:t,d(t){t&&(l(r),l(n),l(s))}}}(yt=new Map).set("/",ot),yt.set("/workers",ot),yt.set("/tasks",class extends D{constructor(t){super(),I(this,t,Et,$t,a,[])}}),yt.set("/single-worker-tasks/:taskId",class extends D{constructor(t){super(),I(this,t,null,Rt,a,[])}}),yt.set("*",class extends D{constructor(t){super(),I(this,t,null,Ot,a,[])}});var Ft=yt;function St(t){var e,r,n,s,a=new At({}),o=new Q({props:{routes:Ft}});return{c(){e=u("div"),a.$$.fragment.c(),r=f(),n=u("div"),o.$$.fragment.c(),k(n,"class","container")},m(t,l){c(t,e,l),U(a,e,null),c(t,r,l),c(t,n,l),U(o,n,null),s=!0},p(t,e){var r={};t.routes&&(r.routes=Ft),o.$set(r)},i(t){s||(F(a.$$.fragment,t),F(o.$$.fragment,t),s=!0)},o(t){S(a.$$.fragment,t),S(o.$$.fragment,t),s=!1},d(t){t&&l(e),C(a),t&&(l(r),l(n)),C(o)}}}return new class extends D{constructor(t){super(),I(this,t,null,St,a,[])}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
