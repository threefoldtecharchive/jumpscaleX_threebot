var app=function(){"use strict";function t(){}function e(t){return t()}function r(){return Object.create(null)}function s(t){t.forEach(e)}function n(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(t,e){t.appendChild(e)}function c(t,e,r){t.insertBefore(e,r||null)}function l(t){t.parentNode.removeChild(t)}function i(t,e){for(let r=0;r<t.length;r+=1)t[r]&&t[r].d(e)}function u(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function f(){return d(" ")}function h(t,e,r,s){return t.addEventListener(e,r,s),()=>t.removeEventListener(e,r,s)}function p(t,e,r){null==r?t.removeAttribute(e):t.setAttribute(e,r)}function k(t,e){e=""+e,t.data!==e&&(t.data=e)}function m(t,e,r){t.classList[r?"add":"remove"](e)}let g;function w(t){g=t}function b(t){(function(){if(!g)throw new Error("Function called outside component initialization");return g})().$$.on_mount.push(t)}const v=[],$=[],T=[],E=[],y=Promise.resolve();let x=!1;function _(t){T.push(t)}function R(){const t=new Set;do{for(;v.length;){const t=v.shift();w(t),L(t.$$)}for(;$.length;)$.pop()();for(let e=0;e<T.length;e+=1){const r=T[e];t.has(r)||(r(),t.add(r))}T.length=0}while(v.length);for(;E.length;)E.pop()();x=!1}function L(t){t.fragment&&(t.update(t.dirty),s(t.before_update),t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_update.forEach(_))}const N=new Set;let C;function A(t,e){t&&t.i&&(N.delete(t),t.i(e))}function S(t,e,r,s){if(t&&t.o){if(N.has(t))return;N.add(t),C.c.push(()=>{N.delete(t),s&&(r&&t.d(1),s())}),t.o(e)}}function O(t,r,o){const{fragment:a,on_mount:c,on_destroy:l,after_update:i}=t.$$;a.m(r,o),_(()=>{const r=c.map(e).filter(n);l?l.push(...r):s(r),t.$$.on_mount=[]}),i.forEach(_)}function U(t,e){t.$$.fragment&&(s(t.$$.on_destroy),t.$$.fragment.d(e),t.$$.on_destroy=t.$$.fragment=null,t.$$.ctx={})}function I(t,e){t.$$.dirty||(v.push(t),x||(x=!0,y.then(R)),t.$$.dirty=r()),t.$$.dirty[e]=!0}function F(e,n,o,a,c,l){const i=g;w(e);const u=n.props||{},d=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:c,bound:r(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(i?i.$$.context:[]),callbacks:r(),dirty:null};let f=!1;var h;d.ctx=o?o(e,u,(t,r)=>{d.ctx&&c(d.ctx[t],d.ctx[t]=r)&&(d.bound[t]&&d.bound[t](r),f&&I(e,t))}):u,d.update(),f=!0,s(d.before_update),d.fragment=a(d.ctx),n.target&&(n.hydrate?d.fragment.l((h=n.target,Array.from(h.childNodes))):d.fragment.c(),n.intro&&A(e.$$.fragment),O(e,n.target,n.anchor),R()),w(i)}class W{$destroy(){U(this,1),this.$destroy=t}$on(t,e){const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(e),()=>{const t=r.indexOf(e);-1!==t&&r.splice(t,1)}}$set(){}}const j=[];function H(t,e){return{subscribe:D(t,e).subscribe}}function D(e,r=t){let s;const n=[];function a(t){if(o(e,t)&&(e=t,s)){const t=!j.length;for(let t=0;t<n.length;t+=1){const r=n[t];r[1](),j.push(r,e)}if(t){for(let t=0;t<j.length;t+=2)j[t][0](j[t+1]);j.length=0}}}return{set:a,update:function(t){a(t(e))},subscribe:function(o,c=t){const l=[o,c];return n.push(l),1===n.length&&(s=r(a)||t),o(e),()=>{const t=n.indexOf(l);-1!==t&&n.splice(t,1),0===n.length&&(s(),s=null)}}}}function M(e,r,o){const a=!Array.isArray(e),c=a?[e]:e,l=r.length<2;return H(o,e=>{let o=!1;const i=[];let u=0,d=t;const f=()=>{if(u)return;d();const s=r(a?i[0]:i,e);l?e(s):d=n(s)?s:t},h=c.map((t,e)=>t.subscribe(t=>{i[e]=t,u&=~(1<<e),o&&f()},()=>{u|=1<<e}));return o=!0,f(),function(){s(h),d()}})}function q(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var r,s,n,o,a=[],c="",l=t.split("/");for(l[0]||l.shift();n=l.shift();)"*"===(r=n[0])?(a.push("wild"),c+="/(.*)"):":"===r?(s=n.indexOf("?",1),o=n.indexOf(".",1),a.push(n.substring(1,~s?s:~o?o:n.length)),c+=~s&&!~o?"(?:/([^/]+?))?":"/([^/]+?)",~o&&(c+=(~s?"?":"")+"\\"+n.substring(o))):c+="/"+n;return{keys:a,pattern:new RegExp("^"+c+(e?"(?=$|/)":"/?$"),"i")}}function P(t){var e,r,n=t.component;function o(t){return{props:{params:t.componentParams}}}if(n)var a=new n(o(t));return{c(){a&&a.$$.fragment.c(),e=d("")},m(t,s){a&&O(a,t,s),c(t,e,s),r=!0},p(t,r){var c={};if(t.componentParams&&(c.params=r.componentParams),n!==(n=r.component)){if(a){C={r:0,c:[],p:C};const t=a;S(t.$$.fragment,1,0,()=>{U(t,1)}),C.r||s(C.c),C=C.p}n?((a=new n(o(r))).$$.fragment.c(),A(a.$$.fragment,1),O(a,e.parentNode,e)):a=null}else n&&a.$set(c)},i(t){r||(a&&A(a.$$.fragment,t),r=!0)},o(t){a&&S(a.$$.fragment,t),r=!1},d(t){t&&l(e),a&&U(a,t)}}}function G(){const t=window.location.href.indexOf("#/");let e=t>-1?window.location.href.substr(t+1):"/";const r=e.indexOf("?");let s="";return r>-1&&(s=e.substr(r+1),e=e.substr(0,r)),{location:e,querystring:s}}const J=H(G(),function(t){const e=()=>{t(G())};return window.addEventListener("hashchange",e,!1),function(){window.removeEventListener("hashchange",e,!1)}});M(J,t=>t.location),M(J,t=>t.querystring);function z(t){if(!t||!t.tagName||"a"!=t.tagName.toLowerCase())throw Error('Action "link" can only be used with <a> tags');const e=t.getAttribute("href");if(!e||e.length<1||"/"!=e.charAt(0))throw Error('Invalid value for "href" attribute');t.addEventListener("click",t=>{let e;t.preventDefault();let r=t.target;for(;null===(e=r.getAttribute("href"));)if(null===(r=r.parentElement))throw Error("Could not find corresponding href value");return function(t){if(!t||t.length<1||"/"!=t.charAt(0))throw Error("Invalid parameter location");setTimeout(()=>{window.location.hash="#"+t},0)}(e),!1})}function K(t,e,r){let s;!function(t,e,r){t.$$.on_destroy.push(function(t,e){const r=t.subscribe(e);return r.unsubscribe?()=>r.unsubscribe():r}(e,r))}(t,J,t=>{r("$loc",s=t)});let{routes:n={}}=e;class o{constructor(t,e){if(!t||"string"==typeof t&&(t.length<1||"/"!=t.charAt(0)&&"*"!=t.charAt(0))||"object"==typeof t&&!(t instanceof RegExp))throw Error('Invalid value for "path" argument');const{pattern:r,keys:s}=q(t);this.path=t,this.component=e,this._pattern=r,this._keys=s}match(t){const e=this._pattern.exec(t);if(null===e)return null;if(!1===this._keys)return e;const r={};let s=0;for(;s<this._keys.length;)r[this._keys[s]]=e[++s]||null;return r}}const a=n instanceof Map?n:Object.entries(n),c=[];for(const[t,e]of a)c.push(new o(t,e));let l=null,i={};return t.$set=(t=>{"routes"in t&&r("routes",n=t.routes)}),t.$$.update=((t={component:1,$loc:1})=>{if(t.component||t.$loc){r("component",l=null);let t=0;for(;!l&&t<c.length;){const e=c[t].match(s.location);e&&(r("component",l=c[t].component),r("componentParams",i=e)),t++}}}),{routes:n,component:l,componentParams:i}}class B extends W{constructor(t){super(),F(this,t,K,P,o,["routes"])}}function Q(){return GEDIS_CLIENT.execute(info={namespace:"default",actor:"myjobs",command:"list_workers"})}function V(t,e,r){const s=Object.create(t);return s.worker=e[r],s.i=r,s}function X(t){var e,r,s,n=t.worker.state+"";return{c(){e=u("td"),r=u("span"),s=d(n),p(r,"class","label label-pill label-primary")},m(t,n){c(t,e,n),a(e,r),a(r,s)},p(t,e){t.workers&&n!==(n=e.worker.state+"")&&k(s,n)},d(t){t&&l(e)}}}function Y(t){var e,r,s,n=t.worker.state+"";return{c(){e=u("td"),r=u("span"),s=d(n),p(r,"class","label label-pill label-danger")},m(t,n){c(t,e,n),a(e,r),a(r,s)},p(t,e){t.workers&&n!==(n=e.worker.state+"")&&k(s,n)},d(t){t&&l(e)}}}function Z(t){var e,r,s,n=t.worker.state+"";return{c(){e=u("td"),r=u("span"),s=d(n),p(r,"class","label label-pill label-success")},m(t,n){c(t,e,n),a(e,r),a(r,s)},p(t,e){t.workers&&n!==(n=e.worker.state+"")&&k(s,n)},d(t){t&&l(e)}}}function tt(t){var e,r,s,n,o,i,h,m,g,w,b,v,$,T,E,y,x,_,R,L,N,C,A,S,O,U,I,F,W,j,H,D,M=t.i+1+"",q=t.worker.id+"",P=t.worker.halt+"",G=t.worker.pid+"",J=t.worker.error+"",K=t.worker.current_job+"",B=t.worker.last_update+"",Q=t.worker.time_start+"",V=t.worker.timeout+"";function tt(t){return t.worker.state==t.state.RESULT?Z:t.worker.state==t.state.ERROR?Y:t.worker.state==t.state.NEW?X:void 0}var et=tt(t),rt=et&&et(t);return{c(){e=u("tr"),r=u("th"),s=d(M),n=f(),o=u("td"),i=u("a"),h=d(q),w=f(),b=u("td"),v=d(P),$=f(),T=u("td"),E=d(G),y=f(),rt&&rt.c(),x=f(),_=u("td"),R=d(J),L=f(),N=u("td"),C=d(K),A=f(),S=u("td"),O=d(B),U=f(),I=u("td"),F=d(Q),W=f(),j=u("td"),H=d(V),D=f(),p(r,"scope","row"),p(i,"href",m="/single-worker-tasks/"+t.worker.id)},m(t,l){c(t,e,l),a(e,r),a(r,s),a(e,n),a(e,o),a(o,i),a(i,h),g=z.call(null,i)||{},a(e,w),a(e,b),a(b,v),a(e,$),a(e,T),a(T,E),a(e,y),rt&&rt.m(e,null),a(e,x),a(e,_),a(_,R),a(e,L),a(e,N),a(N,C),a(e,A),a(e,S),a(S,O),a(e,U),a(e,I),a(I,F),a(e,W),a(e,j),a(j,H),a(e,D)},p(t,r){t.workers&&q!==(q=r.worker.id+"")&&k(h,q),t.workers&&m!==(m="/single-worker-tasks/"+r.worker.id)&&p(i,"href",m),t.workers&&P!==(P=r.worker.halt+"")&&k(v,P),t.workers&&G!==(G=r.worker.pid+"")&&k(E,G),et===(et=tt(r))&&rt?rt.p(t,r):(rt&&rt.d(1),(rt=et&&et(r))&&(rt.c(),rt.m(e,x))),t.workers&&J!==(J=r.worker.error+"")&&k(R,J),t.workers&&K!==(K=r.worker.current_job+"")&&k(C,K),t.workers&&B!==(B=r.worker.last_update+"")&&k(O,B),t.workers&&Q!==(Q=r.worker.time_start+"")&&k(F,Q),t.workers&&V!==(V=r.worker.timeout+"")&&k(H,V)},d(t){t&&l(e),g&&"function"==typeof g.destroy&&g.destroy(),rt&&rt.d()}}}function et(e){for(var r,s,n,o,h,m,g,w,b,v,$,T,E,y,x,_,R,L,N,C,A,S,O,U,I,F,W=e.workers.length+"",j=e.workers,H=[],D=0;D<j.length;D+=1)H[D]=tt(V(e,j,D));return{c(){(r=u("h1")).textContent="Workers",s=f(),n=u("div"),o=u("div"),h=u("table"),(m=u("thead")).innerHTML='<tr><th scope="col">#</th> <th scope="col">Id</th> <th scope="col">Halt</th> <th scope="col">Pid</th> <th scope="col">State</th> <th scope="col">Error</th> <th scope="col">Current Job</th> <th scope="col">Last Update</th> <th scope="col">Time Start</th> <th scope="col">Timeout</th></tr>',g=f(),w=u("tbody");for(var t=0;t<H.length;t+=1)H[t].c();b=f(),v=u("div"),$=u("div"),T=u("table"),(E=u("thead")).innerHTML='<tr><th class="text-center" scope="col">Total Workers</th> <th class="text-center" scope="col">New Workers</th> <th class="text-center" scope="col">Success Workers</th> <th class="text-center" scope="col">Failure Workers</th></tr>',y=f(),x=u("tbody"),_=u("td"),R=d(W),L=f(),N=u("td"),C=d(e.newCount),A=f(),S=u("td"),O=d(e.successCount),U=f(),I=u("td"),F=d(e.failureCount),p(h,"class","table table-striped"),p(o,"class","col-xs-12"),p(n,"class","row"),p(x,"class","text-center"),p(T,"class","table table-striped"),p($,"class","col-xs-12"),p(v,"class","row mt-3 svelte-x2fmb9")},m(t,e){c(t,r,e),c(t,s,e),c(t,n,e),a(n,o),a(o,h),a(h,m),a(h,g),a(h,w);for(var l=0;l<H.length;l+=1)H[l].m(w,null);c(t,b,e),c(t,v,e),a(v,$),a($,T),a(T,E),a(T,y),a(T,x),a(x,_),a(_,R),a(x,L),a(x,N),a(N,C),a(x,A),a(x,S),a(S,O),a(x,U),a(x,I),a(I,F)},p(t,e){if(t.workers||t.state){j=e.workers;for(var r=0;r<j.length;r+=1){const s=V(e,j,r);H[r]?H[r].p(t,s):(H[r]=tt(s),H[r].c(),H[r].m(w,null))}for(;r<H.length;r+=1)H[r].d(1);H.length=j.length}t.workers&&W!==(W=e.workers.length+"")&&k(R,W),t.newCount&&k(C,e.newCount),t.successCount&&k(O,e.successCount),t.failureCount&&k(F,e.failureCount)},i:t,o:t,d(t){t&&(l(r),l(s),l(n)),i(H,t),t&&(l(b),l(v))}}}function rt(t,e,r){console.log(Q);const s={RESULT:"OK",ERROR:"ERROR",NEW:"NEW"};var n=0,o=0,a=0;let c=[];return b(async()=>{Q().then(function(t){t&&(console.log(t,typeof t),r("workers",c=JSON.parse(t).workers),c.forEach(t=>{t.state=t.state.toUpperCase()}),console.log("statstics"),c.forEach(t=>{t.state==s.RESULT?r("successCount",++n):t.state==s.ERROR?r("failureCount",++o):t.state==s.NEW&&r("newCount",++a)}))})}),console.log(a),{state:s,successCount:n,failureCount:o,newCount:a,workers:c}}class st extends W{constructor(t){super(),F(this,t,rt,et,o,[])}}function nt(t,e,r){const s=Object.create(t);return s.task=e[r],s.i=r,s}function ot(e){var r;return{c(){(r=u("h3")).textContent="There is no worker with this ID"},m(t,e){c(t,r,e)},p:t,d(t){t&&l(r)}}}function at(t){for(var e,r,s,n,o=t.filteredTasks(),d=[],h=0;h<o.length;h+=1)d[h]=ft(nt(t,o,h));return{c(){e=u("table"),(r=u("thead")).innerHTML='<tr><th scope="col">#</th> <th scope="col">Id</th> <th scope="col">Category</th> <th scope="col">Time Start</th> <th scope="col">Time Stop</th> <th scope="col">State</th> <th scope="col">Timeout</th> <th scope="col">Action Id</th> <th scope="col">args</th> <th scope="col">kwargs</th> <th scope="col">Result</th> <th scope="col">Error</th> <th scope="col">Return Queues</th></tr>',s=f(),n=u("tbody");for(var t=0;t<d.length;t+=1)d[t].c();p(e,"class","table table-striped")},m(t,o){c(t,e,o),a(e,r),a(e,s),a(e,n);for(var l=0;l<d.length;l+=1)d[l].m(n,null)},p(t,e){if(t.filteredTasks||t.state){o=e.filteredTasks();for(var r=0;r<o.length;r+=1){const s=nt(e,o,r);d[r]?d[r].p(t,s):(d[r]=ft(s),d[r].c(),d[r].m(n,null))}for(;r<d.length;r+=1)d[r].d(1);d.length=o.length}},d(t){t&&l(e),i(d,t)}}}function ct(t){var e,r,s,n=t.task.state+"";return{c(){e=u("td"),r=u("span"),s=d(n),p(r,"class","label label-pill label-info")},m(t,n){c(t,e,n),a(e,r),a(r,s)},p(t,e){t.filteredTasks&&n!==(n=e.task.state+"")&&k(s,n)},d(t){t&&l(e)}}}function lt(t){var e,r,s,n=t.task.state+"";return{c(){e=u("td"),r=u("span"),s=d(n),p(r,"class","label label-pill label-warning")},m(t,n){c(t,e,n),a(e,r),a(r,s)},p(t,e){t.filteredTasks&&n!==(n=e.task.state+"")&&k(s,n)},d(t){t&&l(e)}}}function it(t){var e,r,s,n=t.task.state+"";return{c(){e=u("td"),r=u("span"),s=d(n),p(r,"class","label label-pill label-primary")},m(t,n){c(t,e,n),a(e,r),a(r,s)},p(t,e){t.filteredTasks&&n!==(n=e.task.state+"")&&k(s,n)},d(t){t&&l(e)}}}function ut(t){var e,r,s,n=t.task.state+"";return{c(){e=u("td"),r=u("span"),s=d(n),p(r,"class","label label-pill label-danger")},m(t,n){c(t,e,n),a(e,r),a(r,s)},p(t,e){t.filteredTasks&&n!==(n=e.task.state+"")&&k(s,n)},d(t){t&&l(e)}}}function dt(t){var e,r,s,n=t.task.state+"";return{c(){e=u("td"),r=u("span"),s=d(n),p(r,"class","label label-pill label-success")},m(t,n){c(t,e,n),a(e,r),a(r,s)},p(t,e){t.filteredTasks&&n!==(n=e.task.state+"")&&k(s,n)},d(t){t&&l(e)}}}function ft(t){var e,r,s,n,o,i,h,m,g,w,b,v,$,T,E,y,x,_,R,L,N,C,A,S,O,U,I,F,W,j,H,D,M,q,P,G,J,z,K=t.i+1+"",B=t.task.id+"",Q=t.task.category+"",V=t.task.time_start+"",X=t.task.time_stop+"",Y=t.task.timeout+"",Z=t.task.action_id+"",tt=t.task.args+"",et=t.task.kwargs+"",rt=t.task.result+"",st=t.task.error+"",nt=t.task.return_queues+"";function ot(t){return t.task.state==t.state.RESULT?dt:t.task.state==t.state.ERROR?ut:t.task.state==t.state.NEW?it:t.task.state==t.state.RUNNING?lt:t.task.state==t.state.HALTED?ct:void 0}var at=ot(t),ft=at&&at(t);return{c(){e=u("tr"),r=u("th"),s=d(K),n=f(),o=u("td"),i=d(B),h=f(),m=u("td"),g=d(Q),w=f(),b=u("td"),v=d(V),$=f(),T=u("td"),E=d(X),y=f(),ft&&ft.c(),x=f(),_=u("td"),R=d(Y),L=f(),N=u("td"),C=d(Z),A=f(),S=u("td"),O=d(tt),U=f(),I=u("td"),F=d(et),W=f(),j=u("td"),H=d(rt),D=f(),M=u("td"),q=d(st),P=f(),G=u("td"),J=d(nt),z=f(),p(r,"scope","row")},m(t,l){c(t,e,l),a(e,r),a(r,s),a(e,n),a(e,o),a(o,i),a(e,h),a(e,m),a(m,g),a(e,w),a(e,b),a(b,v),a(e,$),a(e,T),a(T,E),a(e,y),ft&&ft.m(e,null),a(e,x),a(e,_),a(_,R),a(e,L),a(e,N),a(N,C),a(e,A),a(e,S),a(S,O),a(e,U),a(e,I),a(I,F),a(e,W),a(e,j),a(j,H),a(e,D),a(e,M),a(M,q),a(e,P),a(e,G),a(G,J),a(e,z)},p(t,r){t.filteredTasks&&B!==(B=r.task.id+"")&&k(i,B),t.filteredTasks&&Q!==(Q=r.task.category+"")&&k(g,Q),t.filteredTasks&&V!==(V=r.task.time_start+"")&&k(v,V),t.filteredTasks&&X!==(X=r.task.time_stop+"")&&k(E,X),at===(at=ot(r))&&ft?ft.p(t,r):(ft&&ft.d(1),(ft=at&&at(r))&&(ft.c(),ft.m(e,x))),t.filteredTasks&&Y!==(Y=r.task.timeout+"")&&k(R,Y),t.filteredTasks&&Z!==(Z=r.task.action_id+"")&&k(C,Z),t.filteredTasks&&tt!==(tt=r.task.args+"")&&k(O,tt),t.filteredTasks&&et!==(et=r.task.kwargs+"")&&k(F,et),t.filteredTasks&&rt!==(rt=r.task.result+"")&&k(H,rt),t.filteredTasks&&st!==(st=r.task.error+"")&&k(q,st),t.filteredTasks&&nt!==(nt=r.task.return_queues+"")&&k(J,nt)},d(t){t&&l(e),ft&&ft.d()}}}function ht(t){var e,r,s,n,o,i,h,m,g,w,b,v,$,T,E,y,x,_,R,L,N,C,A,S=t.allTasks.length+"",O=t.counters.success+"",U=t.counters.error+"",I=t.counters.new+"",F=t.counters.running+"",W=t.counters.halted+"";return{c(){e=u("div"),r=u("div"),s=u("table"),(n=u("thead")).innerHTML='<tr><th class="text-center" scope="col">Total Tasks</th> <th class="text-center" scope="col">Success Tasks</th> <th class="text-center" scope="col">Failure Tasks</th> <th class="text-center" scope="col">New Tasks</th> <th class="text-center" scope="col">Running Tasks</th> <th class="text-center" scope="col">Halted Tasks</th></tr>',o=f(),i=u("tbody"),h=u("td"),m=d(S),g=f(),w=u("td"),b=d(O),v=f(),$=u("td"),T=d(U),E=f(),y=u("td"),x=d(I),_=f(),R=u("td"),L=d(F),N=f(),C=u("td"),A=d(W),p(i,"class","text-center"),p(s,"class","table table-striped"),p(r,"class","col-xs-12"),p(e,"class","row mt-3 svelte-x2fmb9")},m(t,l){c(t,e,l),a(e,r),a(r,s),a(s,n),a(s,o),a(s,i),a(i,h),a(h,m),a(i,g),a(i,w),a(w,b),a(i,v),a(i,$),a($,T),a(i,E),a(i,y),a(y,x),a(i,_),a(i,R),a(R,L),a(i,N),a(i,C),a(C,A)},p(t,e){t.allTasks&&S!==(S=e.allTasks.length+"")&&k(m,S),t.counters&&O!==(O=e.counters.success+"")&&k(b,O),t.counters&&U!==(U=e.counters.error+"")&&k(T,U),t.counters&&I!==(I=e.counters.new+"")&&k(x,I),t.counters&&F!==(F=e.counters.running+"")&&k(L,F),t.counters&&W!==(W=e.counters.halted+"")&&k(A,W)},d(t){t&&l(e)}}}function pt(e){var r,n,o,i,d,k,g,w,b,v;function $(t){return 1!=t.isError?at:ot}var T=$(e),E=T(e),y=1!=e.isError&&ht(e);return{c(){r=u("div"),n=u("div"),o=u("div"),E.c(),i=f(),d=u("div"),(k=u("button")).textContent="All",g=f(),(w=u("button")).textContent="Succes",b=f(),y&&y.c(),p(o,"class","col-xs-12"),p(n,"class","row"),m(k,"active",e.currentFilter===e.state.ALL),m(w,"active",e.currentFilter===e.state.RESULT),v=[h(k,"click",e.click_handler),h(w,"click",e.click_handler_1)]},m(t,e){c(t,r,e),a(r,n),a(n,o),E.m(o,null),a(r,i),a(r,d),a(d,k),a(d,g),a(d,w),a(r,b),y&&y.m(r,null)},p(t,e){T===(T=$(e))&&E?E.p(t,e):(E.d(1),(E=T(e))&&(E.c(),E.m(o,null))),(t.currentFilter||t.state)&&(m(k,"active",e.currentFilter===e.state.ALL),m(w,"active",e.currentFilter===e.state.RESULT)),1!=e.isError?y?y.p(t,e):((y=ht(e)).c(),y.m(r,null)):y&&(y.d(1),y=null)},i:t,o:t,d(t){t&&l(r),E.d(),y&&y.d(),s(v)}}}function kt(t,e,r){let{allTasks:s=[],isError:n=!1}=e;const o={RESULT:"OK",ERROR:"ERROR",NEW:"NEW",RUNNING:"RUNNING",HALTED:"HALTED",ALL:"all"};let a,c={success:0,error:0,new:0,running:0,halted:0},l=o.ALL;function i(t){console.log(`updating currentFilter to : ${t}`),r("currentFilter",l=t)}return 1!=n&&s.forEach(t=>{t.state==o.RESULT?(c.success++,r("counters",c)):t.state==o.ERROR?(c.error++,r("counters",c)):t.state==o.NEW?(c.new++,r("counters",c)):t.state==o.RUNNING?(c.running++,r("counters",c)):t.state==o.HALTED&&(c.halted++,r("counters",c))}),t.$set=(t=>{"allTasks"in t&&r("allTasks",s=t.allTasks),"isError"in t&&r("isError",n=t.isError)}),t.$$.update=((t={currentFilter:1,allTasks:1})=>{(t.currentFilter||t.allTasks)&&r("filteredTasks",a=(()=>l==o.ALL?s:l==o.RESULT?function(t){let e=[];return s.forEach(t=>{t.state,e.push(t)}),e}(o.RESULT):void 0))}),{allTasks:s,isError:n,state:o,counters:c,currentFilter:l,updateFilter:i,filteredTasks:a,click_handler:function(){return i(o.ALL)},click_handler_1:function(){return i(o.RESULT)}}}class mt extends W{constructor(t){super(),F(this,t,kt,pt,o,["allTasks","isError"])}}function gt(t){var e,r,s,n=new mt({props:{allTasks:t.allTasks}});return{c(){(e=u("h1")).textContent="Tasks",r=f(),n.$$.fragment.c()},m(t,o){c(t,e,o),c(t,r,o),O(n,t,o),s=!0},p(t,e){var r={};t.allTasks&&(r.allTasks=e.allTasks),n.$set(r)},i(t){s||(A(n.$$.fragment,t),s=!0)},o(t){S(n.$$.fragment,t),s=!1},d(t){t&&(l(e),l(r)),U(n,t)}}}function wt(t,e,r){let s=[];return b(async()=>{GEDIS_CLIENT.execute(info={namespace:"default",actor:"myjobs",command:"list_jobs"}).then(function(t){t&&(console.log(t),r("allTasks",s=JSON.parse(t).jobs),s.forEach(t=>{t.state=t.state.toUpperCase()}))})}),{allTasks:s}}function bt(e){return{c:t,m:t,p:t,i:t,o:t,d:t}}let vt,$t,Tt=[];function Et(t){t.node.classList.remove(t.className),t.pattern.test(vt)&&t.node.classList.add(t.className)}function yt(e){var r,s,n,o,i,d,h,k,m,g,w,b,v,$;return{c(){r=u("div"),s=u("nav"),n=u("div"),(o=u("div")).innerHTML='<span class="navbar-brand" href="#">Jobs visualization</span>',i=f(),d=u("ul"),h=u("li"),(k=u("a")).textContent="Workers",g=f(),w=u("li"),(b=u("a")).textContent="Tasks",p(o,"class","navbar-header"),p(k,"href","/workers"),p(b,"href","/tasks"),p(d,"class","nav navbar-nav"),p(n,"class","container-fluid"),p(s,"class","navbar navbar-inverse test")},m(t,e){c(t,r,e),a(r,s),a(s,n),a(n,o),a(n,i),a(n,d),a(d,h),a(h,k),m=z.call(null,k)||{},a(d,g),a(d,w),a(w,b),v=z.call(null,b)||{},$=function(t,e,r){if(!e&&t.hasAttribute("href")&&(e=t.getAttribute("href"))&&e.length>1&&"#"==e.charAt(0)&&(e=e.substring(1)),r||(r="active"),!e||e.length<1||"/"!=e.charAt(0)&&"*"!=e.charAt(0))throw Error('Invalid value for "path" argument');const{pattern:s}=q(e),n={node:t,className:r,pattern:s};return Tt.push(n),Et(n),{destroy(){Tt=Tt.splice(Tt.indexOf(n),1)}}}.call(null,b,"/tasks/*","my-active")||{}},p:t,i:t,o:t,d(t){t&&l(r),m&&"function"==typeof m.destroy&&m.destroy(),v&&"function"==typeof v.destroy&&v.destroy(),$&&"function"==typeof $.destroy&&$.destroy()}}}J.subscribe(t=>{vt=t.location+(t.querystring?"?"+t.querystring:""),Tt.map(Et)});class xt extends W{constructor(t){super(),F(this,t,null,yt,o,[])}}function _t(e){var r,s,n;return{c(){(r=u("h2")).textContent="Not Found",s=f(),(n=u("h3")).textContent="Oops, this route doesn't exist!"},m(t,e){c(t,r,e),c(t,s,e),c(t,n,e)},p:t,i:t,o:t,d(t){t&&(l(r),l(s),l(n))}}}($t=new Map).set("/",st),$t.set("/workers",st),$t.set("/tasks",class extends W{constructor(t){super(),F(this,t,wt,gt,o,[])}}),$t.set("/single-worker-tasks/:taskId",class extends W{constructor(t){super(),F(this,t,null,bt,o,[])}}),$t.set("*",class extends W{constructor(t){super(),F(this,t,null,_t,o,[])}});var Rt=$t;function Lt(t){var e,r,s,n,o=new xt({}),a=new B({props:{routes:Rt}});return{c(){e=u("div"),o.$$.fragment.c(),r=f(),s=u("div"),a.$$.fragment.c(),p(s,"class","container")},m(t,l){c(t,e,l),O(o,e,null),c(t,r,l),c(t,s,l),O(a,s,null),n=!0},p(t,e){var r={};t.routes&&(r.routes=Rt),a.$set(r)},i(t){n||(A(o.$$.fragment,t),A(a.$$.fragment,t),n=!0)},o(t){S(o.$$.fragment,t),S(a.$$.fragment,t),n=!1},d(t){t&&l(e),U(o),t&&(l(r),l(s)),U(a)}}}return new class extends W{constructor(t){super(),F(this,t,null,Lt,o,[])}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
