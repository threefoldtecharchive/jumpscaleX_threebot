var app=function(){"use strict";function t(){}function e(t){return t()}function r(){return Object.create(null)}function n(t){t.forEach(e)}function s(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(t,e){t.appendChild(e)}function c(t,e,r){t.insertBefore(e,r||null)}function l(t){t.parentNode.removeChild(t)}function i(t,e){for(let r=0;r<t.length;r+=1)t[r]&&t[r].d(e)}function u(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function f(){return d(" ")}function h(){return d("")}function p(t,e,r,n){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r,n)}function k(t,e,r){null==r?t.removeAttribute(e):t.setAttribute(e,r)}function m(t,e){e=""+e,t.data!==e&&(t.data=e)}function g(t,e,r){t.classList[r?"add":"remove"](e)}let w;function v(t){w=t}function b(t){(function(){if(!w)throw new Error("Function called outside component initialization");return w})().$$.on_mount.push(t)}const T=[],$=[],E=[],R=[],x=Promise.resolve();let y=!1;function N(t){E.push(t)}function _(){const t=new Set;do{for(;T.length;){const t=T.shift();v(t),L(t.$$)}for(;$.length;)$.pop()();for(let e=0;e<E.length;e+=1){const r=E[e];t.has(r)||(r(),t.add(r))}E.length=0}while(T.length);for(;R.length;)R.pop()();y=!1}function L(t){t.fragment&&(t.update(t.dirty),n(t.before_update),t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_update.forEach(N))}const A=new Set;let C;function O(t,e){t&&t.i&&(A.delete(t),t.i(e))}function F(t,e,r,n){if(t&&t.o){if(A.has(t))return;A.add(t),C.c.push(()=>{A.delete(t),n&&(r&&t.d(1),n())}),t.o(e)}}function S(t,r,o){const{fragment:a,on_mount:c,on_destroy:l,after_update:i}=t.$$;a.m(r,o),N(()=>{const r=c.map(e).filter(s);l?l.push(...r):n(r),t.$$.on_mount=[]}),i.forEach(N)}function U(t,e){t.$$.fragment&&(n(t.$$.on_destroy),t.$$.fragment.d(e),t.$$.on_destroy=t.$$.fragment=null,t.$$.ctx={})}function I(t,e){t.$$.dirty||(T.push(t),y||(y=!0,x.then(_)),t.$$.dirty=r()),t.$$.dirty[e]=!0}function H(e,s,o,a,c,l){const i=w;v(e);const u=s.props||{},d=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:c,bound:r(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(i?i.$$.context:[]),callbacks:r(),dirty:null};let f=!1;var h;d.ctx=o?o(e,u,(t,r)=>{d.ctx&&c(d.ctx[t],d.ctx[t]=r)&&(d.bound[t]&&d.bound[t](r),f&&I(e,t))}):u,d.update(),f=!0,n(d.before_update),d.fragment=a(d.ctx),s.target&&(s.hydrate?d.fragment.l((h=s.target,Array.from(h.childNodes))):d.fragment.c(),s.intro&&O(e.$$.fragment),S(e,s.target,s.anchor),_()),v(i)}class W{$destroy(){U(this,1),this.$destroy=t}$on(t,e){const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(e),()=>{const t=r.indexOf(e);-1!==t&&r.splice(t,1)}}$set(){}}const D=[];function j(t,e){return{subscribe:G(t,e).subscribe}}function G(e,r=t){let n;const s=[];function a(t){if(o(e,t)&&(e=t,n)){const t=!D.length;for(let t=0;t<s.length;t+=1){const r=s[t];r[1](),D.push(r,e)}if(t){for(let t=0;t<D.length;t+=2)D[t][0](D[t+1]);D.length=0}}}return{set:a,update:function(t){a(t(e))},subscribe:function(o,c=t){const l=[o,c];return s.push(l),1===s.length&&(n=r(a)||t),o(e),()=>{const t=s.indexOf(l);-1!==t&&s.splice(t,1),0===s.length&&(n(),n=null)}}}}function M(e,r,o){const a=!Array.isArray(e),c=a?[e]:e,l=r.length<2;return j(o,e=>{let o=!1;const i=[];let u=0,d=t;const f=()=>{if(u)return;d();const n=r(a?i[0]:i,e);l?e(n):d=s(n)?n:t},h=c.map((t,e)=>t.subscribe(t=>{i[e]=t,u&=~(1<<e),o&&f()},()=>{u|=1<<e}));return o=!0,f(),function(){n(h),d()}})}function P(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var r,n,s,o,a=[],c="",l=t.split("/");for(l[0]||l.shift();s=l.shift();)"*"===(r=s[0])?(a.push("wild"),c+="/(.*)"):":"===r?(n=s.indexOf("?",1),o=s.indexOf(".",1),a.push(s.substring(1,~n?n:~o?o:s.length)),c+=~n&&!~o?"(?:/([^/]+?))?":"/([^/]+?)",~o&&(c+=(~n?"?":"")+"\\"+s.substring(o))):c+="/"+s;return{keys:a,pattern:new RegExp("^"+c+(e?"(?=$|/)":"/?$"),"i")}}function q(t){var e,r,s=t.component;function o(t){return{props:{params:t.componentParams}}}if(s)var a=new s(o(t));return{c(){a&&a.$$.fragment.c(),e=h()},m(t,n){a&&S(a,t,n),c(t,e,n),r=!0},p(t,r){var c={};if(t.componentParams&&(c.params=r.componentParams),s!==(s=r.component)){if(a){C={r:0,c:[],p:C};const t=a;F(t.$$.fragment,1,0,()=>{U(t,1)}),C.r||n(C.c),C=C.p}s?((a=new s(o(r))).$$.fragment.c(),O(a.$$.fragment,1),S(a,e.parentNode,e)):a=null}else s&&a.$set(c)},i(t){r||(a&&O(a.$$.fragment,t),r=!0)},o(t){a&&F(a.$$.fragment,t),r=!1},d(t){t&&l(e),a&&U(a,t)}}}function z(){const t=window.location.href.indexOf("#/");let e=t>-1?window.location.href.substr(t+1):"/";const r=e.indexOf("?");let n="";return r>-1&&(n=e.substr(r+1),e=e.substr(0,r)),{location:e,querystring:n}}const J=j(z(),function(t){const e=()=>{t(z())};return window.addEventListener("hashchange",e,!1),function(){window.removeEventListener("hashchange",e,!1)}});M(J,t=>t.location),M(J,t=>t.querystring);function K(t){if(!t||!t.tagName||"a"!=t.tagName.toLowerCase())throw Error('Action "link" can only be used with <a> tags');const e=t.getAttribute("href");if(!e||e.length<1||"/"!=e.charAt(0))throw Error('Invalid value for "href" attribute');t.addEventListener("click",t=>{let e;t.preventDefault();let r=t.target;for(;null===(e=r.getAttribute("href"));)if(null===(r=r.parentElement))throw Error("Could not find corresponding href value");return function(t){if(!t||t.length<1||"/"!=t.charAt(0))throw Error("Invalid parameter location");setTimeout(()=>{window.location.hash="#"+t},0)}(e),!1})}function B(t,e,r){let n;!function(t,e,r){t.$$.on_destroy.push(function(t,e){const r=t.subscribe(e);return r.unsubscribe?()=>r.unsubscribe():r}(e,r))}(t,J,t=>{r("$loc",n=t)});let{routes:s={}}=e;class o{constructor(t,e){if(!t||"string"==typeof t&&(t.length<1||"/"!=t.charAt(0)&&"*"!=t.charAt(0))||"object"==typeof t&&!(t instanceof RegExp))throw Error('Invalid value for "path" argument');const{pattern:r,keys:n}=P(t);this.path=t,this.component=e,this._pattern=r,this._keys=n}match(t){const e=this._pattern.exec(t);if(null===e)return null;if(!1===this._keys)return e;const r={};let n=0;for(;n<this._keys.length;)r[this._keys[n]]=e[++n]||null;return r}}const a=s instanceof Map?s:Object.entries(s),c=[];for(const[t,e]of a)c.push(new o(t,e));let l=null,i={};return t.$set=(t=>{"routes"in t&&r("routes",s=t.routes)}),t.$$.update=((t={component:1,$loc:1})=>{if(t.component||t.$loc){r("component",l=null);let t=0;for(;!l&&t<c.length;){const e=c[t].match(n.location);e&&(r("component",l=c[t].component),r("componentParams",i=e)),t++}}}),{routes:s,component:l,componentParams:i}}class Q extends W{constructor(t){super(),H(this,t,B,q,o,["routes"])}}function V(t,e,r){const n=Object.create(t);return n.worker=e[r],n.i=r,n}function X(e){var r;return{c(){(r=u("div")).innerHTML='<img src="/img/loader.gif" class="img-fluid" alt="Responsive image">',k(r,"class","text-center")},m(t,e){c(t,r,e)},p:t,d(t){t&&l(r)}}}function Y(t){for(var e,r,n,s,o,d,h,p=t.workers,m=[],g=0;g<p.length;g+=1)m[g]=rt(V(t,p,g));return{c(){e=u("div"),r=u("div"),n=u("div"),s=u("table"),(o=u("thead")).innerHTML='<tr><th scope="col">#</th> <th scope="col">Id</th> <th scope="col">Halt</th> <th scope="col">Pid</th> <th scope="col">State</th> <th scope="col">Error</th> <th scope="col">Current Job</th> <th scope="col">Last Update</th> <th scope="col">Time Start</th> <th scope="col">Timeout</th></tr>',d=f(),h=u("tbody");for(var t=0;t<m.length;t+=1)m[t].c();k(s,"class","table table-striped"),k(n,"class","col-xs-12"),k(r,"class","row")},m(t,l){c(t,e,l),a(e,r),a(r,n),a(n,s),a(s,o),a(s,d),a(s,h);for(var i=0;i<m.length;i+=1)m[i].m(h,null)},p(t,e){if(t.workers||t.state){p=e.workers;for(var r=0;r<p.length;r+=1){const n=V(e,p,r);m[r]?m[r].p(t,n):(m[r]=rt(n),m[r].c(),m[r].m(h,null))}for(;r<m.length;r+=1)m[r].d(1);m.length=p.length}},d(t){t&&l(e),i(m,t)}}}function Z(t){var e,r,n,s=t.worker.state+"";return{c(){e=u("td"),r=u("span"),n=d(s),k(r,"class","label label-pill label-primary")},m(t,s){c(t,e,s),a(e,r),a(r,n)},p(t,e){t.workers&&s!==(s=e.worker.state+"")&&m(n,s)},d(t){t&&l(e)}}}function tt(t){var e,r,n,s=t.worker.state+"";return{c(){e=u("td"),r=u("span"),n=d(s),k(r,"class","label label-pill label-danger")},m(t,s){c(t,e,s),a(e,r),a(r,n)},p(t,e){t.workers&&s!==(s=e.worker.state+"")&&m(n,s)},d(t){t&&l(e)}}}function et(t){var e,r,n,s=t.worker.state+"";return{c(){e=u("td"),r=u("span"),n=d(s),k(r,"class","label label-pill label-success")},m(t,s){c(t,e,s),a(e,r),a(r,n)},p(t,e){t.workers&&s!==(s=e.worker.state+"")&&m(n,s)},d(t){t&&l(e)}}}function rt(t){var e,r,n,s,o,i,h,p,g,w,v,b,T,$,E,R,x,y,N,_,L,A,C,O,F,S,U,I,H,W,D,j,G=t.i+1+"",M=t.worker.id+"",P=t.worker.halt+"",q=t.worker.pid+"",z=t.worker.error+"",J=t.worker.current_job+"",B=t.worker.last_update+"",Q=t.worker.time_start+"",V=t.worker.timeout+"";function X(t){return t.worker.state==t.state.RESULT?et:t.worker.state==t.state.ERROR?tt:t.worker.state==t.state.NEW?Z:void 0}var Y=X(t),rt=Y&&Y(t);return{c(){e=u("tr"),r=u("th"),n=d(G),s=f(),o=u("td"),i=u("a"),h=d(M),w=f(),v=u("td"),b=d(P),T=f(),$=u("td"),E=d(q),R=f(),rt&&rt.c(),x=f(),y=u("td"),N=d(z),_=f(),L=u("td"),A=d(J),C=f(),O=u("td"),F=d(B),S=f(),U=u("td"),I=d(Q),H=f(),W=u("td"),D=d(V),j=f(),k(r,"scope","row"),k(i,"href",p="/single-worker-tasks/"+t.worker.id)},m(t,l){c(t,e,l),a(e,r),a(r,n),a(e,s),a(e,o),a(o,i),a(i,h),g=K.call(null,i)||{},a(e,w),a(e,v),a(v,b),a(e,T),a(e,$),a($,E),a(e,R),rt&&rt.m(e,null),a(e,x),a(e,y),a(y,N),a(e,_),a(e,L),a(L,A),a(e,C),a(e,O),a(O,F),a(e,S),a(e,U),a(U,I),a(e,H),a(e,W),a(W,D),a(e,j)},p(t,r){t.workers&&M!==(M=r.worker.id+"")&&m(h,M),t.workers&&p!==(p="/single-worker-tasks/"+r.worker.id)&&k(i,"href",p),t.workers&&P!==(P=r.worker.halt+"")&&m(b,P),t.workers&&q!==(q=r.worker.pid+"")&&m(E,q),Y===(Y=X(r))&&rt?rt.p(t,r):(rt&&rt.d(1),(rt=Y&&Y(r))&&(rt.c(),rt.m(e,x))),t.workers&&z!==(z=r.worker.error+"")&&m(N,z),t.workers&&J!==(J=r.worker.current_job+"")&&m(A,J),t.workers&&B!==(B=r.worker.last_update+"")&&m(F,B),t.workers&&Q!==(Q=r.worker.time_start+"")&&m(I,Q),t.workers&&V!==(V=r.worker.timeout+"")&&m(D,V)},d(t){t&&l(e),g&&"function"==typeof g.destroy&&g.destroy(),rt&&rt.d()}}}function nt(e){var r,n,s,o,i,p,g,w,v,b,T,$,E,R,x,y,N,_,L,A,C,O=e.workers.length+"";function F(t){return t.workers&&t.workers.length>0?Y:X}var S=F(e),U=S(e);return{c(){(r=u("h1")).textContent="Workers",n=f(),s=u("div"),o=u("div"),i=u("table"),(p=u("thead")).innerHTML='<tr><th class="text-center" scope="col">Total Workers</th> <th class="text-center" scope="col">New Workers</th> <th class="text-center" scope="col">Success Workers</th> <th class="text-center" scope="col">Failure Workers</th></tr>',g=f(),w=u("tbody"),v=u("td"),b=d(O),T=f(),$=u("td"),E=d(e.newCount),R=f(),x=u("td"),y=d(e.successCount),N=f(),_=u("td"),L=d(e.failureCount),A=f(),U.c(),C=h(),k(w,"class","text-center"),k(i,"class","table table-striped"),k(o,"class","col-xs-12"),k(s,"class","row mt-3 svelte-j0whez")},m(t,e){c(t,r,e),c(t,n,e),c(t,s,e),a(s,o),a(o,i),a(i,p),a(i,g),a(i,w),a(w,v),a(v,b),a(w,T),a(w,$),a($,E),a(w,R),a(w,x),a(x,y),a(w,N),a(w,_),a(_,L),c(t,A,e),U.m(t,e),c(t,C,e)},p(t,e){t.workers&&O!==(O=e.workers.length+"")&&m(b,O),t.newCount&&m(E,e.newCount),t.successCount&&m(y,e.successCount),t.failureCount&&m(L,e.failureCount),S===(S=F(e))&&U?U.p(t,e):(U.d(1),(U=S(e))&&(U.c(),U.m(C.parentNode,C)))},i:t,o:t,d(t){t&&(l(r),l(n),l(s),l(A)),U.d(t),t&&l(C)}}}function st(t,e,r){const n={RESULT:"OK",ERROR:"ERROR",NEW:"NEW"};var s=0,o=0,a=0;let c=[];return b(async()=>{GEDIS_CLIENT.execute(info={namespace:"default",actor:"myjobs",command:"list_workers"}).then(function(t){t&&(console.log(`DATA : ${t}`),r("workers",c=JSON.parse(t).workers),c.forEach(t=>{t.state=t.state.toUpperCase()}),c.forEach(t=>{t.state==n.RESULT?r("successCount",++s):t.state==n.ERROR?r("failureCount",++o):t.state==n.NEW&&r("newCount",++a)}))})}),{state:n,successCount:s,failureCount:o,newCount:a,workers:c}}class ot extends W{constructor(t){super(),H(this,t,st,nt,o,[])}}function at(t,e,r){const n=Object.create(t);return n.task=e[r],n.i=r,n}function ct(t){var e,r,n,s,o,i,h,p,g,w,v,b,T,$,E,R,x,y,N,_,L,A,C,O=t.allTasks.length+"",F=t.counters.success+"",S=t.counters.error+"",U=t.counters.new+"",I=t.counters.running+"",H=t.counters.halted+"";return{c(){e=u("div"),r=u("div"),n=u("table"),(s=u("thead")).innerHTML='<tr><th class="text-center" scope="col">Total Tasks</th> <th class="text-center" scope="col">Success Tasks</th> <th class="text-center" scope="col">Failure Tasks</th> <th class="text-center" scope="col">New Tasks</th> <th class="text-center" scope="col">Running Tasks</th> <th class="text-center" scope="col">Halted Tasks</th></tr>',o=f(),i=u("tbody"),h=u("td"),p=d(O),g=f(),w=u("td"),v=d(F),b=f(),T=u("td"),$=d(S),E=f(),R=u("td"),x=d(U),y=f(),N=u("td"),_=d(I),L=f(),A=u("td"),C=d(H),k(i,"class","text-center"),k(n,"class","table table-striped"),k(r,"class","col-xs-12"),k(e,"class","row mt-3 svelte-j0whez")},m(t,l){c(t,e,l),a(e,r),a(r,n),a(n,s),a(n,o),a(n,i),a(i,h),a(h,p),a(i,g),a(i,w),a(w,v),a(i,b),a(i,T),a(T,$),a(i,E),a(i,R),a(R,x),a(i,y),a(i,N),a(N,_),a(i,L),a(i,A),a(A,C)},p(t,e){t.allTasks&&O!==(O=e.allTasks.length+"")&&m(p,O),t.counters&&F!==(F=e.counters.success+"")&&m(v,F),t.counters&&S!==(S=e.counters.error+"")&&m($,S),t.counters&&U!==(U=e.counters.new+"")&&m(x,U),t.counters&&I!==(I=e.counters.running+"")&&m(_,I),t.counters&&H!==(H=e.counters.halted+"")&&m(C,H)},d(t){t&&l(e)}}}function lt(e){var r;return{c(){(r=u("div")).innerHTML='<img src="/img/loader.gif" class="img-fluid" alt="Responsive image">',k(r,"class","text-center")},m(t,e){c(t,r,e)},p:t,d(t){t&&l(r)}}}function it(t){var e,r,n;function s(t){return 1!=t.isError?dt:ut}var o=s(t),i=o(t);return{c(){e=u("div"),r=u("div"),n=u("div"),i.c(),k(n,"class","col-xs-12"),k(r,"class","row")},m(t,s){c(t,e,s),a(e,r),a(r,n),i.m(n,null)},p(t,e){o===(o=s(e))&&i?i.p(t,e):(i.d(1),(i=o(e))&&(i.c(),i.m(n,null)))},d(t){t&&l(e),i.d()}}}function ut(e){var r;return{c(){(r=u("h3")).textContent="There is no worker with this ID"},m(t,e){c(t,r,e)},p:t,d(t){t&&l(r)}}}function dt(t){for(var e,r,n,s,o=t.filteredTasks(),d=[],h=0;h<o.length;h+=1)d[h]=gt(at(t,o,h));return{c(){e=u("table"),(r=u("thead")).innerHTML='<tr><th scope="col">#</th> <th scope="col">Id</th> <th scope="col">Time Start</th> <th scope="col">Time Stop</th> <th scope="col">State</th> <th scope="col">Timeout</th> <th scope="col">Action</th> <th scope="col">args</th> <th scope="col">kwargs</th> <th scope="col">Result</th> <th scope="col">Error</th></tr>',n=f(),s=u("tbody");for(var t=0;t<d.length;t+=1)d[t].c();k(e,"class","table table-striped")},m(t,o){c(t,e,o),a(e,r),a(e,n),a(e,s);for(var l=0;l<d.length;l+=1)d[l].m(s,null)},p(t,e){if(t.filteredTasks||t.state){o=e.filteredTasks();for(var r=0;r<o.length;r+=1){const n=at(e,o,r);d[r]?d[r].p(t,n):(d[r]=gt(n),d[r].c(),d[r].m(s,null))}for(;r<d.length;r+=1)d[r].d(1);d.length=o.length}},d(t){t&&l(e),i(d,t)}}}function ft(t){var e,r,n,s=t.task.state+"";return{c(){e=u("td"),r=u("span"),n=d(s),k(r,"class","label label-pill label-info")},m(t,s){c(t,e,s),a(e,r),a(r,n)},p(t,e){t.filteredTasks&&s!==(s=e.task.state+"")&&m(n,s)},d(t){t&&l(e)}}}function ht(t){var e,r,n,s=t.task.state+"";return{c(){e=u("td"),r=u("span"),n=d(s),k(r,"class","label label-pill label-warning")},m(t,s){c(t,e,s),a(e,r),a(r,n)},p(t,e){t.filteredTasks&&s!==(s=e.task.state+"")&&m(n,s)},d(t){t&&l(e)}}}function pt(t){var e,r,n,s=t.task.state+"";return{c(){e=u("td"),r=u("span"),n=d(s),k(r,"class","label label-pill label-primary")},m(t,s){c(t,e,s),a(e,r),a(r,n)},p(t,e){t.filteredTasks&&s!==(s=e.task.state+"")&&m(n,s)},d(t){t&&l(e)}}}function kt(t){var e,r,n,s=t.task.state+"";return{c(){e=u("td"),r=u("span"),n=d(s),k(r,"class","label label-pill label-danger")},m(t,s){c(t,e,s),a(e,r),a(r,n)},p(t,e){t.filteredTasks&&s!==(s=e.task.state+"")&&m(n,s)},d(t){t&&l(e)}}}function mt(t){var e,r,n,s=t.task.state+"";return{c(){e=u("td"),r=u("span"),n=d(s),k(r,"class","label label-pill label-success")},m(t,s){c(t,e,s),a(e,r),a(r,n)},p(t,e){t.filteredTasks&&s!==(s=e.task.state+"")&&m(n,s)},d(t){t&&l(e)}}}function gt(t){var e,r,n,s,o,i,h,p,g,w,v,b,T,$,E,R,x,y,N,_,L,A,C,O,F,S,U,I,H,W,D,j,G=t.i+1+"",M=t.task.id+"",P=t.task.time_start+"",q=t.task.time_stop+"",z=t.task.timeout+"",J=t.task.action_id+"",K=t.task.args+"",B=t.task.kwargs+"",Q=t.task.result+"",V=t.task.error+"";function X(t){return t.task.state==t.state.RESULT?mt:t.task.state==t.state.ERROR?kt:t.task.state==t.state.NEW?pt:t.task.state==t.state.RUNNING?ht:t.task.state==t.state.HALTED?ft:void 0}var Y=X(t),Z=Y&&Y(t);return{c(){e=u("tr"),r=u("th"),n=d(G),s=f(),o=u("td"),i=d(M),h=f(),p=u("td"),g=d(P),w=f(),v=u("td"),b=d(q),T=f(),Z&&Z.c(),$=f(),E=u("td"),R=d(z),x=f(),y=u("td"),N=d(J),_=f(),L=u("td"),A=d(K),C=f(),O=u("td"),F=d(B),S=f(),U=u("td"),I=d(Q),H=f(),W=u("td"),D=d(V),j=f(),k(r,"scope","row")},m(t,l){c(t,e,l),a(e,r),a(r,n),a(e,s),a(e,o),a(o,i),a(e,h),a(e,p),a(p,g),a(e,w),a(e,v),a(v,b),a(e,T),Z&&Z.m(e,null),a(e,$),a(e,E),a(E,R),a(e,x),a(e,y),a(y,N),a(e,_),a(e,L),a(L,A),a(e,C),a(e,O),a(O,F),a(e,S),a(e,U),a(U,I),a(e,H),a(e,W),a(W,D),a(e,j)},p(t,r){t.filteredTasks&&M!==(M=r.task.id+"")&&m(i,M),t.filteredTasks&&P!==(P=r.task.time_start+"")&&m(g,P),t.filteredTasks&&q!==(q=r.task.time_stop+"")&&m(b,q),Y===(Y=X(r))&&Z?Z.p(t,r):(Z&&Z.d(1),(Z=Y&&Y(r))&&(Z.c(),Z.m(e,$))),t.filteredTasks&&z!==(z=r.task.timeout+"")&&m(R,z),t.filteredTasks&&J!==(J=r.task.action_id+"")&&m(N,J),t.filteredTasks&&K!==(K=r.task.args+"")&&m(A,K),t.filteredTasks&&B!==(B=r.task.kwargs+"")&&m(F,B),t.filteredTasks&&Q!==(Q=r.task.result+"")&&m(I,Q),t.filteredTasks&&V!==(V=r.task.error+"")&&m(D,V)},d(t){t&&l(e),Z&&Z.d()}}}function wt(e){var r,s,o,i,d,k,m,w,v,b,T,$,E,R,x,y,N=1!=e.isError&&ct(e);function _(t){return t.filteredTasks()&&t.filteredTasks().length>0?it:lt}var L=_(e),A=L(e);return{c(){r=u("div"),(s=u("button")).textContent="All",o=f(),(i=u("button")).textContent="Succes",d=f(),(k=u("button")).textContent="Failure",m=f(),(w=u("button")).textContent="New",v=f(),(b=u("button")).textContent="Running",T=f(),($=u("button")).textContent="Halted",E=f(),N&&N.c(),R=f(),A.c(),x=h(),g(s,"active",e.currentFilter===e.state.ALL),g(i,"active",e.currentFilter===e.state.RESULT),g(k,"active",e.currentFilter===e.state.ERROR),g(w,"active",e.currentFilter===e.state.NEW),g(b,"active",e.currentFilter===e.state.RUNNING),g($,"active",e.currentFilter===e.state.HALTED),y=[p(s,"click",e.click_handler),p(i,"click",e.click_handler_1),p(k,"click",e.click_handler_2),p(w,"click",e.click_handler_3),p(b,"click",e.click_handler_4),p($,"click",e.click_handler_5)]},m(t,e){c(t,r,e),a(r,s),a(r,o),a(r,i),a(r,d),a(r,k),a(r,m),a(r,w),a(r,v),a(r,b),a(r,T),a(r,$),c(t,E,e),N&&N.m(t,e),c(t,R,e),A.m(t,e),c(t,x,e)},p(t,e){(t.currentFilter||t.state)&&(g(s,"active",e.currentFilter===e.state.ALL),g(i,"active",e.currentFilter===e.state.RESULT),g(k,"active",e.currentFilter===e.state.ERROR),g(w,"active",e.currentFilter===e.state.NEW),g(b,"active",e.currentFilter===e.state.RUNNING),g($,"active",e.currentFilter===e.state.HALTED)),1!=e.isError?N?N.p(t,e):((N=ct(e)).c(),N.m(R.parentNode,R)):N&&(N.d(1),N=null),L===(L=_(e))&&A?A.p(t,e):(A.d(1),(A=L(e))&&(A.c(),A.m(x.parentNode,x)))},i:t,o:t,d(t){t&&(l(r),l(E)),N&&N.d(t),t&&l(R),A.d(t),t&&l(x),n(y)}}}function vt(t,e,r){let{allTasks:n=[],isError:s=!1}=e;const o={RESULT:"OK",ERROR:"ERROR",NEW:"NEW",RUNNING:"RUNNING",HALTED:"HALTED",ALL:"all"};let a,c={success:0,error:0,new:0,running:0,halted:0},l=o.ALL;function i(t){let e=[];return n.forEach(r=>{r.state==t&&e.push(r)}),e}function u(t){r("currentFilter",l=t)}return t.$set=(t=>{"allTasks"in t&&r("allTasks",n=t.allTasks),"isError"in t&&r("isError",s=t.isError)}),t.$$.update=((t={currentFilter:1,allTasks:1})=>{(t.currentFilter||t.allTasks)&&r("filteredTasks",a=(()=>(r("counters",c={success:0,error:0,new:0,running:0,halted:0}),n.forEach(t=>{console.log(`task.state: ${t.state}`),t.state===o.RESULT?(c.success++,r("counters",c),r("currentFilter",l),r("allTasks",n)):t.state===o.ERROR?(c.error++,r("counters",c),r("currentFilter",l),r("allTasks",n)):t.state===o.NEW?(c.new++,r("counters",c),r("currentFilter",l),r("allTasks",n)):t.state===o.RUNNING?(c.running++,r("counters",c),r("currentFilter",l),r("allTasks",n)):t.state===o.HALTED?(c.halted++,r("counters",c),r("currentFilter",l),r("allTasks",n)):console.log(`task.state: ${t.state}`)}),l==o.ALL?n:l==o.RESULT?i(o.RESULT):l==o.ERROR?i(o.ERROR):l==o.NEW?i(o.NEW):l==o.RUNNING?i(o.RUNNING):l==o.HALTED?i(o.HALTED):void 0)))}),{allTasks:n,isError:s,state:o,counters:c,currentFilter:l,updateFilter:u,filteredTasks:a,click_handler:function(){return u(o.ALL)},click_handler_1:function(){return u(o.RESULT)},click_handler_2:function(){return u(o.ERROR)},click_handler_3:function(){return u(o.NEW)},click_handler_4:function(){return u(o.RUNNING)},click_handler_5:function(){return u(o.HALTED)}}}class bt extends W{constructor(t){super(),H(this,t,vt,wt,o,["allTasks","isError"])}}function Tt(t){var e,r,n,s=new bt({props:{allTasks:t.allTasks}});return{c(){(e=u("h1")).textContent="Tasks",r=f(),s.$$.fragment.c()},m(t,o){c(t,e,o),c(t,r,o),S(s,t,o),n=!0},p(t,e){var r={};t.allTasks&&(r.allTasks=e.allTasks),s.$set(r)},i(t){n||(O(s.$$.fragment,t),n=!0)},o(t){F(s.$$.fragment,t),n=!1},d(t){t&&(l(e),l(r)),U(s,t)}}}function $t(t,e,r){let n=[];return n.forEach(t=>{t.state=t.state.toUpperCase()}),b(async()=>{GEDIS_CLIENT.execute(info={namespace:"default",actor:"myjobs",command:"list_jobs"}).then(function(t){console.log(`DATA : ${t}`),t&&(r("allTasks",n=JSON.parse(t).jobs),n.forEach(t=>{t.state=t.state.toUpperCase()}))})}),{allTasks:n}}function Et(e){return{c:t,m:t,p:t,i:t,o:t,d:t}}let Rt,xt,yt=[];function Nt(t){t.node.classList.remove(t.className),t.pattern.test(Rt)&&t.node.classList.add(t.className)}function _t(e){var r,n,s,o,i,d,h,p,m,g,w,v,b,T;return{c(){r=u("div"),n=u("nav"),s=u("div"),(o=u("div")).innerHTML='<span class="navbar-brand" href="#">Jobs visualization</span>',i=f(),d=u("ul"),h=u("li"),(p=u("a")).textContent="Workers",g=f(),w=u("li"),(v=u("a")).textContent="Tasks",k(o,"class","navbar-header"),k(p,"href","/workers"),k(v,"href","/tasks"),k(d,"class","nav navbar-nav"),k(s,"class","container-fluid"),k(n,"class","navbar navbar-inverse test")},m(t,e){c(t,r,e),a(r,n),a(n,s),a(s,o),a(s,i),a(s,d),a(d,h),a(h,p),m=K.call(null,p)||{},a(d,g),a(d,w),a(w,v),b=K.call(null,v)||{},T=function(t,e,r){if(!e&&t.hasAttribute("href")&&(e=t.getAttribute("href"))&&e.length>1&&"#"==e.charAt(0)&&(e=e.substring(1)),r||(r="active"),!e||e.length<1||"/"!=e.charAt(0)&&"*"!=e.charAt(0))throw Error('Invalid value for "path" argument');const{pattern:n}=P(e),s={node:t,className:r,pattern:n};return yt.push(s),Nt(s),{destroy(){yt=yt.splice(yt.indexOf(s),1)}}}.call(null,v,"/tasks/*","my-active")||{}},p:t,i:t,o:t,d(t){t&&l(r),m&&"function"==typeof m.destroy&&m.destroy(),b&&"function"==typeof b.destroy&&b.destroy(),T&&"function"==typeof T.destroy&&T.destroy()}}}J.subscribe(t=>{Rt=t.location+(t.querystring?"?"+t.querystring:""),yt.map(Nt)});class Lt extends W{constructor(t){super(),H(this,t,null,_t,o,[])}}function At(e){var r,n,s;return{c(){(r=u("h2")).textContent="Not Found",n=f(),(s=u("h3")).textContent="Oops, this route doesn't exist!"},m(t,e){c(t,r,e),c(t,n,e),c(t,s,e)},p:t,i:t,o:t,d(t){t&&(l(r),l(n),l(s))}}}(xt=new Map).set("/",ot),xt.set("/workers",ot),xt.set("/tasks",class extends W{constructor(t){super(),H(this,t,$t,Tt,o,[])}}),xt.set("/single-worker-tasks/:taskId",class extends W{constructor(t){super(),H(this,t,null,Et,o,[])}}),xt.set("*",class extends W{constructor(t){super(),H(this,t,null,At,o,[])}});var Ct=xt;function Ot(t){var e,r,n,s,o=new Lt({}),a=new Q({props:{routes:Ct}});return{c(){e=u("div"),o.$$.fragment.c(),r=f(),n=u("div"),a.$$.fragment.c(),k(n,"class","container")},m(t,l){c(t,e,l),S(o,e,null),c(t,r,l),c(t,n,l),S(a,n,null),s=!0},p(t,e){var r={};t.routes&&(r.routes=Ct),a.$set(r)},i(t){s||(O(o.$$.fragment,t),O(a.$$.fragment,t),s=!0)},o(t){F(o.$$.fragment,t),F(a.$$.fragment,t),s=!1},d(t){t&&l(e),U(o),t&&(l(r),l(n)),U(a)}}}return new class extends W{constructor(t){super(),H(this,t,null,Ot,o,[])}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
