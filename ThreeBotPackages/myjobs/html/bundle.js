var app=function(){"use strict";function t(){}function e(t){return t()}function r(){return Object.create(null)}function n(t){t.forEach(e)}function s(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(t,e){t.appendChild(e)}function c(t,e,r){t.insertBefore(e,r||null)}function l(t){t.parentNode.removeChild(t)}function i(t,e){for(let r=0;r<t.length;r+=1)t[r]&&t[r].d(e)}function u(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function f(){return d(" ")}function h(){return d("")}function p(t,e,r,n){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r,n)}function k(t,e,r){null==r?t.removeAttribute(e):t.setAttribute(e,r)}function m(t,e){e=""+e,t.data!==e&&(t.data=e)}function g(t,e,r){t.classList[r?"add":"remove"](e)}let w;function v(t){w=t}function b(t){(function(){if(!w)throw new Error("Function called outside component initialization");return w})().$$.on_mount.push(t)}const _=[],T=[],$=[],E=[],y=Promise.resolve();let R=!1;function x(t){$.push(t)}function N(){const t=new Set;do{for(;_.length;){const t=_.shift();v(t),L(t.$$)}for(;T.length;)T.pop()();for(let e=0;e<$.length;e+=1){const r=$[e];t.has(r)||(r(),t.add(r))}$.length=0}while(_.length);for(;E.length;)E.pop()();R=!1}function L(t){t.fragment&&(t.update(t.dirty),n(t.before_update),t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_update.forEach(x))}const C=new Set;let A;function F(t,e){t&&t.i&&(C.delete(t),t.i(e))}function O(t,e,r,n){if(t&&t.o){if(C.has(t))return;C.add(t),A.c.push(()=>{C.delete(t),n&&(r&&t.d(1),n())}),t.o(e)}}function U(t,r,o){const{fragment:a,on_mount:c,on_destroy:l,after_update:i}=t.$$;a.m(r,o),x(()=>{const r=c.map(e).filter(s);l?l.push(...r):n(r),t.$$.on_mount=[]}),i.forEach(x)}function S(t,e){t.$$.fragment&&(n(t.$$.on_destroy),t.$$.fragment.d(e),t.$$.on_destroy=t.$$.fragment=null,t.$$.ctx={})}function W(t,e){t.$$.dirty||(_.push(t),R||(R=!0,y.then(N)),t.$$.dirty=r()),t.$$.dirty[e]=!0}function H(e,s,o,a,c,l){const i=w;v(e);const u=s.props||{},d=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:c,bound:r(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(i?i.$$.context:[]),callbacks:r(),dirty:null};let f=!1;var h;d.ctx=o?o(e,u,(t,r)=>{d.ctx&&c(d.ctx[t],d.ctx[t]=r)&&(d.bound[t]&&d.bound[t](r),f&&W(e,t))}):u,d.update(),f=!0,n(d.before_update),d.fragment=a(d.ctx),s.target&&(s.hydrate?d.fragment.l((h=s.target,Array.from(h.childNodes))):d.fragment.c(),s.intro&&F(e.$$.fragment),U(e,s.target,s.anchor),N()),v(i)}class I{$destroy(){S(this,1),this.$destroy=t}$on(t,e){const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(e),()=>{const t=r.indexOf(e);-1!==t&&r.splice(t,1)}}$set(){}}const q=[];function j(t,e){return{subscribe:D(t,e).subscribe}}function D(e,r=t){let n;const s=[];function a(t){if(o(e,t)&&(e=t,n)){const t=!q.length;for(let t=0;t<s.length;t+=1){const r=s[t];r[1](),q.push(r,e)}if(t){for(let t=0;t<q.length;t+=2)q[t][0](q[t+1]);q.length=0}}}return{set:a,update:function(t){a(t(e))},subscribe:function(o,c=t){const l=[o,c];return s.push(l),1===s.length&&(n=r(a)||t),o(e),()=>{const t=s.indexOf(l);-1!==t&&s.splice(t,1),0===s.length&&(n(),n=null)}}}}function M(e,r,o){const a=!Array.isArray(e),c=a?[e]:e,l=r.length<2;return j(o,e=>{let o=!1;const i=[];let u=0,d=t;const f=()=>{if(u)return;d();const n=r(a?i[0]:i,e);l?e(n):d=s(n)?n:t},h=c.map((t,e)=>t.subscribe(t=>{i[e]=t,u&=~(1<<e),o&&f()},()=>{u|=1<<e}));return o=!0,f(),function(){n(h),d()}})}function G(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var r,n,s,o,a=[],c="",l=t.split("/");for(l[0]||l.shift();s=l.shift();)"*"===(r=s[0])?(a.push("wild"),c+="/(.*)"):":"===r?(n=s.indexOf("?",1),o=s.indexOf(".",1),a.push(s.substring(1,~n?n:~o?o:s.length)),c+=~n&&!~o?"(?:/([^/]+?))?":"/([^/]+?)",~o&&(c+=(~n?"?":"")+"\\"+s.substring(o))):c+="/"+s;return{keys:a,pattern:new RegExp("^"+c+(e?"(?=$|/)":"/?$"),"i")}}function P(t){var e,r,s=t.component;function o(t){return{props:{params:t.componentParams}}}if(s)var a=new s(o(t));return{c(){a&&a.$$.fragment.c(),e=h()},m(t,n){a&&U(a,t,n),c(t,e,n),r=!0},p(t,r){var c={};if(t.componentParams&&(c.params=r.componentParams),s!==(s=r.component)){if(a){A={r:0,c:[],p:A};const t=a;O(t.$$.fragment,1,0,()=>{S(t,1)}),A.r||n(A.c),A=A.p}s?((a=new s(o(r))).$$.fragment.c(),F(a.$$.fragment,1),U(a,e.parentNode,e)):a=null}else s&&a.$set(c)},i(t){r||(a&&F(a.$$.fragment,t),r=!0)},o(t){a&&O(a.$$.fragment,t),r=!1},d(t){t&&l(e),a&&S(a,t)}}}function z(){const t=window.location.href.indexOf("#/");let e=t>-1?window.location.href.substr(t+1):"/";const r=e.indexOf("?");let n="";return r>-1&&(n=e.substr(r+1),e=e.substr(0,r)),{location:e,querystring:n}}const J=j(z(),function(t){const e=()=>{t(z())};return window.addEventListener("hashchange",e,!1),function(){window.removeEventListener("hashchange",e,!1)}});M(J,t=>t.location),M(J,t=>t.querystring);function K(t){if(!t||!t.tagName||"a"!=t.tagName.toLowerCase())throw Error('Action "link" can only be used with <a> tags');const e=t.getAttribute("href");if(!e||e.length<1||"/"!=e.charAt(0))throw Error('Invalid value for "href" attribute');t.addEventListener("click",t=>{let e;t.preventDefault();let r=t.target;for(;null===(e=r.getAttribute("href"));)if(null===(r=r.parentElement))throw Error("Could not find corresponding href value");return function(t){if(!t||t.length<1||"/"!=t.charAt(0))throw Error("Invalid parameter location");setTimeout(()=>{window.location.hash="#"+t},0)}(e),!1})}function B(t,e,r){let n;!function(t,e,r){t.$$.on_destroy.push(function(t,e){const r=t.subscribe(e);return r.unsubscribe?()=>r.unsubscribe():r}(e,r))}(t,J,t=>{r("$loc",n=t)});let{routes:s={}}=e;class o{constructor(t,e){if(!t||"string"==typeof t&&(t.length<1||"/"!=t.charAt(0)&&"*"!=t.charAt(0))||"object"==typeof t&&!(t instanceof RegExp))throw Error('Invalid value for "path" argument');const{pattern:r,keys:n}=G(t);this.path=t,this.component=e,this._pattern=r,this._keys=n}match(t){const e=this._pattern.exec(t);if(null===e)return null;if(!1===this._keys)return e;const r={};let n=0;for(;n<this._keys.length;)r[this._keys[n]]=e[++n]||null;return r}}const a=s instanceof Map?s:Object.entries(s),c=[];for(const[t,e]of a)c.push(new o(t,e));let l=null,i={};return t.$set=(t=>{"routes"in t&&r("routes",s=t.routes)}),t.$$.update=((t={component:1,$loc:1})=>{if(t.component||t.$loc){r("component",l=null);let t=0;for(;!l&&t<c.length;){const e=c[t].match(n.location);e&&(r("component",l=c[t].component),r("componentParams",i=e)),t++}}}),{routes:s,component:l,componentParams:i}}class Q extends I{constructor(t){super(),H(this,t,B,P,o,["routes"])}}function V(t,e,r){const n=Object.create(t);return n.worker=e[r],n.i=r,n}function X(e){var r;return{c(){(r=u("div")).innerHTML='<img src="/img/loader.gif" class="img-fluid" alt="Responsive image">',k(r,"class","text-center")},m(t,e){c(t,r,e)},p:t,d(t){t&&l(r)}}}function Y(t){for(var e,r,n,s,o,h,p,g,w,v,b,_,T,$,E,y,R,x,N,L,C,A,F,O,U,S=t.workers.length+"",W=t.workers,H=[],I=0;I<W.length;I+=1)H[I]=rt(V(t,W,I));return{c(){e=u("div"),r=u("div"),n=u("div"),s=u("table"),(o=u("thead")).innerHTML='<tr><th scope="col">#</th> <th scope="col">Id</th> <th scope="col">Halt</th> <th scope="col">Pid</th> <th scope="col">State</th> <th scope="col">Error</th> <th scope="col">Current Job</th> <th scope="col">Last Update</th> <th scope="col">Time Start</th> <th scope="col">Timeout</th></tr>',h=f(),p=u("tbody");for(var a=0;a<H.length;a+=1)H[a].c();g=f(),w=u("div"),v=u("div"),b=u("table"),(_=u("thead")).innerHTML='<tr><th class="text-center" scope="col">Total Workers</th> <th class="text-center" scope="col">New Workers</th> <th class="text-center" scope="col">Success Workers</th> <th class="text-center" scope="col">Failure Workers</th></tr>',T=f(),$=u("tbody"),E=u("td"),y=d(S),R=f(),x=u("td"),N=d(t.newCount),L=f(),C=u("td"),A=d(t.successCount),F=f(),O=u("td"),U=d(t.failureCount),k(s,"class","table table-striped"),k(n,"class","col-xs-12"),k(r,"class","row"),k($,"class","text-center"),k(b,"class","table table-striped"),k(v,"class","col-xs-12"),k(w,"class","row mt-3 svelte-x2fmb9")},m(t,l){c(t,e,l),a(e,r),a(r,n),a(n,s),a(s,o),a(s,h),a(s,p);for(var i=0;i<H.length;i+=1)H[i].m(p,null);a(e,g),a(e,w),a(w,v),a(v,b),a(b,_),a(b,T),a(b,$),a($,E),a(E,y),a($,R),a($,x),a(x,N),a($,L),a($,C),a(C,A),a($,F),a($,O),a(O,U)},p(t,e){if(t.workers||t.state){W=e.workers;for(var r=0;r<W.length;r+=1){const n=V(e,W,r);H[r]?H[r].p(t,n):(H[r]=rt(n),H[r].c(),H[r].m(p,null))}for(;r<H.length;r+=1)H[r].d(1);H.length=W.length}t.workers&&S!==(S=e.workers.length+"")&&m(y,S),t.newCount&&m(N,e.newCount),t.successCount&&m(A,e.successCount),t.failureCount&&m(U,e.failureCount)},d(t){t&&l(e),i(H,t)}}}function Z(t){var e,r,n,s=t.worker.state+"";return{c(){e=u("td"),r=u("span"),n=d(s),k(r,"class","label label-pill label-primary")},m(t,s){c(t,e,s),a(e,r),a(r,n)},p(t,e){t.workers&&s!==(s=e.worker.state+"")&&m(n,s)},d(t){t&&l(e)}}}function tt(t){var e,r,n,s=t.worker.state+"";return{c(){e=u("td"),r=u("span"),n=d(s),k(r,"class","label label-pill label-danger")},m(t,s){c(t,e,s),a(e,r),a(r,n)},p(t,e){t.workers&&s!==(s=e.worker.state+"")&&m(n,s)},d(t){t&&l(e)}}}function et(t){var e,r,n,s=t.worker.state+"";return{c(){e=u("td"),r=u("span"),n=d(s),k(r,"class","label label-pill label-success")},m(t,s){c(t,e,s),a(e,r),a(r,n)},p(t,e){t.workers&&s!==(s=e.worker.state+"")&&m(n,s)},d(t){t&&l(e)}}}function rt(t){var e,r,n,s,o,i,h,p,g,w,v,b,_,T,$,E,y,R,x,N,L,C,A,F,O,U,S,W,H,I,q,j,D=t.i+1+"",M=t.worker.id+"",G=t.worker.halt+"",P=t.worker.pid+"",z=t.worker.error+"",J=t.worker.current_job+"",B=t.worker.last_update+"",Q=t.worker.time_start+"",V=t.worker.timeout+"";function X(t){return t.worker.state==t.state.RESULT?et:t.worker.state==t.state.ERROR?tt:t.worker.state==t.state.NEW?Z:void 0}var Y=X(t),rt=Y&&Y(t);return{c(){e=u("tr"),r=u("th"),n=d(D),s=f(),o=u("td"),i=u("a"),h=d(M),w=f(),v=u("td"),b=d(G),_=f(),T=u("td"),$=d(P),E=f(),rt&&rt.c(),y=f(),R=u("td"),x=d(z),N=f(),L=u("td"),C=d(J),A=f(),F=u("td"),O=d(B),U=f(),S=u("td"),W=d(Q),H=f(),I=u("td"),q=d(V),j=f(),k(r,"scope","row"),k(i,"href",p="/single-worker-tasks/"+t.worker.id)},m(t,l){c(t,e,l),a(e,r),a(r,n),a(e,s),a(e,o),a(o,i),a(i,h),g=K.call(null,i)||{},a(e,w),a(e,v),a(v,b),a(e,_),a(e,T),a(T,$),a(e,E),rt&&rt.m(e,null),a(e,y),a(e,R),a(R,x),a(e,N),a(e,L),a(L,C),a(e,A),a(e,F),a(F,O),a(e,U),a(e,S),a(S,W),a(e,H),a(e,I),a(I,q),a(e,j)},p(t,r){t.workers&&M!==(M=r.worker.id+"")&&m(h,M),t.workers&&p!==(p="/single-worker-tasks/"+r.worker.id)&&k(i,"href",p),t.workers&&G!==(G=r.worker.halt+"")&&m(b,G),t.workers&&P!==(P=r.worker.pid+"")&&m($,P),Y===(Y=X(r))&&rt?rt.p(t,r):(rt&&rt.d(1),(rt=Y&&Y(r))&&(rt.c(),rt.m(e,y))),t.workers&&z!==(z=r.worker.error+"")&&m(x,z),t.workers&&J!==(J=r.worker.current_job+"")&&m(C,J),t.workers&&B!==(B=r.worker.last_update+"")&&m(O,B),t.workers&&Q!==(Q=r.worker.time_start+"")&&m(W,Q),t.workers&&V!==(V=r.worker.timeout+"")&&m(q,V)},d(t){t&&l(e),g&&"function"==typeof g.destroy&&g.destroy(),rt&&rt.d()}}}function nt(e){var r,n,s;function o(t){return t.workers&&t.workers.length>0?Y:X}var a=o(e),i=a(e);return{c(){(r=u("h1")).textContent="Workers",n=f(),i.c(),s=h()},m(t,e){c(t,r,e),c(t,n,e),i.m(t,e),c(t,s,e)},p(t,e){a===(a=o(e))&&i?i.p(t,e):(i.d(1),(i=a(e))&&(i.c(),i.m(s.parentNode,s)))},i:t,o:t,d(t){t&&(l(r),l(n)),i.d(t),t&&l(s)}}}function st(t,e,r){const n={RESULT:"OK",ERROR:"ERROR",NEW:"NEW"};var s=0,o=0,a=0;let c=[];return b(async()=>{new Promise((t,e)=>{const r=[{timeout:"3,600",time_start:"2019/08/21 15:57:51",last_update:"2019/08/21 16:10:03",current_job:"-",error:"",state:"NEW",pid:"0",halt:!1,id:1},{timeout:"3,600",time_start:"2019/08/21 15:57:54",last_update:"2019/08/21 15:57:54",current_job:"-",error:"something wrong",state:"error",pid:"0",halt:!1,id:2},{timeout:"3,600",time_start:"2019/08/21 15:57:56",last_update:"2019/08/21 16:03:42",current_job:"-",error:"",state:"NEW",pid:"0",halt:!1,id:3}];setTimeout(function(){t(r)},5e3)}).then(function(t){t&&(r("workers",c=t),c.forEach(t=>{t.state=t.state.toUpperCase()}),c.forEach(t=>{t.state==n.RESULT?r("successCount",++s):t.state==n.ERROR?r("failureCount",++o):t.state==n.NEW&&r("newCount",++a)}))})}),{state:n,successCount:s,failureCount:o,newCount:a,workers:c}}class ot extends I{constructor(t){super(),H(this,t,st,nt,o,[])}}function at(t,e,r){const n=Object.create(t);return n.task=e[r],n.i=r,n}function ct(e){var r;return{c(){(r=u("div")).innerHTML='<img src="/img/loader.gif" class="img-fluid" alt="Responsive image">',k(r,"class","text-center")},m(t,e){c(t,r,e)},p:t,d(t){t&&l(r)}}}function lt(t){var e,r,s,o,i,d,h,m,w,v,b,_,T,$,E,y,R,x;function N(t){return 1!=t.isError?ut:it}var L=N(t),C=L(t),A=1!=t.isError&&gt(t);return{c(){e=u("div"),r=u("div"),s=u("div"),C.c(),o=f(),i=u("div"),(d=u("button")).textContent="All",h=f(),(m=u("button")).textContent="Succes",w=f(),(v=u("button")).textContent="Failure",b=f(),(_=u("button")).textContent="New",T=f(),($=u("button")).textContent="Running",E=f(),(y=u("button")).textContent="Halted",R=f(),A&&A.c(),k(s,"class","col-xs-12"),k(r,"class","row"),g(d,"active",t.currentFilter===t.state.ALL),g(m,"active",t.currentFilter===t.state.RESULT),g(v,"active",t.currentFilter===t.state.ERROR),g(_,"active",t.currentFilter===t.state.NEW),g($,"active",t.currentFilter===t.state.RUNNING),g(y,"active",t.currentFilter===t.state.HALTED),x=[p(d,"click",t.click_handler),p(m,"click",t.click_handler_1),p(v,"click",t.click_handler_2),p(_,"click",t.click_handler_3),p($,"click",t.click_handler_4),p(y,"click",t.click_handler_5)]},m(t,n){c(t,e,n),a(e,r),a(r,s),C.m(s,null),a(e,o),a(e,i),a(i,d),a(i,h),a(i,m),a(i,w),a(i,v),a(i,b),a(i,_),a(i,T),a(i,$),a(i,E),a(i,y),a(e,R),A&&A.m(e,null)},p(t,r){L===(L=N(r))&&C?C.p(t,r):(C.d(1),(C=L(r))&&(C.c(),C.m(s,null))),(t.currentFilter||t.state)&&(g(d,"active",r.currentFilter===r.state.ALL),g(m,"active",r.currentFilter===r.state.RESULT),g(v,"active",r.currentFilter===r.state.ERROR),g(_,"active",r.currentFilter===r.state.NEW),g($,"active",r.currentFilter===r.state.RUNNING),g(y,"active",r.currentFilter===r.state.HALTED)),1!=r.isError?A?A.p(t,r):((A=gt(r)).c(),A.m(e,null)):A&&(A.d(1),A=null)},d(t){t&&l(e),C.d(),A&&A.d(),n(x)}}}function it(e){var r;return{c(){(r=u("h3")).textContent="There is no worker with this ID"},m(t,e){c(t,r,e)},p:t,d(t){t&&l(r)}}}function ut(t){for(var e,r,n,s,o=t.filteredTasks(),d=[],h=0;h<o.length;h+=1)d[h]=mt(at(t,o,h));return{c(){e=u("table"),(r=u("thead")).innerHTML='<tr><th scope="col">#</th> <th scope="col">Id</th> <th scope="col">Category</th> <th scope="col">Time Start</th> <th scope="col">Time Stop</th> <th scope="col">State</th> <th scope="col">Timeout</th> <th scope="col">Action Id</th> <th scope="col">args</th> <th scope="col">kwargs</th> <th scope="col">Result</th> <th scope="col">Error</th> <th scope="col">Return Queues</th></tr>',n=f(),s=u("tbody");for(var t=0;t<d.length;t+=1)d[t].c();k(e,"class","table table-striped")},m(t,o){c(t,e,o),a(e,r),a(e,n),a(e,s);for(var l=0;l<d.length;l+=1)d[l].m(s,null)},p(t,e){if(t.filteredTasks||t.state){o=e.filteredTasks();for(var r=0;r<o.length;r+=1){const n=at(e,o,r);d[r]?d[r].p(t,n):(d[r]=mt(n),d[r].c(),d[r].m(s,null))}for(;r<d.length;r+=1)d[r].d(1);d.length=o.length}},d(t){t&&l(e),i(d,t)}}}function dt(t){var e,r,n,s=t.task.state+"";return{c(){e=u("td"),r=u("span"),n=d(s),k(r,"class","label label-pill label-info")},m(t,s){c(t,e,s),a(e,r),a(r,n)},p(t,e){t.filteredTasks&&s!==(s=e.task.state+"")&&m(n,s)},d(t){t&&l(e)}}}function ft(t){var e,r,n,s=t.task.state+"";return{c(){e=u("td"),r=u("span"),n=d(s),k(r,"class","label label-pill label-warning")},m(t,s){c(t,e,s),a(e,r),a(r,n)},p(t,e){t.filteredTasks&&s!==(s=e.task.state+"")&&m(n,s)},d(t){t&&l(e)}}}function ht(t){var e,r,n,s=t.task.state+"";return{c(){e=u("td"),r=u("span"),n=d(s),k(r,"class","label label-pill label-primary")},m(t,s){c(t,e,s),a(e,r),a(r,n)},p(t,e){t.filteredTasks&&s!==(s=e.task.state+"")&&m(n,s)},d(t){t&&l(e)}}}function pt(t){var e,r,n,s=t.task.state+"";return{c(){e=u("td"),r=u("span"),n=d(s),k(r,"class","label label-pill label-danger")},m(t,s){c(t,e,s),a(e,r),a(r,n)},p(t,e){t.filteredTasks&&s!==(s=e.task.state+"")&&m(n,s)},d(t){t&&l(e)}}}function kt(t){var e,r,n,s=t.task.state+"";return{c(){e=u("td"),r=u("span"),n=d(s),k(r,"class","label label-pill label-success")},m(t,s){c(t,e,s),a(e,r),a(r,n)},p(t,e){t.filteredTasks&&s!==(s=e.task.state+"")&&m(n,s)},d(t){t&&l(e)}}}function mt(t){var e,r,n,s,o,i,h,p,g,w,v,b,_,T,$,E,y,R,x,N,L,C,A,F,O,U,S,W,H,I,q,j,D,M,G,P,z,J,K=t.i+1+"",B=t.task.id+"",Q=t.task.category+"",V=t.task.time_start+"",X=t.task.time_stop+"",Y=t.task.timeout+"",Z=t.task.action_id+"",tt=t.task.args+"",et=t.task.kwargs+"",rt=t.task.result+"",nt=t.task.error+"",st=t.task.return_queues+"";function ot(t){return t.task.state==t.state.RESULT?kt:t.task.state==t.state.ERROR?pt:t.task.state==t.state.NEW?ht:t.task.state==t.state.RUNNING?ft:t.task.state==t.state.HALTED?dt:void 0}var at=ot(t),ct=at&&at(t);return{c(){e=u("tr"),r=u("th"),n=d(K),s=f(),o=u("td"),i=d(B),h=f(),p=u("td"),g=d(Q),w=f(),v=u("td"),b=d(V),_=f(),T=u("td"),$=d(X),E=f(),ct&&ct.c(),y=f(),R=u("td"),x=d(Y),N=f(),L=u("td"),C=d(Z),A=f(),F=u("td"),O=d(tt),U=f(),S=u("td"),W=d(et),H=f(),I=u("td"),q=d(rt),j=f(),D=u("td"),M=d(nt),G=f(),P=u("td"),z=d(st),J=f(),k(r,"scope","row")},m(t,l){c(t,e,l),a(e,r),a(r,n),a(e,s),a(e,o),a(o,i),a(e,h),a(e,p),a(p,g),a(e,w),a(e,v),a(v,b),a(e,_),a(e,T),a(T,$),a(e,E),ct&&ct.m(e,null),a(e,y),a(e,R),a(R,x),a(e,N),a(e,L),a(L,C),a(e,A),a(e,F),a(F,O),a(e,U),a(e,S),a(S,W),a(e,H),a(e,I),a(I,q),a(e,j),a(e,D),a(D,M),a(e,G),a(e,P),a(P,z),a(e,J)},p(t,r){t.filteredTasks&&B!==(B=r.task.id+"")&&m(i,B),t.filteredTasks&&Q!==(Q=r.task.category+"")&&m(g,Q),t.filteredTasks&&V!==(V=r.task.time_start+"")&&m(b,V),t.filteredTasks&&X!==(X=r.task.time_stop+"")&&m($,X),at===(at=ot(r))&&ct?ct.p(t,r):(ct&&ct.d(1),(ct=at&&at(r))&&(ct.c(),ct.m(e,y))),t.filteredTasks&&Y!==(Y=r.task.timeout+"")&&m(x,Y),t.filteredTasks&&Z!==(Z=r.task.action_id+"")&&m(C,Z),t.filteredTasks&&tt!==(tt=r.task.args+"")&&m(O,tt),t.filteredTasks&&et!==(et=r.task.kwargs+"")&&m(W,et),t.filteredTasks&&rt!==(rt=r.task.result+"")&&m(q,rt),t.filteredTasks&&nt!==(nt=r.task.error+"")&&m(M,nt),t.filteredTasks&&st!==(st=r.task.return_queues+"")&&m(z,st)},d(t){t&&l(e),ct&&ct.d()}}}function gt(t){var e,r,n,s,o,i,h,p,g,w,v,b,_,T,$,E,y,R,x,N,L,C,A,F=t.allTasks.length+"",O=t.counters.success+"",U=t.counters.error+"",S=t.counters.new+"",W=t.counters.running+"",H=t.counters.halted+"";return{c(){e=u("div"),r=u("div"),n=u("table"),(s=u("thead")).innerHTML='<tr><th class="text-center" scope="col">Total Tasks</th> <th class="text-center" scope="col">Success Tasks</th> <th class="text-center" scope="col">Failure Tasks</th> <th class="text-center" scope="col">New Tasks</th> <th class="text-center" scope="col">Running Tasks</th> <th class="text-center" scope="col">Halted Tasks</th></tr>',o=f(),i=u("tbody"),h=u("td"),p=d(F),g=f(),w=u("td"),v=d(O),b=f(),_=u("td"),T=d(U),$=f(),E=u("td"),y=d(S),R=f(),x=u("td"),N=d(W),L=f(),C=u("td"),A=d(H),k(i,"class","text-center"),k(n,"class","table table-striped"),k(r,"class","col-xs-12"),k(e,"class","row mt-3 svelte-x2fmb9")},m(t,l){c(t,e,l),a(e,r),a(r,n),a(n,s),a(n,o),a(n,i),a(i,h),a(h,p),a(i,g),a(i,w),a(w,v),a(i,b),a(i,_),a(_,T),a(i,$),a(i,E),a(E,y),a(i,R),a(i,x),a(x,N),a(i,L),a(i,C),a(C,A)},p(t,e){t.allTasks&&F!==(F=e.allTasks.length+"")&&m(p,F),t.counters&&O!==(O=e.counters.success+"")&&m(v,O),t.counters&&U!==(U=e.counters.error+"")&&m(T,U),t.counters&&S!==(S=e.counters.new+"")&&m(y,S),t.counters&&W!==(W=e.counters.running+"")&&m(N,W),t.counters&&H!==(H=e.counters.halted+"")&&m(A,H)},d(t){t&&l(e)}}}function wt(e){var r;function n(t){return t.filteredTasks()&&t.filteredTasks().length>0?lt:ct}var s=n(e),o=s(e);return{c(){o.c(),r=h()},m(t,e){o.m(t,e),c(t,r,e)},p(t,e){s===(s=n(e))&&o?o.p(t,e):(o.d(1),(o=s(e))&&(o.c(),o.m(r.parentNode,r)))},i:t,o:t,d(t){o.d(t),t&&l(r)}}}function vt(t,e,r){let{allTasks:n=[],isError:s=!1}=e;const o={RESULT:"OK",ERROR:"ERROR",NEW:"NEW",RUNNING:"RUNNING",HALTED:"HALTED",ALL:"all"};let a,c={success:0,error:0,new:0,running:0,halted:0},l=o.ALL;function i(t){let e=[];return n.forEach(r=>{r.state==t&&e.push(r)}),e}function u(t){r("currentFilter",l=t)}return t.$set=(t=>{"allTasks"in t&&r("allTasks",n=t.allTasks),"isError"in t&&r("isError",s=t.isError)}),t.$$.update=((t={currentFilter:1,allTasks:1})=>{(t.currentFilter||t.allTasks)&&r("filteredTasks",a=(()=>(r("counters",c={success:0,error:0,new:0,running:0,halted:0}),n.forEach(t=>{t.state==o.RESULT?(c.success++,r("counters",c),r("currentFilter",l),r("allTasks",n)):t.state==o.ERROR?(c.error++,r("counters",c),r("currentFilter",l),r("allTasks",n)):t.state==o.NEW?(c.new++,r("counters",c),r("currentFilter",l),r("allTasks",n)):t.state==o.RUNNING?(c.running++,r("counters",c),r("currentFilter",l),r("allTasks",n)):t.state==o.HALTED&&(c.halted++,r("counters",c),r("currentFilter",l),r("allTasks",n))}),l==o.ALL?n:l==o.RESULT?i(o.RESULT):l==o.ERROR?i(o.ERROR):l==o.NEW?i(o.NEW):l==o.RUNNING?i(o.RUNNING):l==o.HALTED?i(o.HALTED):void 0)))}),{allTasks:n,isError:s,state:o,counters:c,currentFilter:l,updateFilter:u,filteredTasks:a,click_handler:function(){return u(o.ALL)},click_handler_1:function(){return u(o.RESULT)},click_handler_2:function(){return u(o.ERROR)},click_handler_3:function(){return u(o.NEW)},click_handler_4:function(){return u(o.RUNNING)},click_handler_5:function(){return u(o.HALTED)}}}class bt extends I{constructor(t){super(),H(this,t,vt,wt,o,["allTasks","isError"])}}function _t(t){var e,r,n,s=new bt({props:{allTasks:t.allTasks}});return{c(){(e=u("h1")).textContent="Tasks",r=f(),s.$$.fragment.c()},m(t,o){c(t,e,o),c(t,r,o),U(s,t,o),n=!0},p(t,e){var r={};t.allTasks&&(r.allTasks=e.allTasks),s.$set(r)},i(t){n||(F(s.$$.fragment,t),n=!0)},o(t){O(s.$$.fragment,t),n=!1},d(t){t&&(l(e),l(r)),S(s,t)}}}function Tt(t,e,r){let n=[];return n.forEach(t=>{t.state=t.state.toUpperCase()}),b(async()=>{new Promise((t,e)=>{var r=[{category:"",time_start:"2019/08/21 16:01:41",time_stop:"2019/08/21 16:01:41",state:"error",timeout:"0",action_id:"4",args:"[\n1,\n2\n]",kwargs:"{}",result:"3",error:"{}",return_queues:[],id:5},{category:"test category",time_start:"2019/08/21 16:03:42",time_stop:"2019/08/21 16:05:22",state:"error",timeout:"0",action_id:"6",args:"[\n1,\n2\n]",kwargs:"{}",result:"3",error:"{error test}",return_queues:["test1","test2"],id:7},{category:"",time_start:"2019/08/21 16:10:03",time_stop:"2019/08/21 16:11:43",state:"ok",timeout:"0",action_id:"6",args:"[\n1,\n2\n]",kwargs:"{}",result:"3",error:"{}",return_queues:[],id:8},{category:"",time_start:"2019/08/21 16:10:03",time_stop:"2019/08/21 16:11:43",state:"ok",timeout:"0",action_id:"6",args:"[\n1,\n2\n]",kwargs:"{}",result:"3",error:"{}",return_queues:[],id:8},{category:"",time_start:"2019/08/21 16:10:03",time_stop:"2019/08/21 16:11:43",state:"halted",timeout:"0",action_id:"6",args:"[\n1,\n2\n]",kwargs:"{}",result:"3",error:"{}",return_queues:[],id:8},{category:"",time_start:"2019/08/21 16:10:03",time_stop:"2019/08/21 16:11:43",state:"running",timeout:"0",action_id:"6",args:"[\n1,\n2\n]",kwargs:"{}",result:"3",error:"{}",return_queues:[],id:8},{category:"",time_start:"2019/08/21 16:10:03",time_stop:"2019/08/21 16:11:43",state:"new",timeout:"0",action_id:"6",args:"[\n1,\n2\n]",kwargs:"{}",result:"3",error:"{}",return_queues:[],id:8}];setTimeout(function(){t(r)},5e3)}).then(function(t){t&&(r("allTasks",n=t),n.forEach(t=>{t.state=t.state.toUpperCase()}))})}),{allTasks:n}}function $t(e){return{c:t,m:t,p:t,i:t,o:t,d:t}}let Et,yt,Rt=[];function xt(t){t.node.classList.remove(t.className),t.pattern.test(Et)&&t.node.classList.add(t.className)}function Nt(e){var r,n,s,o,i,d,h,p,m,g,w,v,b,_;return{c(){r=u("div"),n=u("nav"),s=u("div"),(o=u("div")).innerHTML='<span class="navbar-brand" href="#">Jobs visualization</span>',i=f(),d=u("ul"),h=u("li"),(p=u("a")).textContent="Workers",g=f(),w=u("li"),(v=u("a")).textContent="Tasks",k(o,"class","navbar-header"),k(p,"href","/workers"),k(v,"href","/tasks"),k(d,"class","nav navbar-nav"),k(s,"class","container-fluid"),k(n,"class","navbar navbar-inverse test")},m(t,e){c(t,r,e),a(r,n),a(n,s),a(s,o),a(s,i),a(s,d),a(d,h),a(h,p),m=K.call(null,p)||{},a(d,g),a(d,w),a(w,v),b=K.call(null,v)||{},_=function(t,e,r){if(!e&&t.hasAttribute("href")&&(e=t.getAttribute("href"))&&e.length>1&&"#"==e.charAt(0)&&(e=e.substring(1)),r||(r="active"),!e||e.length<1||"/"!=e.charAt(0)&&"*"!=e.charAt(0))throw Error('Invalid value for "path" argument');const{pattern:n}=G(e),s={node:t,className:r,pattern:n};return Rt.push(s),xt(s),{destroy(){Rt=Rt.splice(Rt.indexOf(s),1)}}}.call(null,v,"/tasks/*","my-active")||{}},p:t,i:t,o:t,d(t){t&&l(r),m&&"function"==typeof m.destroy&&m.destroy(),b&&"function"==typeof b.destroy&&b.destroy(),_&&"function"==typeof _.destroy&&_.destroy()}}}J.subscribe(t=>{Et=t.location+(t.querystring?"?"+t.querystring:""),Rt.map(xt)});class Lt extends I{constructor(t){super(),H(this,t,null,Nt,o,[])}}function Ct(e){var r,n,s;return{c(){(r=u("h2")).textContent="Not Found",n=f(),(s=u("h3")).textContent="Oops, this route doesn't exist!"},m(t,e){c(t,r,e),c(t,n,e),c(t,s,e)},p:t,i:t,o:t,d(t){t&&(l(r),l(n),l(s))}}}(yt=new Map).set("/",ot),yt.set("/workers",ot),yt.set("/tasks",class extends I{constructor(t){super(),H(this,t,Tt,_t,o,[])}}),yt.set("/single-worker-tasks/:taskId",class extends I{constructor(t){super(),H(this,t,null,$t,o,[])}}),yt.set("*",class extends I{constructor(t){super(),H(this,t,null,Ct,o,[])}});var At=yt;function Ft(t){var e,r,n,s,o=new Lt({}),a=new Q({props:{routes:At}});return{c(){e=u("div"),o.$$.fragment.c(),r=f(),n=u("div"),a.$$.fragment.c(),k(n,"class","container")},m(t,l){c(t,e,l),U(o,e,null),c(t,r,l),c(t,n,l),U(a,n,null),s=!0},p(t,e){var r={};t.routes&&(r.routes=At),a.$set(r)},i(t){s||(F(o.$$.fragment,t),F(a.$$.fragment,t),s=!0)},o(t){O(o.$$.fragment,t),O(a.$$.fragment,t),s=!1},d(t){t&&l(e),S(o),t&&(l(r),l(n)),S(a)}}}return new class extends I{constructor(t){super(),H(this,t,null,Ft,o,[])}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
